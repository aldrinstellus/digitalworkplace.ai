function jBoxWrapper(n){var t=function t(i,r){if(this.options={id:null,width:"auto",height:"auto",minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,responsiveWidth:!0,responsiveHeight:!0,responsiveMinWidth:100,responsiveMinHeight:100,attach:null,trigger:"click",preventDefault:!1,content:null,getContent:null,title:null,getTitle:null,footer:null,isolateScroll:!0,ajax:{url:null,data:"",reload:!1,getURL:"data-url",getData:"data-ajax",setContent:!0,loadingClass:!0,spinner:!0,spinnerDelay:300,spinnerReposition:!0},cancelAjaxOnClose:!0,target:null,position:{x:"center",y:"center"},outside:null,offset:0,attributes:{x:"left",y:"top"},fixed:!1,adjustPosition:!0,adjustTracker:!1,adjustDistance:5,reposition:!0,repositionOnOpen:!0,repositionOnContent:!0,holdPosition:!0,pointer:!1,pointTo:"target",fade:180,animation:null,theme:"Default",addClass:null,overlay:!1,overlayClass:null,zIndex:1e4,delayOpen:0,delayClose:0,closeOnEsc:!1,closeOnClick:!1,closeOnMouseleave:!1,closeButton:!1,appendTo:n("body"),createOnInit:!1,blockScroll:!1,blockScrollAdjust:!0,draggable:!1,dragOver:!0,autoClose:!1,delayOnHover:!1,showCountdown:!1,preloadAudio:!0,audio:null,volume:100,onInit:null,onAttach:null,onPosition:null,onCreated:null,onOpen:null,onOpenComplete:null,onClose:null,onCloseComplete:null,onDragStart:null,onDragEnd:null},this._pluginOptions={Tooltip:{getContent:"title",trigger:"mouseenter",position:{x:"center",y:"top"},outside:"y",pointer:!0},Mouse:{responsiveWidth:!1,responsiveHeight:!1,adjustPosition:"flip",target:"mouse",trigger:"mouseenter",position:{x:"right",y:"bottom"},outside:"xy",offset:5},Modal:{target:n(window),fixed:!0,blockScroll:!0,closeOnEsc:!0,closeOnClick:"overlay",closeButton:!0,overlay:!0,animation:"zoomIn"}},this.options=n.extend(!0,this.options,this._pluginOptions[i]?this._pluginOptions[i]:t._pluginOptions[i],r),n.type(i)=="string"&&(this.type=i),this.isTouchDevice=function(){var t=" -webkit- -moz- -o- -ms- ".split(" "),i=function(n){return window.matchMedia(n).matches},n;return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?!0:(n=["(",t.join("touch-enabled),("),"heartz",")"].join(""),i(n))}(),this.isTouchDevice&&this.options.trigger==="mouseenter"&&this.options.closeOnClick===!1&&(this.options.closeOnClick="body"),this._fireEvent=function(n,t){this.options["_"+n]&&this.options["_"+n].bind(this)(t);this.options[n]&&this.options[n].bind(this)(t)},this.options.id===null&&(this.options.id="jBox"+t._getUniqueID()),this.id=this.options.id,(this.options.position.x=="center"&&this.options.outside=="x"||this.options.position.y=="center"&&this.options.outside=="y")&&(this.options.outside=null),this.options.pointTo!="target"||this.options.outside&&this.options.outside!="xy"||(this.options.pointer=!1),this.options.offset=n.type(this.options.offset)!="object"?{x:this.options.offset,y:this.options.offset}:n.extend({x:0,y:0},this.options.offset),this.options.adjustDistance=n.type(this.options.adjustDistance)!="object"?{top:this.options.adjustDistance,right:this.options.adjustDistance,bottom:this.options.adjustDistance,left:this.options.adjustDistance}:n.extend({top:5,left:5,right:5,bottom:5},this.options.adjustDistance),this.outside=this.options.outside&&this.options.outside!="xy"?this.options.position[this.options.outside]:!1,this.align=this.outside?this.outside:this.options.position.y!="center"&&n.type(this.options.position.y)!="number"?this.options.position.x:this.options.position.x!="center"&&n.type(this.options.position.x)!="number"?this.options.position.y:this.options.attributes.x,t.zIndexMax=Math.max(t.zIndexMax||0,this.options.zIndex==="auto"?1e4:this.options.zIndex),this.options.zIndex==="auto"&&(this.adjustZIndexOnOpen=!0,t.zIndexMax+=2,this.options.zIndex=t.zIndexMax,this.trueModal=this.options.overlay),this._getOpp=function(n){return{left:"right",right:"left",top:"bottom",bottom:"top",x:"y",y:"x"}[n]},this._getXY=function(n){return{left:"x",right:"x",top:"y",bottom:"y",center:"x"}[n]},this._getTL=function(n){return{left:"left",right:"left",top:"top",bottom:"top",center:"left",x:"left",y:"top"}[n]},this._getInt=function(t,i){return t=="auto"?"auto":t&&n.type(t)=="string"&&t.slice(-1)=="%"?n(window)[i=="height"?"innerHeight":"innerWidth"]()*parseInt(t.replace("%",""))/100:t},this._createSVG=function(t,i){var r=document.createElementNS("http://www.w3.org/2000/svg",t);return n.each(i,function(n,t){r.setAttribute(t[0],t[1]||"")}),r},this._isolateScroll=function(n){if(n&&n.length)n.on("DOMMouseScroll.jBoxIsolateScroll mousewheel.jBoxIsolateScroll",function(t){var i=t.wheelDelta||t.originalEvent&&t.originalEvent.wheelDelta||-t.detail,r=this.scrollTop+n.outerHeight()-this.scrollHeight>=0,u=this.scrollTop<=0;(i<0&&r||i>0&&u)&&t.preventDefault()})},this._setTitleWidth=function(){var n;if(!this.titleContainer||this.content[0].style.width=="auto"&&!this.content[0].style.maxWidth)return null;this.wrapper.css("display")=="none"?(this.wrapper.css("display","block"),n=this.content.outerWidth(),this.wrapper.css("display","none")):n=this.content.outerWidth();this.titleContainer.css({maxWidth:Math.max(n,parseInt(this.content[0].style.maxWidth))||null})},this._draggable=function(){if(!this.options.draggable)return!1;var i=this.options.draggable=="title"?this.titleContainer:this.options.draggable instanceof n?this.options.draggable:n.type(this.options.draggable)=="string"?n(this.options.draggable):this.wrapper;if(!i||!(i instanceof n)||!i.length||i.data("jBox-draggable"))return!1;i.addClass("jBox-draggable").data("jBox-draggable",!0).on("touchstart mousedown",function(i){var r,u;if(i.button==2||n(i.target).hasClass("jBox-noDrag")||n(i.target).parents(".jBox-noDrag").length){i.type=="touchstart"&&(n(i.target).hasClass("jBox-closeButton")||n(i.target).parents(".jBox-closeButton").length)&&this.close({ignoreDelay:!0});return}i.type=="touchstart"&&i.touches&&i.touches[0]?(r=i.touches[0].pageX,u=i.touches[0].pageY):(r=i.pageX,u=i.pageY);this.draggingStartX=r;this.draggingStartY=u;this.options.dragOver&&!this.trueModal&&parseInt(this.wrapper.css("zIndex"),10)<=t.zIndexMaxDragover&&(t.zIndexMaxDragover+=1,this.wrapper.css("zIndex",t.zIndexMaxDragover));var f=this.wrapper.outerHeight(),e=this.wrapper.outerWidth(),o=this.wrapper.offset().top+f-u,s=this.wrapper.offset().left+e-r;n(document).on("touchmove.jBox-draggable-"+this.id+" mousemove.jBox-draggable-"+this.id,function(n){var t,i;n.type=="touchmove"&&n.touches&&n.touches[0]?(t=n.touches[0].pageX,i=n.touches[0].pageY):(t=n.pageX,i=n.pageY);this.dragging||this.draggingStartX==t||this.draggingStartY==i||(this._fireEvent("onDragStart"),this.dragging=!0);this.wrapper.offset({top:i+o-f,left:t+s-e})}.bind(this));i.preventDefault()}.bind(this)).on("touchend mouseup",function(){if(n(document).off("touchmove.jBox-draggable-"+this.id+" mousemove.jBox-draggable-"+this.id),this.dragging&&this._fireEvent("onDragEnd"),this.dragging=!1,(this.type=="Modal"||this.type=="Confirm")&&this.options.holdPosition){var t=n("#"+this.id).offset(),i={x:t.left-n(document).scrollLeft(),y:t.top-n(document).scrollTop()};this.position({position:i,offset:{x:0,y:0}})}}.bind(this));return this.trueModal||(t.zIndexMaxDragover=t.zIndexMaxDragover?Math.max(t.zIndexMaxDragover,this.options.zIndex):this.options.zIndex),this},this._create=function(){var i,t;this.wrapper||(this.wrapper=n("<div/>",{id:this.id,"class":"jBox-wrapper"+(this.type?" jBox-"+this.type:"")+(this.options.theme?" jBox-"+this.options.theme:"")+(this.options.addClass?" "+this.options.addClass:"")}).css({position:this.options.fixed?"fixed":"absolute",display:"none",opacity:0,zIndex:this.options.zIndex}).data("jBox",this),this.options.closeOnMouseleave&&this.wrapper.on("mouseleave",function(t){this.source&&!(t.relatedTarget==this.source[0]||n.inArray(this.source[0],n(t.relatedTarget).parents("*"))!==-1)&&this.close()}.bind(this)),this.options.closeOnClick=="box"&&this.wrapper.on("click tap",function(){this.close({ignoreDelay:!0})}.bind(this)),this.container=n('<div class="jBox-container"/>').appendTo(this.wrapper),this.content=n('<div class="jBox-content"/>').appendTo(this.container),this.options.footer&&(this.footer=n('<div class="jBox-footer"/>').append(this.options.footer).appendTo(this.container)),this.options.isolateScroll&&this._isolateScroll(this.content),this.options.closeButton&&(i=this._createSVG("svg",[["viewBox","0 0 24 24"]]),i.appendChild(this._createSVG("path",[["d","M22.2,4c0,0,0.5,0.6,0,1.1l-6.8,6.8l6.9,6.9c0.5,0.5,0,1.1,0,1.1L20,22.3c0,0-0.6,0.5-1.1,0L12,15.4l-6.9,6.9c-0.5,0.5-1.1,0-1.1,0L1.7,20c0,0-0.5-0.6,0-1.1L8.6,12L1.7,5.1C1.2,4.6,1.7,4,1.7,4L4,1.7c0,0,0.6-0.5,1.1,0L12,8.5l6.8-6.8c0.5-0.5,1.1,0,1.1,0L22.2,4z"]])),this.closeButton=n('<div class="jBox-closeButton jBox-noDrag"/>').on("click tap",function(){this.close({ignoreDelay:!0})}.bind(this)).append(i),this.options.closeButton!="box"&&(this.options.closeButton!==!0||this.options.overlay||this.options.title||this.options.getTitle)||(this.wrapper.addClass("jBox-closeButton-box"),this.closeButton.appendTo(this.container))),this.wrapper.appendTo(this.options.appendTo),this.wrapper.find(".jBox-closeButton").length&&n.each(["top","right","bottom","left"],function(n,t){this.wrapper.find(".jBox-closeButton").css(t)&&this.wrapper.find(".jBox-closeButton").css(t)!="auto"&&(this.options.adjustDistance[t]=Math.max(this.options.adjustDistance[t],this.options.adjustDistance[t]+((parseInt(this.wrapper.find(".jBox-closeButton").css(t))||0)+(parseInt(this.container.css("border-"+t+"-width"))||0))*-1))}.bind(this)),this.options.pointer&&(this.pointer={position:this.options.pointTo!="target"?this.options.pointTo:this._getOpp(this.outside),xy:this.options.pointTo!="target"?this._getXY(this.options.pointTo):this._getXY(this.outside),align:"center",offset:0},this.pointer.element=n('<div class="jBox-pointer jBox-pointer-'+this.pointer.position+'"/>').appendTo(this.wrapper),this.pointer.dimensions={x:this.pointer.element.outerWidth(),y:this.pointer.element.outerHeight()},n.type(this.options.pointer)=="string"&&(t=this.options.pointer.split(":"),t[0]&&(this.pointer.align=t[0]),t[1]&&(this.pointer.offset=parseInt(t[1]))),this.pointer.alignAttribute=this.pointer.xy=="x"?this.pointer.align=="bottom"?"bottom":"top":this.pointer.align=="right"?"right":"left",this.wrapper.css("padding-"+this.pointer.position,this.pointer.dimensions[this.pointer.xy]),this.pointer.element.css(this.pointer.alignAttribute,this.pointer.align=="center"?"50%":0).css("margin-"+this.pointer.alignAttribute,this.pointer.offset),this.pointer.margin={},this.pointer.margin["margin-"+this.pointer.alignAttribute]=this.pointer.offset,this.pointer.align=="center"&&this.pointer.element.css("transform","translate("+(this.pointer.xy=="y"?this.pointer.dimensions.x*-.5+"px":0)+", "+(this.pointer.xy=="x"?this.pointer.dimensions.y*-.5+"px":0)+")"),this.pointer.element.css(this.pointer.xy=="x"?"width":"height",parseInt(this.pointer.dimensions[this.pointer.xy])+parseInt(this.container.css("border-"+this.pointer.alignAttribute+"-width"))),this.wrapper.addClass("jBox-pointerPosition-"+this.pointer.position)),this.setContent(this.options.content,!0),this.setTitle(this.options.title,!0),this.options.draggable&&this._draggable(),this._fireEvent("onCreated"))},this.options.createOnInit&&this._create(),this.options.attach&&this.attach(),this._attachEvents=function(){this.options.delayOnHover&&n("#"+this.id).on("mouseenter",function(){this.isHovered=!0}.bind(this));this.options.delayOnHover&&n("#"+this.id).on("mouseleave",function(){this.isHovered=!1}.bind(this));(this.options.adjustPosition||this.options.reposition)&&!this.fixed&&this.outside&&(this.options.adjustTracker&&n(window).on("scroll.jBox-"+this.id,function(){this.position()}.bind(this)),(this.options.adjustPosition||this.options.reposition)&&n(window).on("resize.jBox-"+this.id,function(){this.position()}.bind(this)));this.options.target=="mouse"&&n("body").on("mousemove.jBox-"+this.id,function(n){this.position({mouseTarget:{top:n.pageY,left:n.pageX}})}.bind(this))},this._detachEvents=function(){this.options.closeOnEsc&&n(document).off("keyup.jBox-"+this.id);(this.options.closeOnClick===!0||this.options.closeOnClick=="body")&&n(document).off("click.jBox-"+this.id+" tap.jBox-"+this.id);this.options.adjustTracker&&n(window).off("scroll.jBox-"+this.id);(this.options.adjustPosition||this.options.reposition)&&n(window).off("resize.jBox-"+this.id);this.options.target=="mouse"&&n("body").off("mousemove.jBox-"+this.id)},this._showOverlay=function(){(this.overlay||(this.overlay=n('<div id="'+this.id+'-overlay"/>').addClass("jBox-overlay"+(this.type?" jBox-overlay-"+this.type:"")).css({display:"none",opacity:0,zIndex:this.options.zIndex-1}).appendTo(this.options.appendTo),this.options.overlayClass&&this.overlay.addClass(this.options.overlayClass),(this.options.closeButton=="overlay"||this.options.closeButton===!0)&&this.overlay.append(this.closeButton),this.options.closeOnClick=="overlay"&&this.overlay.on("click tap",function(){this.close({ignoreDelay:!0})}.bind(this)),n("#"+this.id+"-overlay .jBox-closeButton").length&&(this.options.adjustDistance.top=Math.max(n("#"+this.id+"-overlay .jBox-closeButton").outerHeight(),this.options.adjustDistance.top))),this.adjustZIndexOnOpen===!0&&this.overlay.css("zIndex",parseInt(this.wrapper.css("zIndex"),10)-1),this.overlay.css("display")!="block")&&(this.options.fade?this.overlay.stop()&&this.overlay.animate({opacity:1},{queue:!1,duration:this.options.fade,start:function(){this.overlay.css({display:"block"})}.bind(this)}):this.overlay.css({display:"block",opacity:1}))},this._hideOverlay=function(){this.overlay&&(this.options.fade?this.overlay.stop()&&this.overlay.animate({opacity:0},{queue:!1,duration:this.options.fade,complete:function(){this.overlay.css({display:"none"})}.bind(this)}):this.overlay.css({display:"none",opacity:0}))},this._exposeDimensions=function(){this.wrapper.css({top:-1e4,left:-1e4,right:"auto",bottom:"auto"});var n={x:this.wrapper.outerWidth(),y:this.wrapper.outerHeight()};return this.wrapper.css({top:"auto",left:"auto"}),n},this._generateAnimationCSS=function(){var t,i;if(n.type(this.options.animation)!="object"&&(this.options.animation={pulse:{open:"pulse",close:"zoomOut"},zoomIn:{open:"zoomIn",close:"zoomIn"},zoomOut:{open:"zoomOut",close:"zoomOut"},move:{open:"move",close:"move"},slide:{open:"slide",close:"slide"},flip:{open:"flip",close:"flip"},tada:{open:"tada",close:"zoomOut"}}[this.options.animation]),!this.options.animation)return null;this.options.animation.open&&(this.options.animation.open=this.options.animation.open.split(":"));this.options.animation.close&&(this.options.animation.close=this.options.animation.close.split(":"));this.options.animation.openDirection=this.options.animation.open[1]?this.options.animation.open[1]:null;this.options.animation.closeDirection=this.options.animation.close[1]?this.options.animation.close[1]:null;this.options.animation.open&&(this.options.animation.open=this.options.animation.open[0]);this.options.animation.close&&(this.options.animation.close=this.options.animation.close[0]);this.options.animation.open&&(this.options.animation.open+="Open");this.options.animation.close&&(this.options.animation.close+="Close");t={pulse:{duration:350,css:[["0%","scale(1)"],["50%","scale(1.1)"],["100%","scale(1)"]]},zoomInOpen:{duration:this.options.fade||180,css:[["0%","scale(0.9)"],["100%","scale(1)"]]},zoomInClose:{duration:this.options.fade||180,css:[["0%","scale(1)"],["100%","scale(0.9)"]]},zoomOutOpen:{duration:this.options.fade||180,css:[["0%","scale(1.1)"],["100%","scale(1)"]]},zoomOutClose:{duration:this.options.fade||180,css:[["0%","scale(1)"],["100%","scale(1.1)"]]},moveOpen:{duration:this.options.fade||180,positions:{top:{"0%":-12},right:{"0%":12},bottom:{"0%":12},left:{"0%":-12}},css:[["0%","translate%XY(%Vpx)"],["100%","translate%XY(0px)"]]},moveClose:{duration:this.options.fade||180,timing:"ease-in",positions:{top:{"100%":-12},right:{"100%":12},bottom:{"100%":12},left:{"100%":-12}},css:[["0%","translate%XY(0px)"],["100%","translate%XY(%Vpx)"]]},slideOpen:{duration:400,positions:{top:{"0%":-400},right:{"0%":400},bottom:{"0%":400},left:{"0%":-400}},css:[["0%","translate%XY(%Vpx)"],["100%","translate%XY(0px)"]]},slideClose:{duration:400,timing:"ease-in",positions:{top:{"100%":-400},right:{"100%":400},bottom:{"100%":400},left:{"100%":-400}},css:[["0%","translate%XY(0px)"],["100%","translate%XY(%Vpx)"]]},flipOpen:{duration:600,css:[["0%","perspective(400px) rotateX(90deg)"],["40%","perspective(400px) rotateX(-15deg)"],["70%","perspective(400px) rotateX(15deg)"],["100%","perspective(400px) rotateX(0deg)"]]},flipClose:{duration:this.options.fade||300,css:[["0%","perspective(400px) rotateX(0deg)"],["100%","perspective(400px) rotateX(90deg)"]]},tada:{duration:800,css:[["0%","scale(1)"],["10%, 20%","scale(0.9) rotate(-3deg)"],["30%, 50%, 70%, 90%","scale(1.1) rotate(3deg)"],["40%, 60%, 80%","scale(1.1) rotate(-3deg)"],["100%","scale(1) rotate(0)"]]}};n.each(["pulse","tada"],function(n,i){t[i+"Open"]=t[i+"Close"]=t[i]});i=function(i,r){var u="@keyframes jBox-"+this.id+"-animation-"+this.options.animation[i]+"-"+i+(r?"-"+r:"")+" {";return n.each(t[this.options.animation[i]].css,function(n,f){var e=r?f[1].replace("%XY",this._getXY(r).toUpperCase()):f[1];t[this.options.animation[i]].positions&&(e=e.replace("%V",t[this.options.animation[i]].positions[r][f[0]]));u+=f[0]+" {transform:"+e+";}"}.bind(this)),u+="}",u+=".jBox-"+this.id+"-animation-"+this.options.animation[i]+"-"+i+(r?"-"+r:"")+" {",u+="animation-duration: "+t[this.options.animation[i]].duration+"ms;",u+="animation-name: jBox-"+this.id+"-animation-"+this.options.animation[i]+"-"+i+(r?"-"+r:"")+";",u+=t[this.options.animation[i]].timing?"animation-timing-function: "+t[this.options.animation[i]].timing+";":"",u+="}"}.bind(this);this._animationCSS="";n.each(["open","close"],function(r,u){if(!this.options.animation[u]||!t[this.options.animation[u]]||u=="close"&&!this.options.fade)return"";t[this.options.animation[u]].positions?n.each(["top","right","bottom","left"],function(n,t){this._animationCSS+=i(u,t)}.bind(this)):this._animationCSS+=i(u)}.bind(this))},this.options.animation&&this._generateAnimationCSS(),this._blockBodyClick=function(){this.blockBodyClick=!0;setTimeout(function(){this.blockBodyClick=!1}.bind(this),10)},this._animate=function(n){var t,r,i;if(n||(n=this.isOpen?"open":"close"),!this.options.fade&&n=="close")return null;t=this.options.animation[n+"Direction"]||(this.align!="center"?this.align:this.options.attributes.x);this.flipped&&this._getXY(t)==this._getXY(this.align)&&(t=this._getOpp(t));r="jBox-"+this.id+"-animation-"+this.options.animation[n]+"-"+n+" jBox-"+this.id+"-animation-"+this.options.animation[n]+"-"+n+"-"+t;this.wrapper.addClass(r);i=parseFloat(this.wrapper.css("animation-duration"))*1e3;n=="close"&&(i=Math.min(i,this.options.fade));setTimeout(function(){this.wrapper&&this.wrapper.removeClass(r)}.bind(this),i)},this._abortAnimation=function(){var n=this.wrapper.attr("class").split(" ").filter(function(n){return n.lastIndexOf("jBox-"+this.id+"-animation",0)!==0}.bind(this));this.wrapper.attr("class",n.join(" "))},this.options.responsiveWidth||this.options.responsiveHeight)n(window).on("resize.responsivejBox-"+this.id,function(){this.isOpen&&this.position()}.bind(this));return n.type(this.options.preloadAudio)==="string"&&(this.options.preloadAudio=[this.options.preloadAudio]),n.type(this.options.audio)==="string"&&(this.options.audio={open:this.options.audio}),n.type(this.options.volume)==="number"&&(this.options.volume={open:this.options.volume,close:this.options.volume}),this.options.preloadAudio===!0&&this.options.audio&&(this.options.preloadAudio=[],n.each(this.options.audio,function(n,t){this.options.preloadAudio.push(t+".mp3");this.options.preloadAudio.push(t+".ogg")}.bind(this))),this.options.preloadAudio.length&&n.each(this.options.preloadAudio,function(n,t){var i=new Audio;i.src=t;i.preload="auto"}),this._fireEvent("onInit"),this};return t.prototype.attach=function(t,i){return t||(t=this.options.attach),n.type(t)=="string"&&(t=n(t)),i||(i=this.options.trigger),t&&t.length&&n.each(t,function(t,r){if(r=n(r),!r.data("jBox-attached-"+this.id)){this.options.getContent=="title"&&r.attr("title")!=undefined&&r.data("jBox-getContent",r.attr("title")).removeAttr("title");this.attachedElements||(this.attachedElements=[]);this.attachedElements.push(r[0]);r.on(i+".jBox-attach-"+this.id,function(n){if(this.timer&&clearTimeout(this.timer),i!="mouseenter"||!this.isOpen||this.source[0]!=r[0]){if(this.isOpen&&this.source&&this.source[0]!=r[0]);this.source=r;this.options.target||(this.target=r);i=="click"&&this.options.preventDefault&&n.preventDefault();this[i=="click"&&!1?"toggle":"open"]()}}.bind(this));this.options.trigger=="mouseenter"&&r.on("mouseleave",function(t){if(!this.wrapper)return null;this.options.closeOnMouseleave&&(t.relatedTarget==this.wrapper[0]||n(t.relatedTarget).parents("#"+this.id).length)||this.close()}.bind(this));r.data("jBox-attached-"+this.id,i);this._fireEvent("onAttach",r)}}.bind(this)),this},t.prototype.detach=function(t){return t||(t=this.attachedElements||[]),t&&t.length&&n.each(t,function(t,i){i=n(i);i.data("jBox-attached-"+this.id)&&(i.off(i.data("jBox-attached-"+this.id)+".jBox-attach-"+this.id),i.data("jBox-attached-"+this.id,null));this.attachedElements=n.grep(this.attachedElements,function(n){return n!=i[0]})}.bind(this)),this},t.prototype.setTitle=function(t,i){if(t==null||t==undefined)return this;this.wrapper||this._create();var u=this.wrapper.outerHeight(),r=this.wrapper.outerWidth();return this.title||(this.titleContainer=n('<div class="jBox-title"/>'),this.title=n("<div/>").appendTo(this.titleContainer),this.options.closeButton!="title"&&(this.options.closeButton!==!0||this.options.overlay)||(this.wrapper.addClass("jBox-closeButton-title"),this.closeButton.appendTo(this.titleContainer)),this.titleContainer.insertBefore(this.content),this._setTitleWidth()),this.wrapper[t?"addClass":"removeClass"]("jBox-hasTitle"),this.title.html(t),r!=this.wrapper.outerWidth()&&this._setTitleWidth(),this.options.draggable&&this._draggable(),!i&&this.options.repositionOnContent&&(u!=this.wrapper.outerHeight()||r!=this.wrapper.outerWidth())&&this.position(),this},t.prototype.setContent=function(t,i){if(t==null||t==undefined)return this;this.wrapper||this._create();var u=this.wrapper.outerHeight(),r=this.wrapper.outerWidth();this.content.children("[data-jbox-content-appended]").appendTo("body").css({display:"none"});switch(n.type(t)){case"string":this.content.html(t);break;case"object":t&&(t instanceof n||t.constructor.prototype.jquery)?(this.content.html(""),t.attr("data-jbox-content-appended",1).appendTo(this.content).css({display:"block"})):this.content.html(JSON.stringify(t))}return r!=this.wrapper.outerWidth()&&this._setTitleWidth(),this.options.draggable&&this._draggable(),!i&&this.options.repositionOnContent&&(u!=this.wrapper.outerHeight()||r!=this.wrapper.outerWidth())&&this.position(),this},t.prototype.setDimensions=function(n,t,i){this.wrapper||this._create();t==undefined&&(t="auto");this.content.css(n,this._getInt(t));n=="width"&&this._setTitleWidth();this.options[n]=t;(i==undefined||i)&&this.position()},t.prototype.setWidth=function(n,t){this.setDimensions("width",n,t)},t.prototype.setHeight=function(n,t){this.setDimensions("height",n,t)},t.prototype.position=function(t){var e,f,s,b,k,u,y,a,p,w,d,i,g,l;if(t||(t={}),t=n.extend(!0,this.options,t),this.target=t.target||this.target||n(window),this.target instanceof n||this.target=="mouse"||(this.target=n(this.target)),!this.target.length)return this;this.content.css({width:this._getInt(t.width,"width"),height:this._getInt(t.height,"height"),minWidth:this._getInt(t.minWidth,"width"),minHeight:this._getInt(t.minHeight,"height"),maxWidth:this._getInt(t.maxWidth,"width"),maxHeight:this._getInt(t.maxHeight,"height")});this._setTitleWidth();e=this._exposeDimensions();this.target=="mouse"||this.target.data("jBox-"+this.id+"-fixed")||this.target.data("jBox-"+this.id+"-fixed",this.target[0]!=n(window)[0]&&(this.target.css("position")=="fixed"||this.target.parents().filter(function(){return n(this).css("position")=="fixed"}).length>0)?"fixed":"static");f={x:n(window).outerWidth(),y:n(window).outerHeight(),top:t.fixed&&this.target.data("jBox-"+this.id+"-fixed")?0:n(window).scrollTop(),left:t.fixed&&this.target.data("jBox-"+this.id+"-fixed")?0:n(window).scrollLeft()};f.bottom=f.top+f.y;f.right=f.left+f.x;try{s=this.target.offset()}catch(ot){s={top:0,left:0}}this.target!="mouse"&&this.target.data("jBox-"+this.id+"-fixed")=="fixed"&&t.fixed&&(s.top=s.top-n(window).scrollTop(),s.left=s.left-n(window).scrollLeft());var h={x:this.target=="mouse"?12:this.target.outerWidth(),y:this.target=="mouse"?20:this.target.outerHeight(),top:this.target=="mouse"&&t.mouseTarget?t.mouseTarget.top:s?s.top:0,left:this.target=="mouse"&&t.mouseTarget?t.mouseTarget.left:s?s.left:0},v=t.outside&&!(t.position.x=="center"&&t.position.y=="center"),o={x:f.x-t.adjustDistance.left-t.adjustDistance.right,y:f.y-t.adjustDistance.top-t.adjustDistance.bottom,left:v?h.left-n(window).scrollLeft()-t.adjustDistance.left:0,right:v?f.x-h.left+n(window).scrollLeft()-h.x-t.adjustDistance.right:0,top:v?h.top-n(window).scrollTop()-this.options.adjustDistance.top:0,bottom:v?f.y-h.top+n(window).scrollTop()-h.y-t.adjustDistance.bottom:0},r={x:(t.outside=="x"||t.outside=="xy")&&n.type(t.position.x)!="number"?t.position.x:null,y:(t.outside=="y"||t.outside=="xy")&&n.type(t.position.y)!="number"?t.position.y:null},c={x:!1,y:!1};if(r.x&&e.x>o[r.x]&&o[this._getOpp(r.x)]>o[r.x]&&(r.x=this._getOpp(r.x))&&(c.x=!0),r.y&&e.y>o[r.y]&&o[this._getOpp(r.y)]>o[r.y]&&(r.y=this._getOpp(r.y))&&(c.y=!0),(t.responsiveWidth||t.responsiveHeight)&&(b=function(){if(t.responsiveWidth&&e.x>o[r.x||"x"]){var n=o[r.x||"x"]-(this.pointer&&v&&t.outside=="x"?this.pointer.dimensions.x:0)-parseInt(this.container.css("border-left-width"))-parseInt(this.container.css("border-right-width"));this.content.css({width:n>this.options.responsiveMinWidth?n:null,minWidth:n<parseInt(this.content.css("minWidth"))?0:null});this._setTitleWidth()}e=this._exposeDimensions()}.bind(this),t.responsiveWidth&&b(),t.responsiveWidth&&!c.y&&r.y&&e.y>o[r.y]&&o[this._getOpp(r.y)]>o[r.y]&&(r.y=this._getOpp(r.y))&&(c.y=!0),k=function(){if(t.responsiveHeight&&e.y>o[r.y||"y"]){var i=function(){var n;return!this.titleContainer&&!this.footer?0:(this.wrapper.css("display")=="none"?(this.wrapper.css("display","block"),n=(this.titleContainer?this.titleContainer.outerHeight():0)+(this.footer?this.footer.outerHeight():0),this.wrapper.css("display","none")):n=(this.titleContainer?this.titleContainer.outerHeight():0)+(this.footer?this.footer.outerHeight():0),n||0)}.bind(this),n=o[r.y||"y"]-(this.pointer&&v&&t.outside=="y"?this.pointer.dimensions.y:0)-i()-parseInt(this.container.css("border-top-width"))-parseInt(this.container.css("border-bottom-width"));this.content.css({height:n>this.options.responsiveMinHeight?n:null});this._setTitleWidth()}e=this._exposeDimensions()}.bind(this),t.responsiveHeight&&k(),t.responsiveHeight&&!c.x&&r.x&&e.x>o[r.x]&&o[this._getOpp(r.x)]>o[r.x]&&(r.x=this._getOpp(r.x))&&(c.x=!0),t.adjustPosition&&t.adjustPosition!="move"&&(c.x&&b(),c.y&&k())),u={},y=function(i){if(n.type(t.position[i])=="number"){u[t.attributes[i]]=t.position[i];return}var r=t.attributes[i]=i=="x"?"left":"top";if(u[r]=h[r],t.position[i]=="center"){u[r]+=Math.ceil((h[i]-e[i])/2);this.target!="mouse"&&this.target[0]&&this.target[0]==n(window)[0]&&(u[r]+=(t.adjustDistance[r]-t.adjustDistance[this._getOpp(r)])*.5);return}r!=t.position[i]&&(u[r]+=h[i]-e[i]);(t.outside==i||t.outside=="xy")&&(u[r]+=e[i]*(r!=t.position[i]?1:-1))}.bind(this),y("x"),y("y"),this.pointer&&t.pointTo=="target"&&n.type(t.position.x)!="number"&&n.type(t.position.y)!="number"){a=0;switch(this.pointer.align){case"center":t.position[this._getOpp(t.outside)]!="center"&&(a+=e[this._getOpp(t.outside)]/2);break;default:switch(t.position[this._getOpp(t.outside)]){case"center":a+=(e[this._getOpp(t.outside)]/2-this.pointer.dimensions[this._getOpp(t.outside)]/2)*(this.pointer.align==this._getTL(this.pointer.align)?1:-1);break;default:a+=this.pointer.align!=t.position[this._getOpp(t.outside)]?e[this._getOpp(t.outside)]*(n.inArray(this.pointer.align,["top","left"])!==-1?1:-1)+this.pointer.dimensions[this._getOpp(t.outside)]/2*(n.inArray(this.pointer.align,["top","left"])!==-1?-1:1):this.pointer.dimensions[this._getOpp(t.outside)]/2*(n.inArray(this.pointer.align,["top","left"])!==-1?1:-1)}}a*=t.position[this._getOpp(t.outside)]==this.pointer.alignAttribute?-1:1;a+=this.pointer.offset*(this.pointer.align==this._getOpp(this._getTL(this.pointer.align))?1:-1);u[this._getTL(this._getOpp(this.pointer.xy))]+=a}if(u[t.attributes.x]+=t.offset.x,u[t.attributes.y]+=t.offset.y,this.wrapper.css(u),t.adjustPosition){this.positionAdjusted&&(this.pointer&&this.wrapper.css("padding",0).css("padding-"+this._getOpp(this.outside),this.pointer.dimensions[this._getXY(this.outside)]).removeClass("jBox-pointerPosition-"+this._getOpp(this.pointer.position)).addClass("jBox-pointerPosition-"+this.pointer.position),this.pointer&&this.pointer.element.attr("class","jBox-pointer jBox-pointer-"+this._getOpp(this.outside)).css(this.pointer.margin),this.positionAdjusted=!1,this.flipped=!1);var nt=f.top>u.top-(t.adjustDistance.top||0),tt=f.right<u.left+e.x+(t.adjustDistance.right||0),it=f.bottom<u.top+e.y+(t.adjustDistance.bottom||0),rt=f.left>u.left-(t.adjustDistance.left||0),ut=rt?"left":tt?"right":null,ft=nt?"top":it?"bottom":null,et=ut||ft;if(et){if((this.type=="Modal"||this.type=="Confirm")&&n.type(this.options.position.x)=="number"&&n.type(this.options.position.y)=="number")return p=0,w=0,this.options.holdPosition&&(rt?p=f.left-(u.left-(t.adjustDistance.left||0)):tt&&(p=f.right-(u.left+e.x+(t.adjustDistance.right||0))),nt?w=f.top-(u.top-(t.adjustDistance.top||0)):it&&(w=f.bottom-(u.top+e.y+(t.adjustDistance.bottom||0))),this.options.position.x=Math.max(f.top,this.options.position.x+p),this.options.position.y=Math.max(f.left,this.options.position.y+w),y("x"),y("y"),this.wrapper.css(u)),this._fireEvent("onPosition"),this;(t.adjustPosition===!0||t.adjustPosition==="flip")&&(d=function(n){this.wrapper.css(this._getTL(n),u[this._getTL(n)]+(e[this._getXY(n)]+t.offset[this._getXY(n)]*(n=="top"||n=="left"?-2:2)+h[this._getXY(n)])*(n=="top"||n=="left"?1:-1));this.pointer&&this.wrapper.removeClass("jBox-pointerPosition-"+this.pointer.position).addClass("jBox-pointerPosition-"+this._getOpp(this.pointer.position)).css("padding",0).css("padding-"+n,this.pointer.dimensions[this._getXY(n)]);this.pointer&&this.pointer.element.attr("class","jBox-pointer jBox-pointer-"+n);this.positionAdjusted=!0;this.flipped=!0}.bind(this),c.x&&d(this.options.position.x),c.y&&d(this.options.position.y));i=this._getXY(this.outside)=="x"?ft:ut;this.pointer&&t.pointTo=="target"&&t.adjustPosition!="flip"&&this._getXY(i)==this._getOpp(this._getXY(this.outside))&&(g=this.pointer.align=="center"?e[this._getXY(i)]/2-this.pointer.dimensions[this._getOpp(this.pointer.xy)]/2-parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))*(i!=this._getTL(i)?-1:1):i==this.pointer.alignAttribute?parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute)):e[this._getXY(i)]-parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))-this.pointer.dimensions[this._getXY(i)],l=i==this._getTL(i)?f[this._getTL(i)]-u[this._getTL(i)]+t.adjustDistance[i]:(f[this._getOpp(this._getTL(i))]-u[this._getTL(i)]-t.adjustDistance[i]-e[this._getXY(i)])*-1,i==this._getOpp(this._getTL(i))&&u[this._getTL(i)]-l<f[this._getTL(i)]+t.adjustDistance[this._getTL(i)]&&(l-=f[this._getTL(i)]+t.adjustDistance[this._getTL(i)]-(u[this._getTL(i)]-l)),l=Math.min(l,g),l<=g&&l>0&&(this.pointer.element.css("margin-"+this.pointer.alignAttribute,parseInt(this.pointer.element.css("margin-"+this.pointer.alignAttribute))-l*(i!=this.pointer.alignAttribute?-1:1)),this.wrapper.css(this._getTL(i),u[this._getTL(i)]+l*(i!=this._getTL(i)?-1:1)),this.positionAdjusted=!0))}}return this._fireEvent("onPosition"),this},t.prototype.unscroll=function(n){function o(){if(!document.getElementById("unscroll-class-name")){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css";n.setAttribute("id","unscroll-class-name");n.appendChild(document.createTextNode(".unscrollable { overflow: hidden !important; }"));t.appendChild(n)}}var r,i,t,e;if(this.set=function(n,t){window.unscrollStore||(window.unscrollStore={});window.unscrollStore[n]=t},this.get=function(n){return window.unscrollStore?window.unscrollStore[n]:null},this.getScrollbarWidth=function(){var n,t;return this.get("scrollbarWidth")?this.get("scrollbarWidth")+"px":(n=document.createElement("div"),n.style.width="100px",n.style.height="100px",n.style.overflow="scroll",n.style.position="absolute",n.style.top="-10000",document.body.appendChild(n),t=n.offsetWidth-n.clientWidth,document.body.removeChild(n),this.set("scrollbarWidth",t),t+"px")},this.getElementsToAdjust=function(n){var i,t;for(n||(n=[]),typeof n=="string"&&(n=[[n,"padding-right"]]),n.forEach(function(t,i){typeof t=="string"&&(n[i]=[t,"padding-right"])}),i=!1,t=0;t<n.length;t++)n[t][0].indexOf("body")!==-1&&(i=!0);return i===!1&&n.push(["body","padding-right"]),n},this.pageHasScrollbar=function(){return this.getScrollbarWidth()&&document.body.offsetHeight>window.innerHeight},this.pageHasScrollbar())for(n=this.getElementsToAdjust(n),r=0;r<n.length;r++)for(i=document.querySelectorAll(n[r][0]),t=0;t<i.length;t++){if(i[t].getAttribute("data-unscroll"))return;var u=n[r][1],s=window.getComputedStyle(i[t]),f=s.getPropertyValue(u);i[t].setAttribute("data-unscroll",u);f||(f="0px");e=u=="padding-right"||u=="right"?"+":"-";i[t].style[u]="calc("+f+" "+e+" "+this.getScrollbarWidth()+")"}o();document.body.classList.add("unscrollable")},t.prototype.unscroll.reset=function(){for(var i,t=document.querySelectorAll("[data-unscroll]"),n=0;n<t.length;n++)i=t[n].getAttribute("data-unscroll"),t[n].style[i]=null,t[n].removeAttribute("data-unscroll");document.body.classList.remove("unscrollable")},t.prototype.open=function(i){if((i||(i={}),this.isDestroyed)||(this.wrapper||this._create(),this._styles||(this._styles=n("<style/>").append(this._animationCSS).appendTo(n("head"))),this.timer&&clearTimeout(this.timer),this._blockBodyClick(),this.isDisabled))return this;if(this.options.closeOnEsc&&n(document).on("keyup.jBox-"+this.id,function(n){n.keyCode==27&&this.close({ignoreDelay:!0})}.bind(this)),this.options.closeOnClick===!0||this.options.closeOnClick==="body"){n("body").on("click.jBox-"+this.id+" tap.jBox-"+this.id,function(n){this.blockBodyClick||this.options.closeOnClick=="body"&&(n.target==this.wrapper[0]||this.wrapper.has(n.target).length)||this.close({ignoreDelay:!0})}.bind(this));this.isTouchDevice&&n("body > *").on("click.jBox-"+this.id+" tap.jBox-"+this.id,function(){return!0})}var r=function(){this.adjustZIndexOnOpen===!0&&(t.zIndexMax=Math.max(parseInt(this.wrapper.css("zIndex"),10),this.options.zIndex,t.zIndexMax||0,t.zIndexMaxDragover||0)+2,this.wrapper.css("zIndex",t.zIndexMax),this.options.zIndex=t.zIndexMax);this.source&&this.options.getTitle&&this.source.attr(this.options.getTitle)&&this.setTitle(this.source.attr(this.options.getTitle),!0);this.source&&this.options.getContent&&(this.source.data("jBox-getContent")?this.setContent(this.source.data("jBox-getContent"),!0):this.source.attr(this.options.getContent)?this.setContent(this.source.attr(this.options.getContent),!0):this.options.getContent=="html"?this.setContent(this.source.html(),!0):null);this._fireEvent("onOpen");(this.options.ajax&&(this.options.ajax.url||this.source&&this.source.attr(this.options.ajax.getURL))&&(!this.ajaxLoaded||this.options.ajax.reload)||i.ajax&&(i.ajax.url||i.ajax.data))&&(this.options.ajax.reload!="strict"&&this.source&&this.source.data("jBox-ajax-data")&&!(i.ajax&&(i.ajax.url||i.ajax.data))?this.setContent(this.source.data("jBox-ajax-data")):this.ajax(i.ajax||null,!0));(!this.positionedOnOpen||this.options.repositionOnOpen)&&this.position(i)&&(this.positionedOnOpen=!0);this.isClosing&&this._abortAnimation();this.isOpen||(this.isOpen=!0,this.options.autoClose&&(this.options.delayClose=this.options.autoClose)&&this.close(),this._attachEvents(),this.options.blockScroll&&(this.options.blockScrollAdjust?t.blockScrollScopes?t.blockScrollScopes++:(t.blockScrollScopes=1,this.unscroll(Array.isArray(this.options.blockScrollAdjust)||typeof this.options.blockScrollAdjust=="string"?this.options.blockScrollAdjust:null)):n("body").addClass("jBox-blockScroll-"+this.id)),this.options.overlay&&(this._showOverlay(),this.position()),this.options.animation&&!this.isClosing&&this._animate("open"),this.options.audio&&this.options.audio.open&&this.audio(this.options.audio.open,this.options.volume.open),this.options.fade?this.wrapper.stop().animate({opacity:1},{queue:!1,duration:this.options.fade,start:function(){this.isOpening=!0;this.wrapper.css({display:"block"})}.bind(this),complete:function(){this._fireEvent("onOpenComplete")}.bind(this),always:function(){this.isOpening=!1;setTimeout(function(){this.positionOnFadeComplete&&this.position()&&(this.positionOnFadeComplete=!1)}.bind(this),10)}.bind(this)}):(this.wrapper.css({display:"block",opacity:1}),this.positionOnFadeComplete&&this.position()&&(this.positionOnFadeComplete=!1),this._fireEvent("onOpenComplete")))}.bind(this);return this.options.delayOpen&&!this.isOpen&&!this.isClosing&&!i.ignoreDelay?this.timer=setTimeout(r,this.options.delayOpen):r(),this},t.prototype.close=function(i){var u,e;if((i||(i={}),n("body").off("click.jBox-"+this.id+" tap.jBox-"+this.id),this.isTouchDevice&&n("body > *").off("click.jBox-"+this.id+" tap.jBox-"+this.id),this.isDestroyed||this.isClosing)||(this.timer&&clearTimeout(this.timer),this._blockBodyClick(),this.isDisabled))return this;if(u=function(){if(this._fireEvent("onClose"),this.options.cancelAjaxOnClose&&this.cancelAjax(),this.isOpen){this.isOpen=!1;this._detachEvents();this.options.blockScroll&&(this.options.blockScrollAdjust?(t.blockScrollScopes=t.blockScrollScopes?--t.blockScrollScopes:0,t.blockScrollScopes||this.unscroll.reset()):n("body").removeClass("jBox-blockScroll-"+this.id));this.options.overlay&&this._hideOverlay();this.options.animation&&!this.isOpening&&this._animate("close");this.options.audio&&this.options.audio.close&&this.audio(this.options.audio.close,this.options.volume.close);var i=this.isTouchDevice&&this.options.target=="mouse"?0:this.options.fade;i?this.wrapper.stop().animate({opacity:0},{queue:!1,duration:i,start:function(){this.isClosing=!0}.bind(this),complete:function(){this.wrapper.css({display:"none"});this._fireEvent("onCloseComplete")}.bind(this),always:function(){this.isClosing=!1}.bind(this)}):(this.wrapper.css({display:"none",opacity:0}),this._fireEvent("onCloseComplete"))}}.bind(this),i.ignoreDelay||this.isTouchDevice&&this.options.target=="mouse")u();else if((this.options.delayOnHover||this.options.showCountdown)&&this.options.delayClose>10){var r=this,f=this.options.delayClose,o=Date.now();this.options.showCountdown&&!this.inner&&(e=n('<div class="jBox-countdown" />'),this.inner=n('<div class="jBox-countdown-inner" />'),e.prepend(this.inner),n("#"+this.id).append(e));this.countdown=function(){var n=Date.now();r.isHovered||(f-=n-o);o=n;f>0?(r.options.showCountdown&&r.inner.css("width",f*100/r.options.delayClose+"%"),window.requestAnimationFrame(r.countdown)):u()};window.requestAnimationFrame(this.countdown)}else this.timer=setTimeout(u,Math.max(this.options.delayClose,10));return this},t.prototype.toggle=function(n){return this[this.isOpen?"close":"open"](n),this},t.prototype.disable=function(){return this.isDisabled=!0,this},t.prototype.enable=function(){return this.isDisabled=!1,this},t.prototype.hide=function(){return this.disable(),this.wrapper&&(this.cacheWrapperDisplay=this.wrapper.css("display"),this.wrapper.css({display:"none"})),this.overlay&&(this.cacheOverlayDisplay=this.overlay.css("display"),this.overlay.css({display:"none"})),this},t.prototype.show=function(){return this.enable(),this.wrapper&&this.cacheWrapperDisplay&&(this.wrapper.css({display:this.cacheWrapperDisplay}),this.cacheWrapperDisplay=null),this.overlay&&this.cacheOverlayDisplay&&(this.overlay.css({display:this.cacheOverlayDisplay}),this.cacheOverlayDisplay=null),this},t.prototype.ajax=function(t,i){var u;t||(t={});n.each([["getData","data"],["getURL","url"]],function(n,i){this.options.ajax[i[0]]&&!t[i[1]]&&this.source&&this.source.attr(this.options.ajax[i[0]])!=undefined&&(t[i[1]]=this.source.attr(this.options.ajax[i[0]])||"")}.bind(this));u=n.extend(!0,{},this.options.ajax);this.cancelAjax();var f=t.beforeSend||u.beforeSend||function(){},e=t.complete||u.complete||function(){},o=t.success||u.success||function(){},s=t.error||u.error||function(){},r=n.extend(!0,u,t);return r.beforeSend=function(t){r.loadingClass&&this.wrapper.addClass(r.loadingClass===!0?"jBox-loading":r.loadingClass);r.spinner&&(this.spinnerDelay=setTimeout(function(){this.wrapper.addClass("jBox-loading-spinner");r.spinnerReposition&&(i?this.positionOnFadeComplete=!0:this.position());this.spinner=n(r.spinner!==!0?r.spinner:'<div class="jBox-spinner"><\/div>').appendTo(this.container);this.titleContainer&&this.spinner.css("position")=="absolute"&&this.spinner.css({transform:"translateY("+this.titleContainer.outerHeight()*.5+"px)"})}.bind(this),this.content.html()==""?0:r.spinnerDelay||0));f.bind(this)(t)}.bind(this),r.complete=function(n){this.spinnerDelay&&clearTimeout(this.spinnerDelay);this.wrapper.removeClass("jBox-loading jBox-loading-spinner jBox-loading-spinner-delay");this.spinner&&this.spinner.length&&this.spinner.remove()&&r.spinnerReposition&&(i?this.positionOnFadeComplete=!0:this.position());this.ajaxLoaded=!0;e.bind(this)(n)}.bind(this),r.success=function(n){r.setContent&&this.setContent(n,!0)&&(i?this.positionOnFadeComplete=!0:this.position());r.setContent&&this.source&&this.source.data("jBox-ajax-data",n);o.bind(this)(n)}.bind(this),r.error=function(n){s.bind(this)(n)}.bind(this),this.ajaxRequest=n.ajax(r),this},t.prototype.cancelAjax=function(){this.ajaxRequest&&(this.ajaxRequest.abort(),this.ajaxLoaded=!1)},t.prototype.audio=function(i,r){if(!i)return this;if(t._audio||(t._audio={}),!t._audio[i]){var u=n("<audio/>");n("<source/>",{src:i+".mp3"}).appendTo(u);n("<source/>",{src:i+".ogg"}).appendTo(u);t._audio[i]=u[0]}t._audio[i].volume=Math.min((r!=undefined?r:100)/100,1);try{t._audio[i].pause();t._audio[i].currentTime=0}catch(f){}return t._audio[i].play(),this},t._animationSpeeds={tada:1e3,tadaSmall:1e3,flash:500,shake:400,pulseUp:250,pulseDown:250,popIn:250,popOut:250,fadeIn:200,fadeOut:200,slideUp:400,slideRight:400,slideLeft:400,slideDown:400},t.prototype.animate=function(n,i){i||(i={});this.animationTimeout||(this.animationTimeout={});i.element||(i.element=this.wrapper);i.element.data("jBox-animating-id")||i.element.data("jBox-animating-id",t._getUniqueElementID());i.element.data("jBox-animating")&&(i.element.removeClass(i.element.data("jBox-animating")).data("jBox-animating",null),this.animationTimeout[i.element.data("jBox-animating-id")]&&clearTimeout(this.animationTimeout[i.element.data("jBox-animating-id")]));i.element.addClass("jBox-animated-"+n).data("jBox-animating","jBox-animated-"+n);this.animationTimeout[i.element.data("jBox-animating-id")]=setTimeout(function(){i.element.removeClass(i.element.data("jBox-animating")).data("jBox-animating",null);i.complete&&i.complete()},t._animationSpeeds[n])},t.prototype.swipeDetector=function(t,i){function h(n){(!i.useOnlyTouch||n.originalEvent.touches)&&(n.originalEvent.touches&&(n=n.originalEvent.touches[0]),r===0&&(r=1,e=n.clientX,o=n.clientY))}function c(){r===2&&(r=0,Math.abs(u)>Math.abs(f)&&Math.abs(u)>i.swipeThreshold?u<0?t.trigger(n.Event("swipeLeft.sd")):t.trigger(n.Event("swipeRight.sd")):Math.abs(f)>i.swipeThreshold&&(f<0?t.trigger(n.Event("swipeUp.sd")):t.trigger(n.Event("swipeDown.sd"))))}function l(n){if(r===1){n.originalEvent.touches&&(n=n.originalEvent.touches[0]);var t=n.clientX-e,s=n.clientY-o;(Math.abs(t)>i.swipeThreshold||Math.abs(s)>i.swipeThreshold)&&(r=2,u=t,f=s)}}var r=0,e=0,o=0,u=0,f=0,s={swipeThreshold:70,useOnlyTouch:!1};return function(){i=n.extend(s,i);t.on("mousedown touchstart",h);n("html").on("mouseup touchend",c);n("html").on("mousemove touchmove",l)}(),t},t.prototype.destroy=function(){return this.detach(),this.isOpen&&this.close({ignoreDelay:!0}),this.wrapper&&this.wrapper.remove(),this.overlay&&this.overlay.remove(),this._styles&&this._styles.remove(),this.isDestroyed=!0,this},t._getUniqueID=function(){var n=1;return function(){return n++}}(),t._getUniqueElementID=function(){var n=1;return function(){return n++}}(),t._pluginOptions={},t.plugin=function(n,i){t._pluginOptions[n]=i},n.fn.jBox=function(i,r){return i||(i={}),r||(r={}),new t(i,n.extend(r,{attach:this}))},t}var SMSLink;(function(n,t){if(n.__oc_flags_ImprovedBreakpointEventHandling){var e={onSizeChange:function(n){u.push(n);i!==null&&n(i.name,null)}},r=[],u=[],i=null,o=function(t,i){function e(){r=null;t.apply(f,u)}var u=[],f,r;return function(){n.clearTimeout(r);r=n.setTimeout(e,i)}},f=o(function(){for(var u,n=null,t=0;t<r.length;t++)if(u=r[t],u.media.matches)n=u;else break;i!==n&&(s(n,i),i=n)},10),s=function(n,i){for(var o,s,f=t.documentElement,e="breakpoint-",r=0;r<u.length;r++)o=n===null?null:n.name,s=i===null?null:i.name,u[r](o,s);i!==null&&f.classList.remove(e+i.name);n!==null&&f.classList.add(e+n.name)},h=function(t){for(var u,i=0;i<t.length;i++)u=t[i],r.push({min:u.min,media:n.matchMedia("(min-width: "+u.min+"px)"),name:u.name});r.sort(function(n,t){return n.min-t.min});n.addEventListener("resize",f);f();n.ocSizePoint=e;n.__ocSizePoints=t};h(n.__ocSizePoints||[{min:0,name:"ocsp-4"},{min:480,name:"ocsp-3"},{min:768,name:"ocsp-2"},{min:992,name:"ocsp-1"}])}})(this,this.document),function(n,t){if(!n.__oc_flags_ImprovedBreakpointEventHandling){var i={breakpoints:{},_namedEvents:{},_eventMatchCache:{},_globalEvents:[],onBreakpointChange:function(){var n=Array.prototype.slice.call(arguments),t=n.pop(),u=n.pop();typeof u=="undefined"?i._globalEvents.push(t):(i._namedEvents[u]=[]).push(t);r()}},u=function(i){/in/.test(t.readyState)?n.setTimeout(function(){u(i)},9):i()},o=function(n,i,r){t.addEventListener?n.addEventListener(i,r):n.attachEvent("on"+i,r)},s=function(t,i){function e(){r=null;t.apply(f,u)}var u=[],f,r;return function(){n.clearTimeout(r);r=n.setTimeout(e,i)}},f=function(n,t){return n.className.split(" ").indexOf(t)!==-1},h=function(n,t){var i=n.className.split(" "),r=i.indexOf(t);f(n,t)&&(i.splice(r,1),n.className=i.join(" "))},c=function(n,t){f(n,t)||(n.className=n.className!==""?n.className+" "+t:t)},l=function(n,i){var r="breakpoint-"+i,u=t.documentElement;n?c(u,r):h(u,r)},a=function(n,i){var u,r,f,e;if(n)for(u=t.getElementsByTagName("img"),r=0;r<u.length;r++)f=u[r],e=f.getAttribute("data-mq-src"),e&&(f.src=e.replace("[breakpoint]",i))},r=function(){var t,s,r,u,e,f,o;for(t in i.breakpoints){if(s=i.breakpoints[t],r=n.matchMedia(s).matches,i._namedEvents[t]&&i._eventMatchCache[t]!==r)for(u=0;u<i._namedEvents[t].length;u++)e=i._namedEvents[t][u],i._eventMatchCache[t]=r,typeof e=="function"&&e(r);if(r)for(f=0;f<i._globalEvents.length;f++)o=i._globalEvents[f],typeof o=="function"&&o();l(r,t);a(r,t)}},e=function(){var u,r,f,e;if(typeof n.__metaQueryBreakpoints=="object"){for(r in n.__metaQueryBreakpoints)n.__metaQueryBreakpoints.hasOwnProperty(r)&&(i.breakpoints[r]=n.__metaQueryBreakpoints[r]);return}for(u=t.getElementsByTagName("meta"),r=0;r<u.length;r++)u[r].name==="breakpoint"&&(f=u[r].getAttribute("content"),e=u[r].getAttribute("media"),i.breakpoints[f]=e)},v=function(){e();r()},y=function(){e();o(n,"resize",s(function(){r()},10));r()};n.metaQuery=i;v();u(y)}}(this,this.document);
/*!
 * hoverIntent v1.10.2 // 2020.04.28 // jQuery v1.7.0+
 * http://briancherne.github.io/jquery-hoverIntent/
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007-2019 Brian Cherne
 */
(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof module=="object"&&module.exports?module.exports=n(require("jquery")):jQuery&&!jQuery.fn.hoverIntent&&n(jQuery)})(function(n){"use strict";var e={interval:100,sensitivity:6,timeout:0},o=0,t,i,r=function(n){t=n.pageX;i=n.pageY},u=function(n,f,e,o){if(Math.sqrt((e.pX-t)*(e.pX-t)+(e.pY-i)*(e.pY-i))<o.sensitivity)return f.off(e.event,r),delete e.timeoutId,e.isActive=!0,n.pageX=t,n.pageY=i,delete e.pX,delete e.pY,o.over.apply(f[0],[n]);e.pX=t;e.pY=i;e.timeoutId=setTimeout(function(){u(n,f,e,o)},o.interval)},s=function(n,t,i,r){var u=t.data("hoverIntent");return u&&delete u[i.id],r.apply(t[0],[n])},f=function(n){return typeof n=="function"};n.fn.hoverIntent=function(t,i,h){var l=o++,c=n.extend({},e),a;n.isPlainObject(t)?(c=n.extend(c,t),f(c.out)||(c.out=c.over)):c=f(i)?n.extend(c,{over:t,out:i,selector:h}):n.extend(c,{over:t,out:t,selector:i});a=function(t){var e=n.extend({},t),f=n(this),o=f.data("hoverIntent"),i,h;if(o||f.data("hoverIntent",o={}),i=o[l],i||(o[l]=i={id:l}),i.timeoutId&&(i.timeoutId=clearTimeout(i.timeoutId)),h=i.event="mousemove.hoverIntent.hoverIntent"+l,t.type==="mouseenter"){if(i.isActive)return;i.pX=e.pageX;i.pY=e.pageY;f.off(h,r).on(h,r);i.timeoutId=setTimeout(function(){u(e,f,i,c)},c.interval)}else{if(!i.isActive)return;f.off(h,r);i.timeoutId=setTimeout(function(){s(e,f,i,c.out)},c.timeout)}};return this.on({"mouseenter.hoverIntent":a,"mouseleave.hoverIntent":a},c.selector)}}),function(n,t){"use strict";var i=function(){var i={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",menuArrowClass:"sf-arrows"},o=function(){var t=/^(?![\w\W]*Windows Phone)[\w\W]*(iPhone|iPad|iPod)/i.test(navigator.userAgent);if(t)n("html").css("cursor","pointer").on("click",n.noop);return t}(),a=function(){var n=document.documentElement.style;return"behavior"in n&&"fill"in n&&/iemobile/i.test(navigator.userAgent)}(),v=function(){return!!t.PointerEvent}(),s=function(n,t,r){var u=i.menuClass,f;t.cssArrows&&(u+=" "+i.menuArrowClass);f=r?"addClass":"removeClass";n[f](u)},y=function(t,r){return t.find("li."+r.pathClass).slice(0,r.pathLevels).addClass(r.hoverClass+" "+i.bcClass).filter(function(){return n(this).children(r.popUpSelector).hide().show().length}).removeClass(r.pathClass)},h=function(n,t){var r=t?"addClass":"removeClass";n.children("a")[r](i.anchorClass)},c=function(n){var i=n.css("ms-touch-action"),t=n.css("touch-action");t=t||i;t=t==="pan-y"?"auto":"pan-y";n.css({"ms-touch-action":t,"touch-action":t})},f=function(n){return n.closest("."+i.menuClass)},r=function(n){return f(n).data("sfOptions")},u=function(){var t=n(this),i=r(t);clearTimeout(i.sfTimer);t.siblings().superfish("hide").end();t.is(":hover")&&t.superfish("show")},l=function(t){t.retainPath=n.inArray(this[0],t.$path)>-1;this.superfish("hide");this.parents("."+t.hoverClass).length||(t.onIdle.call(f(this)),t.$path.length&&n.proxy(u,t.$path)())},e=function(){var i=n(this),t=r(i);o?n.proxy(l,i,t)():(clearTimeout(t.sfTimer),t.sfTimer=window.setTimeout(function(){n.proxy(l,i,t)()},t.delay))},p=function(t){var i=n(this),s=f(i),o,e;if(!s.hasClass("sf-mobile")){if(o=r(i),e=i.siblings(t.data.popUpSelector),o.onHandleTouch.call(e)===!1)return this;if(e.length>0&&e.is(":hidden")){i.one("click.superfish",!1);t.type==="MSPointerDown"||t.type==="pointerdown"?i.trigger("focus"):n.proxy(u,i.parent("li"))()}}},w=function(t,i){var f="li:has("+i.popUpSelector+")",r;if(n.fn.hoverIntent&&!i.disableHI)t.hoverIntent(u,e,f);else t.on("mouseenter.superfish",f,u).on("mouseleave.superfish",f,e);r="MSPointerDown.superfish";v&&(r="pointerdown.superfish");o||(r+=" touchend.superfish");a&&(r+=" mousedown.superfish");t.on("focusin.superfish","li",u).on("focusout.superfish","li",e).on(r,"a",i,p)};return{hide:function(t){var u,i;if(this.length){if(u=this,i=r(u),!i)return this;var o=i.retainPath===!0?i.$path:"",f=u.find("li."+i.hoverClass).add(this).not(o).removeClass(i.hoverClass).children(i.popUpSelector),e=i.speedOut;if(t&&(f.show(),e=0),i.retainPath=!1,i.onBeforeHide.call(f)===!1)return this;f.stop(!0,!0).animate(i.animationOut,e,function(){var t=n(this);i.onHide.call(t)})}return this},show:function(){var n=r(this),i,t;return n?(i=this.addClass(n.hoverClass),t=i.children(n.popUpSelector),n.onBeforeShow.call(t)===!1)?this:(t.stop(!0,!0).animate(n.animation,n.speed,function(){n.onShow.call(t)}),this):this},destroy:function(){return this.each(function(){var r=n(this),t=r.data("sfOptions"),u;if(!t)return!1;u=r.find(t.popUpSelector).parent("li");clearTimeout(t.sfTimer);s(r,t);h(u);c(r);r.off(".superfish").off(".hoverIntent");u.children(t.popUpSelector).attr("style",function(n,t){if(typeof t!="undefined")return t.replace(/display[^;]+;?/g,"")});t.$path.removeClass(t.hoverClass+" "+i.bcClass).addClass(t.pathClass);r.find("."+t.hoverClass).removeClass(t.hoverClass);t.onDestroy.call(r);r.removeData("sfOptions")})},init:function(t){return this.each(function(){var u=n(this),r,f;if(u.data("sfOptions"))return!1;r=n.extend({},n.fn.superfish.defaults,t);f=u.find(r.popUpSelector).parent("li");r.$path=y(u,r);u.data("sfOptions",r);s(u,r,!0);h(f,!0);c(u);w(u,r);f.not("."+i.bcClass).superfish("hide",!0);r.onInit.call(this)})}}}();n.fn.superfish=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):typeof t!="object"&&t?n.error("Method "+t+" does not exist on jQuery.fn.superfish"):i.init.apply(this,arguments)};n.fn.superfish.defaults={popUpSelector:"ul,.sf-mega",hoverClass:"sfHover",pathClass:"overrideThisToUse",pathLevels:1,delay:800,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:"normal",speedOut:"fast",cssArrows:!0,disableHI:!1,onInit:n.noop,onBeforeShow:n.noop,onShow:n.noop,onBeforeHide:n.noop,onHide:n.noop,onIdle:n.noop,onDestroy:n.noop,onHandleTouch:n.noop}}(jQuery,window),function(n){var t={init:function(i){var r=n.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:0,useAnchors:!0,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",ellipsePageSet:!0,cssStyle:"light-theme",listStyle:"",labelMap:[],selectOnClick:!0,nextAtFront:!1,invertPageOrder:!1,useStartEdge:!0,useEndEdge:!0,onPageClick:function(){},onInit:function(){}},i||{}),u=this;return r.pages=r.pages?r.pages:Math.ceil(r.items/r.itemsOnPage)?Math.ceil(r.items/r.itemsOnPage):1,r.currentPage=r.currentPage?r.currentPage-1:r.invertPageOrder?r.pages-1:0,r.halfDisplayed=r.displayedPages/2,this.each(function(){u.addClass(r.cssStyle+" simple-pagination").data("pagination",r);t._draw.call(u)}),r.onInit(),this},selectPage:function(n){return t._selectPage.call(this,n-1),this},prevPage:function(){var n=this.data("pagination");return n.invertPageOrder?n.currentPage<n.pages-1&&t._selectPage.call(this,n.currentPage+1):n.currentPage>0&&t._selectPage.call(this,n.currentPage-1),this},nextPage:function(){var n=this.data("pagination");return n.invertPageOrder?n.currentPage>0&&t._selectPage.call(this,n.currentPage-1):n.currentPage<n.pages-1&&t._selectPage.call(this,n.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},setPagesCount:function(n){this.data("pagination").pages=n},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},drawPage:function(n){var i=this.data("pagination");return i.currentPage=n-1,this.data("pagination",i),t._draw.call(this),this},redraw:function(){return t._draw.call(this),this},disable:function(){var n=this.data("pagination");return n.disabled=!0,this.data("pagination",n),t._draw.call(this),this},enable:function(){var n=this.data("pagination");return n.disabled=!1,this.data("pagination",n),t._draw.call(this),this},updateItems:function(n){var i=this.data("pagination");i.items=n;i.pages=t._getPages(i);this.data("pagination",i);t._draw.call(this)},updateItemsOnPage:function(n){var i=this.data("pagination");return i.itemsOnPage=n,i.pages=t._getPages(i),this.data("pagination",i),t._selectPage.call(this,0),this},getItemsOnPage:function(){return this.data("pagination").itemsOnPage},_draw:function(){var i=this.data("pagination"),r=t._getInterval(i),u,s,f,o,e;if(t.destroy.call(this),s=typeof this.prop=="function"?this.prop("tagName"):this.attr("tagName"),f=s==="UL"?this:n("<ul"+(i.listStyle?' class="'+i.listStyle+'"':"")+"><\/ul>").appendTo(this),i.prevText&&t._appendItem.call(this,i.invertPageOrder?i.currentPage+1:i.currentPage-1,{text:i.prevText,classes:"prev"}),i.nextText&&i.nextAtFront&&t._appendItem.call(this,i.invertPageOrder?i.currentPage-1:i.currentPage+1,{text:i.nextText,classes:"next"}),i.invertPageOrder){if(r.end<i.pages&&i.edges>0){if(i.useStartEdge)for(o=Math.max(i.pages-i.edges,r.end),u=i.pages-1;u>=o;u--)t._appendItem.call(this,u);i.pages-i.edges>r.end&&i.pages-i.edges-r.end!=1?f.append('<li class="disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):i.pages-i.edges-r.end==1&&t._appendItem.call(this,r.end)}}else if(r.start>0&&i.edges>0){if(i.useStartEdge)for(e=Math.min(i.edges,r.start),u=0;u<e;u++)t._appendItem.call(this,u);i.edges<r.start&&r.start-i.edges!=1?f.append('<li class="disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):r.start-i.edges==1&&t._appendItem.call(this,i.edges)}if(i.invertPageOrder)for(u=r.end-1;u>=r.start;u--)t._appendItem.call(this,u);else for(u=r.start;u<r.end;u++)t._appendItem.call(this,u);if(i.invertPageOrder){if(r.start>0&&i.edges>0&&(i.edges<r.start&&r.start-i.edges!=1?f.append('<li class="disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):r.start-i.edges==1&&t._appendItem.call(this,i.edges),i.useEndEdge))for(e=Math.min(i.edges,r.start),u=e-1;u>=0;u--)t._appendItem.call(this,u)}else if(r.end<i.pages&&i.edges>0&&(i.pages-i.edges>r.end&&i.pages-i.edges-r.end!=1?f.append('<li class="disabled"><span class="ellipse">'+i.ellipseText+"<\/span><\/li>"):i.pages-i.edges-r.end==1&&t._appendItem.call(this,r.end),i.useEndEdge))for(o=Math.max(i.pages-i.edges,r.end),u=o;u<i.pages;u++)t._appendItem.call(this,u);i.nextText&&!i.nextAtFront&&t._appendItem.call(this,i.invertPageOrder?i.currentPage-1:i.currentPage+1,{text:i.nextText,classes:"next"});i.ellipsePageSet&&!i.disabled&&t._ellipseClick.call(this,f)},_getPages:function(n){var t=Math.ceil(n.items/n.itemsOnPage);return t||1},_getInterval:function(n){return{start:Math.ceil(n.currentPage>n.halfDisplayed?Math.max(Math.min(n.currentPage-n.halfDisplayed,n.pages-n.displayedPages),0):0),end:Math.ceil(n.currentPage>n.halfDisplayed?Math.min(n.currentPage+n.halfDisplayed,n.pages):Math.min(n.displayedPages,n.pages))}},_appendItem:function(i,r){var s=this,u,e,f=s.data("pagination"),o=n("<li><\/li>"),h=s.find("ul");if(i=i<0?0:i<f.pages?i:f.pages-1,u={text:i+1,classes:""},f.labelMap.length&&f.labelMap[i]&&(u.text=f.labelMap[i]),u=n.extend(u,r||{}),i==f.currentPage||f.disabled)f.disabled||u.classes==="prev"||u.classes==="next"?o.addClass("disabled"):o.addClass("active"),e=n('<span class="current">'+u.text+"<\/span>");else{e=f.useAnchors?n('<a href="'+f.hrefTextPrefix+(i+1)+f.hrefTextSuffix+'" class="page-link">'+u.text+"<\/a>"):n("<span >"+u.text+"<\/span>");e.on("click",function(n){return t._selectPage.call(s,i,n)})}u.classes&&e.addClass(u.classes);o.append(e);h.length?h.append(o):s.append(o)},_selectPage:function(n,i){var r=this.data("pagination");r.currentPage=n;r.selectOnClick&&t._draw.call(this);return r.onPageClick(n+1,i)},_ellipseClick:function(i){var f=this,r=this.data("pagination"),u=i.find(".ellipse");u.addClass("clickable").parent().removeClass("disabled");u.on("click",function(){if(!r.disable){var i=n(this),e=(parseInt(i.parent().prev().text(),10)||0)+1;i.html('<input type="number" min="1" max="'+r.pages+'" step="1" value="'+e+'">').find("input").trigger("focus").on("click",function(n){n.stopPropagation()}).on("keyup",function(i){var e=n(this).val();i.which===13&&e!==""?e>0&&e<=r.pages&&t._selectPage.call(f,e-1):i.which===27&&u.empty().html(r.ellipseText)}).on("blur",function(){var i=n(this).val();return i!==""&&t._selectPage.call(f,i-1),u.empty().html(r.ellipseText),!1})}return!1})}};n.fn.pagination=function(i){if(t[i]&&i.charAt(0)!="_")return t[i].apply(this,Array.prototype.slice.call(arguments,1));if(typeof i!="object"&&i)n.error("Method "+i+" does not exist on jQuery.pagination");else return t.init.apply(this,arguments)}}(jQuery),function(n){n.fn.stickySidebar=function(t){var r=n(this),i,u;return r.length===0?this:(i=n.extend({contentSelector:"#content",sidebarTopMargin:"auto",mainContainer:"#content-container"},t),i.mainContainerElement=n(this).closest(i.mainContainer),i.mainContainerElement.length===0&&(i.mainContainerElement=n(this).parent()),i.sidebarTopMargin==="auto"&&(i.sidebarTopMargin=r.offset().top-i.mainContainerElement.offset().top),u=function(){var t=n(this),c=n(window).height(),r=t.outerHeight(),f=n(i.contentSelector).outerHeight(),u=n(window).scrollTop(),e=i.mainContainerElement.offset().top,o=e+f-r,s=u>=e,l=u>=o,a=f>r,v=c>r+i.sidebarTopMargin,h;s&&a&&v?(s&&!l?t.css("top",i.sidebarTopMargin):(h=o-u+i.sidebarTopMargin,t.css("top",h)),t.addClass("sticky")):t.removeClass("sticky")},this.each(function(){var i=n(this),t;if(i.data("stickySidebar-bound")!==!0){t=n.proxy(u,this);n(window).on("scroll",t);n(window).on("resize",t);i.on("stickySidebar-redraw",t);t();i.data("stickySidebar-bound",!0)}}))}}(jQuery),function(n,t,i){function h(t,i){this.bodyOverflowX;this.callbacks={hide:[],show:[]};this.checkInterval=null;this.Content;this.$el=n(t);this.$elProxy;this.elProxyPosition;this.enabled=!0;this.options=n.extend({},f,i);this.mouseIsOverProxy=!1;this.namespace="tooltipster-"+Math.round(Math.random()*1e5);this.Status="hidden";this.timerHide=null;this.timerShow=null;this.$tooltip;this.options.iconTheme=this.options.iconTheme.replace(".","");this.options.theme=this.options.theme.replace(".","");this._init()}function e(t,i){var r=!0;return n.each(t,function(n){if(typeof i[n]=="undefined"||t[n]!==i[n])return r=!1,!1}),r}function s(){return!o&&r}function u(){var u=i.body||i.documentElement,r=u.style,n="transition",t;if(typeof r[n]=="string")return!0;for(v=["Moz","Webkit","Khtml","O","ms"],n=n.charAt(0).toUpperCase()+n.substr(1),t=0;t<v.length;t++)if(typeof r[v[t]+n]=="string")return!0;return!1}var f={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(){},functionBefore:function(n,t){t()},functionReady:function(){},functionAfter:function(){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(){this.option("trigger")=="hover"&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0},r,o;h.prototype={_init:function(){var t=this,u,f;if(i.querySelector)if(u=null,t.$el.data("tooltipster-initialTitle")===undefined&&(u=t.$el.attr("title"),u===undefined&&(u=null),t.$el.data("tooltipster-initialTitle",u)),t.options.content!==null?t._content_set(t.options.content):t._content_set(u),f=t.options.functionInit.call(t.$el,t.$el,t.Content),typeof f!="undefined"&&t._content_set(f),t.$el.removeAttr("title").addClass("tooltipstered"),!r&&t.options.iconDesktop||r&&t.options.iconTouch?(typeof t.options.icon=="string"?(t.$elProxy=n('<span class="'+t.options.iconTheme+'"><\/span>'),t.$elProxy.text(t.options.icon)):t.$elProxy=t.options.iconCloning?t.options.icon.clone(!0):t.options.icon,t.$elProxy.insertAfter(t.$el)):t.$elProxy=t.$el,t.options.trigger=="hover"){t.$elProxy.on("mouseenter."+t.namespace,function(){(!s()||t.options.touchDevices)&&(t.mouseIsOverProxy=!0,t._show())}).on("mouseleave."+t.namespace,function(){(!s()||t.options.touchDevices)&&(t.mouseIsOverProxy=!1)});if(r&&t.options.touchDevices)t.$elProxy.on("touchstart."+t.namespace,function(){t._showNow()})}else if(t.options.trigger=="click")t.$elProxy.on("click."+t.namespace,function(){(!s()||t.options.touchDevices)&&t._show()})},_show:function(){var n=this;n.Status!="shown"&&n.Status!="appearing"&&(n.options.delay?n.timerShow=setTimeout(function(){(n.options.trigger=="click"||n.options.trigger=="hover"&&n.mouseIsOverProxy)&&n._showNow()},n.options.delay):n._showNow())},_showNow:function(i){var f=this;f.options.functionBefore.call(f.$el,f.$el,function(){var e,s,o;if(f.enabled&&f.Content!==null){if(i&&f.callbacks.show.push(i),f.callbacks.hide=[],clearTimeout(f.timerShow),f.timerShow=null,clearTimeout(f.timerHide),f.timerHide=null,f.options.onlyOne&&n(".tooltipstered").not(f.$el).each(function(t,i){var r=n(i),u=r.data("tooltipster-ns");n.each(u,function(n,t){var i=r.data(t),u=i.status(),f=i.option("autoClose");u!=="hidden"&&u!=="disappearing"&&f&&i.hide()})}),e=function(){f.Status="shown";n.each(f.callbacks.show,function(n,t){t.call(f.$el)});f.callbacks.show=[]},f.Status!=="hidden")s=0,f.Status==="disappearing"?(f.Status="appearing",u()?(f.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+f.options.animation+"-show"),f.options.speed>0&&f.$tooltip.delay(f.options.speed),f.$tooltip.queue(e)):f.$tooltip.stop().fadeIn(e)):f.Status==="shown"&&e();else{f.Status="appearing";s=f.options.speed;f.bodyOverflowX=n("body").css("overflow-x");n("body").css("overflow-x","hidden");var h="tooltipster-"+f.options.animation,c="-webkit-transition-duration: "+f.options.speed+"ms; -webkit-animation-duration: "+f.options.speed+"ms; -moz-transition-duration: "+f.options.speed+"ms; -moz-animation-duration: "+f.options.speed+"ms; -o-transition-duration: "+f.options.speed+"ms; -o-animation-duration: "+f.options.speed+"ms; -ms-transition-duration: "+f.options.speed+"ms; -ms-animation-duration: "+f.options.speed+"ms; transition-duration: "+f.options.speed+"ms; animation-duration: "+f.options.speed+"ms;",l=f.options.minWidth?"min-width:"+Math.round(f.options.minWidth)+"px;":"",a=f.options.maxWidth?"max-width:"+Math.round(f.options.maxWidth)+"px;":"",v=f.options.interactive?"pointer-events: auto;":"";f.$tooltip=n('<div class="tooltipster-base '+f.options.theme+'" style="'+l+" "+a+" "+v+" "+c+'"><div class="tooltipster-content"><\/div><\/div>');u()&&f.$tooltip.addClass(h);f._content_insert();f.$tooltip.appendTo("body");f.reposition();f.options.functionReady.call(f.$el,f.$el,f.$tooltip);u()?(f.$tooltip.addClass(h+"-show"),f.options.speed>0&&f.$tooltip.delay(f.options.speed),f.$tooltip.queue(e)):f.$tooltip.css("display","none").fadeIn(f.options.speed,e);f._interval_set();n(t).on("scroll."+f.namespace+" resize."+f.namespace,function(){f.reposition()});if(f.options.autoClose)if(n("body").off("."+f.namespace),f.options.trigger=="hover"){if(r&&setTimeout(function(){n("body").on("touchstart."+f.namespace,function(){f.hide()})},0),f.options.interactive){if(r)f.$tooltip.on("touchstart."+f.namespace,function(n){n.stopPropagation()});o=null;f.$elProxy.add(f.$tooltip).on("mouseleave."+f.namespace+"-autoClose",function(){clearTimeout(o);o=setTimeout(function(){f.hide()},f.options.interactiveTolerance)}).on("mouseenter."+f.namespace+"-autoClose",function(){clearTimeout(o)})}else f.$elProxy.on("mouseleave."+f.namespace+"-autoClose",function(){f.hide()});if(f.options.hideOnClick)f.$elProxy.on("click."+f.namespace+"-autoClose",function(){f.hide()})}else if(f.options.trigger=="click"&&(setTimeout(function(){n("body").on("click."+f.namespace+" touchstart."+f.namespace,function(){f.hide()})},0),f.options.interactive))f.$tooltip.on("click."+f.namespace+" touchstart."+f.namespace,function(n){n.stopPropagation()})}f.options.timer>0&&(f.timerHide=setTimeout(function(){f.timerHide=null;f.hide()},f.options.timer+s))}})},_interval_set:function(){var t=this;t.checkInterval=setInterval(function(){if(n("body").find(t.$el).length===0||n("body").find(t.$elProxy).length===0||t.Status=="hidden"||n("body").find(t.$tooltip).length===0)(t.Status=="shown"||t.Status=="appearing")&&t.hide(),t._interval_cancel();else if(t.options.positionTracker){var i=t._repositionInfo(t.$elProxy),r=!1;e(i.dimension,t.elProxyPosition.dimension)&&(t.$elProxy.css("position")==="fixed"?e(i.position,t.elProxyPosition.position)&&(r=!0):e(i.offset,t.elProxyPosition.offset)&&(r=!0));r||(t.reposition(),t.options.positionTrackerCallback.call(t,t.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval);this.checkInterval=null},_content_set:function(n){typeof n=="object"&&n!==null&&this.options.contentCloning&&(n=n.clone(!0));this.Content=n},_content_insert:function(){var n=this,t=this.$tooltip.find(".tooltipster-content");typeof n.Content!="string"||n.options.contentAsHTML?t.empty().append(n.Content):t.text(n.Content)},_update:function(n){var t=this;t._content_set(n);t.Content!==null?t.Status!=="hidden"&&(t._content_insert(),t.reposition(),t.options.updateAnimation&&(u()?(t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){t.Status!="hidden"&&(t.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){t.Status!=="hidden"&&t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})},t.options.speed))},t.options.speed)):t.$tooltip.fadeTo(t.options.speed,.5,function(){t.Status!="hidden"&&t.$tooltip.fadeTo(t.options.speed,1)}))):t.hide()},_repositionInfo:function(n){return{dimension:{height:n.outerHeight(!1),width:n.outerWidth(!1)},offset:n.offset(),position:{left:parseInt(n.css("left")),top:parseInt(n.css("top"))}}},hide:function(i){var r=this,f,e;return i&&r.callbacks.hide.push(i),r.callbacks.show=[],clearTimeout(r.timerShow),r.timerShow=null,clearTimeout(r.timerHide),r.timerHide=null,f=function(){n.each(r.callbacks.hide,function(n,t){t.call(r.$el)});r.callbacks.hide=[]},r.Status=="shown"||r.Status=="appearing"?(r.Status="disappearing",e=function(){r.Status="hidden";typeof r.Content=="object"&&r.Content!==null&&r.Content.detach();r.$tooltip.remove();r.$tooltip=null;n(t).off("."+r.namespace);n("body").off("."+r.namespace).css("overflow-x",r.bodyOverflowX);n("body").off("."+r.namespace);r.$elProxy.off("."+r.namespace+"-autoClose");r.options.functionAfter.call(r.$el,r.$el);f()},u()?(r.$tooltip.clearQueue().removeClass("tooltipster-"+r.options.animation+"-show").addClass("tooltipster-dying"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(e)):r.$tooltip.stop().fadeOut(r.options.speed,e)):r.Status=="hidden"&&f(),r},show:function(n){return this._showNow(n),this},update:function(n){return this.content(n)},content:function(n){return typeof n=="undefined"?this.Content:(this._update(n),this)},reposition:function(){var r=this,k,y,vt,p,ut,ft,w,dt,a,nt,kt,tt,gt,ni;if(n("body").find(r.$tooltip).length!==0){r.$tooltip.css("width","");r.elProxyPosition=r._repositionInfo(r.$elProxy);var o=null,b=n(t).width(),i=r.elProxyPosition,e=r.$tooltip.outerWidth(!1),ui=r.$tooltip.innerWidth()+1,c=r.$tooltip.outerHeight(!1);if(r.$elProxy.is("area")){var yt=r.$elProxy.attr("shape"),ti=r.$elProxy.parent().attr("name"),et=n('img[usemap="#'+ti+'"]'),ot=et.offset().left,st=et.offset().top,v=r.$elProxy.attr("coords")!==undefined?r.$elProxy.attr("coords").split(","):undefined;if(yt=="circle"){var pt=parseInt(v[0]),wt=parseInt(v[1]),ht=parseInt(v[2]);i.dimension.height=ht*2;i.dimension.width=ht*2;i.offset.top=st+wt-ht;i.offset.left=ot+pt-ht}else if(yt=="rect"){var pt=parseInt(v[0]),wt=parseInt(v[1]),ii=parseInt(v[2]),ri=parseInt(v[3]);i.dimension.height=ri-wt;i.dimension.width=ii-pt;i.offset.top=st+wt;i.offset.left=ot+pt}else if(yt=="poly"){var it=0,rt=0,ct=0,lt=0,bt="even";for(k=0;k<v.length;k++)y=parseInt(v[k]),bt=="even"?(y>ct&&(ct=y,k===0&&(it=ct)),y<it&&(it=y),bt="odd"):(y>lt&&(lt=y,k==1&&(rt=lt)),y<rt&&(rt=y),bt="even");i.dimension.height=lt-rt;i.dimension.width=ct-it;i.offset.top=st+rt;i.offset.left=ot+it}else i.dimension.height=et.outerHeight(!1),i.dimension.width=et.outerWidth(!1),i.offset.top=st,i.offset.left=ot}var u=0,at=0,l=0,s=parseInt(r.options.offsetY),h=parseInt(r.options.offsetX),f=r.options.position;function d(){var i=n(t).scrollLeft();u-i<0&&(o=u-i,u=i);u+e-i>b&&(o=u-(b+i-e),u=b+i-e)}function g(r,u){i.offset.top-n(t).scrollTop()-c-s-12<0&&u.indexOf("top")>-1&&(f=r);i.offset.top+i.dimension.height+c+12+s>n(t).scrollTop()+n(t).height()&&u.indexOf("bottom")>-1&&(f=r,l=i.offset.top-c-s-12)}f=="top"&&(vt=i.offset.left+e-(i.offset.left+i.dimension.width),u=i.offset.left+h-vt/2,l=i.offset.top-c-s-12,d(),g("bottom","top"));f=="top-left"&&(u=i.offset.left+h,l=i.offset.top-c-s-12,d(),g("bottom-left","top-left"));f=="top-right"&&(u=i.offset.left+i.dimension.width+h-e,l=i.offset.top-c-s-12,d(),g("bottom-right","top-right"));f=="bottom"&&(vt=i.offset.left+e-(i.offset.left+i.dimension.width),u=i.offset.left-vt/2+h,l=i.offset.top+i.dimension.height+s+12,d(),g("top","bottom"));f=="bottom-left"&&(u=i.offset.left+h,l=i.offset.top+i.dimension.height+s+12,d(),g("top-left","bottom-left"));f=="bottom-right"&&(u=i.offset.left+i.dimension.width+h-e,l=i.offset.top+i.dimension.height+s+12,d(),g("top-right","bottom-right"));f=="left"&&(u=i.offset.left-h-e-12,at=i.offset.left+h+i.dimension.width+12,p=i.offset.top+c-(i.offset.top+i.dimension.height),l=i.offset.top-p/2-s,u<0&&at+e>b?(ut=parseFloat(r.$tooltip.css("border-width"))*2,ft=e+u-ut,r.$tooltip.css("width",ft+"px"),c=r.$tooltip.outerHeight(!1),u=i.offset.left-h-ft-12-ut,p=i.offset.top+c-(i.offset.top+i.dimension.height),l=i.offset.top-p/2-s):u<0&&(u=i.offset.left+h+i.dimension.width+12,o="left"));f=="right"&&(u=i.offset.left+h+i.dimension.width+12,at=i.offset.left-h-e-12,p=i.offset.top+c-(i.offset.top+i.dimension.height),l=i.offset.top-p/2-s,u+e>b&&at<0?(ut=parseFloat(r.$tooltip.css("border-width"))*2,ft=b-u-ut,r.$tooltip.css("width",ft+"px"),c=r.$tooltip.outerHeight(!1),p=i.offset.top+c-(i.offset.top+i.dimension.height),l=i.offset.top-p/2-s):u+e>b&&(u=i.offset.left-h-e-12,o="right"));r.options.arrow&&(w="tooltipster-arrow-"+f,dt=r.options.arrowColor.length<1?r.$tooltip.css("background-color"):r.options.arrowColor,o?o=="left"?(w="tooltipster-arrow-right",o=""):o=="right"?(w="tooltipster-arrow-left",o=""):o="left:"+Math.round(o)+"px;":o="",f=="top"||f=="top-left"||f=="top-right"?(a=parseFloat(r.$tooltip.css("border-bottom-width")),nt=r.$tooltip.css("border-bottom-color")):f=="bottom"||f=="bottom-left"||f=="bottom-right"?(a=parseFloat(r.$tooltip.css("border-top-width")),nt=r.$tooltip.css("border-top-color")):f=="left"?(a=parseFloat(r.$tooltip.css("border-right-width")),nt=r.$tooltip.css("border-right-color")):f=="right"?(a=parseFloat(r.$tooltip.css("border-left-width")),nt=r.$tooltip.css("border-left-color")):(a=parseFloat(r.$tooltip.css("border-bottom-width")),nt=r.$tooltip.css("border-bottom-color")),a>1&&a++,kt="",a!==0&&(tt="",gt="border-color: "+nt+";",w.indexOf("bottom")!==-1?tt="margin-top: -"+Math.round(a)+"px;":w.indexOf("top")!==-1?tt="margin-bottom: -"+Math.round(a)+"px;":w.indexOf("left")!==-1?tt="margin-right: -"+Math.round(a)+"px;":w.indexOf("right")!==-1&&(tt="margin-left: -"+Math.round(a)+"px;"),kt='<span class="tooltipster-arrow-border" style="'+tt+" "+gt+';"><\/span>'),r.$tooltip.find(".tooltipster-arrow").remove(),ni='<div class="'+w+' tooltipster-arrow" style="'+o+'">'+kt+'<span style="border-color:'+dt+';"><\/span><\/div>',r.$tooltip.append(ni));r.$tooltip.css({top:Math.round(l)+"px",left:Math.round(u)+"px"})}return r},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var t=this,i,r;return t.hide(),t.$el[0]!==t.$elProxy[0]&&t.$elProxy.remove(),t.$el.removeData(t.namespace).off("."+t.namespace),i=t.$el.data("tooltipster-ns"),i.length===1?(r=null,t.options.restoration==="previous"?r=t.$el.data("tooltipster-initialTitle"):t.options.restoration==="current"&&(r=typeof t.Content=="string"?t.Content:n("<div><\/div>").append(t.Content).html()),r&&t.$el.attr("title",r),t.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")):(i=n.grep(i,function(n){return n!==t.namespace}),t.$el.data("tooltipster-ns",i)),t},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:undefined},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:undefined},option:function(n,t){return typeof t=="undefined"?this.options[n]:(this.options[n]=t,this)},status:function(){return this.Status}};n.fn["tooltipster"]=function(){var t=arguments,r,i;if(this.length===0){if(typeof t[0]=="string"){r=!0;switch(t[0]){case"setDefaults":n.extend(f,t[1]);break;default:r=!1}return r?!0:this}return this}if(typeof t[0]=="string")return i="#*$~&",this.each(function(){var f=n(this).data("tooltipster-ns"),r=f?n(this).data(f[0]):null,u;if(r){if(typeof r[t[0]]=="function")u=r[t[0]](t[1],t[2]);else throw new Error('Unknown method .tooltipster("'+t[0]+'")');if(u!==r)return i=u,!1}else throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');}),i!=="#*$~&"?i:this;var u=[],e=t[0]&&typeof t[0].multiple!="undefined",o=e&&t[0].multiple||!e&&f.multiple,s=t[0]&&typeof t[0].debug!="undefined",c=s&&t[0].debug||!s&&f.debug;return this.each(function(){var f=!1,i=n(this).data("tooltipster-ns"),r=null;i?o?f=!0:c&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):f=!0;f&&(r=new h(this,t[0]),i||(i=[]),i.push(r.namespace),n(this).data("tooltipster-ns",i),n(this).data(r.namespace,r));u.push(r)}),o?u:this};r=!!("ontouchstart"in t);o=!1;n("body").one("mousemove",function(){o=!0})}(jQuery,window,document),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof module!="undefined"&&module.exports?module.exports=n(require("jquery")):n(jQuery)}(function(n){var o=-1,r=-1,i=function(n){return parseFloat(n)||0},s=function(t){var f=1,e=n(t),u=null,r=[];return e.each(function(){var t=n(this),e=t.offset().top-i(t.css("margin-top")),o=r.length>0?r[r.length-1]:null;o===null?r.push(t):Math.floor(Math.abs(u-e))<=f?r[r.length-1]=o.add(t):r.push(t);u=e}),r},u=function(t){var i={byRow:!0,property:"height",target:null,remove:!1};return typeof t=="object"?n.extend(i,t):(typeof t=="boolean"?i.byRow=t:t==="remove"&&(i.remove=!0),i)},t=n.fn.matchHeight=function(i){var r=u(i),f;return r.remove?(f=this,this.css(r.property,""),n.each(t._groups,function(n,t){t.elements=t.elements.not(f)}),this):this.length<=1&&!r.target?this:(t._groups.push({elements:this,options:r}),t._apply(this,r),this)},f,e;t.version="0.7.2";t._groups=[];t._throttle=80;t._maintainScroll=!1;t._beforeUpdate=null;t._afterUpdate=null;t._rows=s;t._parse=i;t._parseOptions=u;t._apply=function(r,f){var e=u(f),o=n(r),c=[o],l=n(window).scrollTop(),a=n("html").outerHeight(!0),h=o.parents().filter(":hidden");return h.each(function(){var t=n(this);t.data("style-cache",t.attr("style"))}),h.css("display","block"),e.byRow&&!e.target&&(o.each(function(){var i=n(this),t=i.css("display");t!=="inline-block"&&t!=="flex"&&t!=="inline-flex"&&(t="block");i.data("style-cache",i.attr("style"));i.css({display:t,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden"})}),c=s(o),o.each(function(){var t=n(this);t.attr("style",t.data("style-cache")||"")})),n.each(c,function(t,r){var u=n(r),f=0;if(e.target)f=e.target.outerHeight(!1);else{if(e.byRow&&u.length<=1){u.css(e.property,"");return}u.each(function(){var t=n(this),u=t.attr("style"),i=t.css("display"),r;i!=="inline-block"&&i!=="flex"&&i!=="inline-flex"&&(i="block");r={display:i};r[e.property]="";t.css(r);t.outerHeight(!1)>f&&(f=t.outerHeight(!1));u?t.attr("style",u):t.css("display","")})}u.each(function(){var t=n(this),r=0;e.target&&t.is(e.target)||(t.css("box-sizing")!=="border-box"&&(r+=i(t.css("border-top-width"))+i(t.css("border-bottom-width")),r+=i(t.css("padding-top"))+i(t.css("padding-bottom"))),t.css(e.property,f-r+"px"))})}),h.each(function(){var t=n(this);t.attr("style",t.data("style-cache")||"")}),t._maintainScroll&&n(window).scrollTop(l/a*n("html").outerHeight(!0)),this};t._applyDataApi=function(){var t={};n("[data-match-height], [data-mh]").each(function(){var i=n(this),r=i.attr("data-mh")||i.attr("data-match-height");t[r]=r in t?t[r].add(i):i});n.each(t,function(){this.matchHeight(!0)})};f=function(i){t._beforeUpdate&&t._beforeUpdate(i,t._groups);n.each(t._groups,function(){t._apply(this.elements,this.options)});t._afterUpdate&&t._afterUpdate(i,t._groups)};t._update=function(i,u){if(u&&u.type==="resize"){var e=n(window).width();if(e===o)return;o=e}i?r===-1&&(r=setTimeout(function(){f(u);r=-1},t._throttle)):f(u)};n(t._applyDataApi);e=n.fn.on?"on":"bind";n(window)[e]("load",function(n){t._update(!1,n)});n(window)[e]("resize orientationchange",function(n){t._update(!0,n)})}),function(n){var t=!0;n.flexslider=function(i,r){var u=n(i);typeof r.rtl=="undefined"&&n("html").attr("dir")=="rtl"&&(r.rtl=!0);u.vars=n.extend({},n.flexslider.defaults,r);var e=u.vars.namespace,y=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,p=("ontouchstart"in window||y||window.DocumentTouch&&document instanceof DocumentTouch)&&u.vars.touch,v="click touchend MSPointerUp keyup",h="",w,c=u.vars.direction==="vertical",s=u.vars.reverse,o=u.vars.itemWidth>0,l=u.vars.animation==="fade",a=u.vars.asNavFor!=="",f={};n.data(i,"flexslider",u);f={init:function(){if(u.animating=!1,u.currentSlide=parseInt(u.vars.startAt?u.vars.startAt:0,10),isNaN(u.currentSlide)&&(u.currentSlide=0),u.animatingTo=u.currentSlide,u.atEnd=u.currentSlide===0||u.currentSlide===u.last,u.containerSelector=u.vars.selector.substr(0,u.vars.selector.search(" ")),u.slides=n(u.vars.selector,u),u.container=n(u.containerSelector,u),u.count=u.slides.length,u.syncExists=n(u.vars.sync).length>0,u.vars.animation==="slide"&&(u.vars.animation="swing"),u.prop=c?"top":u.vars.rtl?"marginRight":"marginLeft",u.args={},u.manualPause=!1,u.stopped=!1,u.started=!1,u.startTimeout=null,u.transitions=!u.vars.video&&!l&&u.vars.useCSS&&function(){var i=document.createElement("div"),n=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var t in n)if(i.style[n[t]]!==undefined)return u.pfx=n[t].replace("Perspective","").toLowerCase(),u.prop="-"+u.pfx+"-transform",!0;return!1}(),u.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,u.ensureAnimationEnd="",u.vars.controlsContainer!==""&&(u.controlsContainer=n(u.vars.controlsContainer).length>0&&n(u.vars.controlsContainer)),u.vars.manualControls!==""&&(u.manualControls=n(u.vars.manualControls).length>0&&n(u.vars.manualControls)),u.vars.customDirectionNav!==""&&(u.customDirectionNav=n(u.vars.customDirectionNav).length===2&&n(u.vars.customDirectionNav)),u.vars.randomize&&(u.slides.sort(function(){return Math.round(Math.random())-.5}),u.container.empty().append(u.slides)),u.doMath(),u.setup("init"),u.vars.controlNav&&f.controlNav.setup(),u.vars.directionNav&&f.directionNav.setup(),u.vars.keyboard&&(n(u.containerSelector).length===1||u.vars.multipleKeyboard))n(document).on("keyup",function(n){var r=u.vars.oc_onKeyboard(u,n)===!1,t,i;r||(t=n.keyCode,u.animating||t!==39&&t!==37||(i=u.vars.rtl?t===37?u.getTarget("next"):t===39?u.getTarget("prev"):!1:t===39?u.getTarget("next"):t===37?u.getTarget("prev"):!1,u.flexAnimate(i,u.vars.pauseOnAction)))});if(u.vars.mousewheel)u.on("mousewheel",function(n,t){n.preventDefault();var i=t<0?u.getTarget("next"):u.getTarget("prev");u.flexAnimate(i,u.vars.pauseOnAction)});if(u.vars.pausePlay&&f.pausePlay.setup(),u.vars.slideshow&&u.vars.pauseInvisible&&f.pauseInvisible.init(),u.vars.slideshow){if(u.vars.pauseOnHover)u.on("hover",function(){u.manualPlay||u.manualPause||u.pause()},function(){u.manualPause||u.manualPlay||u.stopped||u.play()});if(u.vars.oc_pauseOnFocus){u.on("focusin",function(){u.manualPlay||u.manualPause||u.pausePlay.is(":focus")||u.pause()});u.on("focusout",function(){u.manualPause||u.manualPlay||u.stopped||u.play()})}u.vars.pauseInvisible&&f.pauseInvisible.isHidden()||(u.vars.initDelay>0?u.startTimeout=setTimeout(u.play,u.vars.initDelay):u.play())}if(a&&f.asNav.setup(),p&&u.vars.touch&&f.touch(),!l||l&&u.vars.smoothHeight)n(window).on("resize orientationchange focus",f.resize);u.find("img").attr("draggable","false");setTimeout(function(){u.vars.start(u)},200)},asNav:{setup:function(){if(u.asNav=!0,u.animatingTo=Math.floor(u.currentSlide/u.move),u.currentItem=u.currentSlide,u.slides.removeClass(e+"active-slide").eq(u.currentItem).addClass(e+"active-slide"),y)i._slider=u,u.slides.each(function(){var t=this;t._gesture=new MSGesture;t._gesture.target=t;t.addEventListener("MSPointerDown",function(n){n.preventDefault();n.currentTarget._gesture&&n.currentTarget._gesture.addPointer(n.pointerId)},!1);t.addEventListener("MSGestureTap",function(t){t.preventDefault();var i=n(this),r=i.index();n(u.vars.asNavFor).data("flexslider").animating||i.hasClass("active")||(u.direction=u.currentItem<r?"next":"prev",u.flexAnimate(r,u.vars.pauseOnAction,!1,!0,!0))})});else u.slides.on(v,function(t){t.preventDefault();var i=n(this),r=i.index(),f;f=u.vars.rtl?-1*(i.offset().right-n(u).scrollLeft()):i.offset().left-n(u).scrollLeft();f<=0&&i.hasClass(e+"active-slide")?u.flexAnimate(u.getTarget("prev"),!0):n(u.vars.asNavFor).data("flexslider").animating||i.hasClass(e+"active-slide")||(u.direction=u.currentItem<r?"next":"prev",u.flexAnimate(r,u.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){u.manualControls?f.controlNav.setupManual():f.controlNav.setupPaging()},setupPaging:function(){var a=u.vars.controlNav==="thumbnails"?"control-thumbs":"control-paging",c=1,i,t,r,o,l,s;if(u.controlNavScaffold=n('<ol class="'+e+"control-nav "+e+a+'"><\/ol>'),u.pagingCount>1)for(r=0;r<u.pagingCount;r++)t=u.slides.eq(r),undefined===t.attr("data-thumb-alt")&&t.attr("data-thumb-alt",""),i=n("<a><\/a>").attr("href","#").text(c),u.vars.controlNav==="thumbnails"&&(i=n("<img/>").attr("src",t.attr("data-thumb"))),""!==t.attr("data-thumb-alt")&&i.attr("alt",t.attr("data-thumb-alt")),"thumbnails"===u.vars.controlNav&&!0===u.vars.thumbCaptions&&(o=t.attr("data-thumbcaption"),""!==o&&undefined!==o&&(l=n("<span><\/span>").addClass(e+"caption").text(o),i.append(l))),s=n("<li>"),i.appendTo(s),s.append("<\/li>"),u.controlNavScaffold.append(s),c++;u.controlsContainer?n(u.controlsContainer).append(u.controlNavScaffold):u.append(u.controlNavScaffold);f.controlNav.set();f.controlNav.active();u.controlNavScaffold.on(v,"a, img",function(t){if(t.type!="keyup"||t.keyCode==13||t.keyCode==32){if(t.preventDefault(),h===""||h===t.type){var i=n(this),r=u.controlNav.index(i);i.hasClass(e+"active")||(u.direction=r>u.currentSlide?"next":"prev",u.flexAnimate(r,u.vars.pauseOnAction))}h===""&&(h=t.type);f.setToClearWatchedEvent()}})},setupManual:function(){u.controlNav=u.manualControls;f.controlNav.active();u.controlNav.on(v,function(t){if(t.type!="keyup"||t.keyCode==13||t.keyCode==32){if(t.preventDefault(),h===""||h===t.type){var i=n(this),r=u.controlNav.index(i);i.hasClass(e+"active")||(u.direction=r>u.currentSlide?"next":"prev",u.flexAnimate(r,u.vars.pauseOnAction))}h===""&&(h=t.type);f.setToClearWatchedEvent()}})},set:function(){var t=u.vars.controlNav==="thumbnails"?"img":"a";u.controlNav=n("."+e+"control-nav li "+t,u.controlsContainer?u.controlsContainer:u)},active:function(){u.controlNav.removeClass(e+"active").eq(u.animatingTo).addClass(e+"active")},update:function(t,i){u.pagingCount>1&&t==="add"?u.controlNavScaffold.append(n('<li><a href="#">'+u.count+"<\/a><\/li>")):u.pagingCount===1?u.controlNavScaffold.find("li").remove():u.controlNav.eq(i).closest("li").remove();f.controlNav.set();u.pagingCount>1&&u.pagingCount!==u.controlNav.length?u.update(i,t):f.controlNav.active()}},directionNav:{setup:function(){var t=n('<ul class="'+e+'direction-nav"><li class="'+e+'nav-prev"><a class="'+e+'prev" href="#">'+u.vars.prevText+'<\/a><\/li><li class="'+e+'nav-next"><a class="'+e+'next" href="#">'+u.vars.nextText+"<\/a><\/li><\/ul>");u.customDirectionNav?u.directionNav=u.customDirectionNav:u.controlsContainer?(n(u.controlsContainer).append(t),u.directionNav=n("."+e+"direction-nav li a",u.controlsContainer)):(u.append(t),u.directionNav=n("."+e+"direction-nav li a",u));f.directionNav.update();u.directionNav.on(v,function(t){if(t.type!="keyup"||t.keyCode==13||t.keyCode==32){t.preventDefault();var i;(h===""||h===t.type)&&(i=n(this).hasClass(e+"next")?u.getTarget("next"):u.getTarget("prev"),u.flexAnimate(i,u.vars.pauseOnAction));h===""&&(h=t.type);f.setToClearWatchedEvent()}})},update:function(){var n=e+"disabled";u.pagingCount===1?u.directionNav.addClass(n).attr("tabindex","-1"):u.vars.animationLoop?u.directionNav.removeClass(n).removeAttr("tabindex"):u.animatingTo===0?u.directionNav.removeClass(n).filter("."+e+"prev").addClass(n).attr("tabindex","-1"):u.animatingTo===u.last?u.directionNav.removeClass(n).filter("."+e+"next").addClass(n).attr("tabindex","-1"):u.directionNav.removeClass(n).removeAttr("tabindex")}},pausePlay:{setup:function(){var t=n('<div class="'+e+'pauseplay"><a href="#"><\/a><\/div>');u.controlsContainer?(u.controlsContainer.append(t),u.pausePlay=n("."+e+"pauseplay a",u.controlsContainer)):(u.append(t),u.pausePlay=n("."+e+"pauseplay a",u));f.pausePlay.update(u.vars.slideshow?e+"pause":e+"play");u.pausePlay.on(v,function(t){(t.type!="keyup"||t.keyCode==13||t.keyCode==32)&&(t.preventDefault(),(h===""||h===t.type)&&(n(this).hasClass(e+"pause")?(u.manualPause=!0,u.manualPlay=!1,u.pause()):(u.manualPause=!1,u.manualPlay=!0,u.play())),h===""&&(h=t.type),f.setToClearWatchedEvent())})},update:function(n){n==="play"?u.pausePlay.removeClass(e+"pause").addClass(e+"play").html(u.vars.playText):u.pausePlay.removeClass(e+"play").addClass(e+"pause").html(u.vars.pauseText)}},touch:function(){var p,w,f,r,n,e,d,b,k,h=!1,a=0,v=0,t=0;if(y){i.style.msTouchAction="none";i._gesture=new MSGesture;i._gesture.target=i;i.addEventListener("MSPointerDown",g,!1);i._slider=u;i.addEventListener("MSGestureChange",nt,!1);i.addEventListener("MSGestureEnd",tt,!1);function g(n){n.stopPropagation();u.animating?n.preventDefault():(u.pause(),i._gesture.addPointer(n.pointerId),t=0,r=c?u.h:u.w,e=Number(new Date),f=o&&s&&u.animatingTo===u.last?0:o&&s?u.limit-(u.itemW+u.vars.itemMargin)*u.move*u.animatingTo:o&&u.currentSlide===u.last?u.limit:o?(u.itemW+u.vars.itemMargin)*u.move*u.currentSlide:s?(u.last-u.currentSlide+u.cloneOffset)*r:(u.currentSlide+u.cloneOffset)*r)}function nt(u){var o,s,a;if(u.stopPropagation(),o=u.target._slider,o){if(s=-u.translationX,a=-u.translationY,t=t+(c?a:s),n=(o.vars.rtl?-1:1)*t,h=c?Math.abs(t)<Math.abs(-s):Math.abs(t)<Math.abs(-a),u.detail===u.MSGESTURE_FLAG_INERTIA){setImmediate(function(){i._gesture.stop()});return}(!h||Number(new Date)-e>500)&&(u.preventDefault(),!l&&o.transitions&&(o.vars.animationLoop||(n=t/(o.currentSlide===0&&t<0||o.currentSlide===o.last&&t>0?Math.abs(t)/r+2:1)),o.setProps(f+n,"setTouch")))}}function tt(i){var u,o,c;(i.stopPropagation(),u=i.target._slider,u)&&(u.animatingTo!==u.currentSlide||h||n===null||(o=s?-n:n,c=o>0?u.getTarget("next"):u.getTarget("prev"),u.canAdvance(c)&&(Number(new Date)-e<550&&Math.abs(o)>50||Math.abs(o)>r/2)?u.flexAnimate(c,u.vars.pauseOnAction):l||u.flexAnimate(u.currentSlide,u.vars.pauseOnAction,!0)),p=null,w=null,n=null,f=null,t=0)}}else d=function(n){u.animating?n.preventDefault():(window.navigator.msPointerEnabled||n.touches.length===1)&&(u.pause(),r=c?u.h:u.w,e=Number(new Date),a=n.touches[0].pageX,v=n.touches[0].pageY,f=o&&s&&u.animatingTo===u.last?0:o&&s?u.limit-(u.itemW+u.vars.itemMargin)*u.move*u.animatingTo:o&&u.currentSlide===u.last?u.limit:o?(u.itemW+u.vars.itemMargin)*u.move*u.currentSlide:s?(u.last-u.currentSlide+u.cloneOffset)*r:(u.currentSlide+u.cloneOffset)*r,p=c?v:a,w=c?a:v,i.addEventListener("touchmove",b,!1),i.addEventListener("touchend",k,!1))},b=function(t){a=t.touches[0].pageX;v=t.touches[0].pageY;n=c?p-v:(u.vars.rtl?-1:1)*(p-a);h=c?Math.abs(n)<Math.abs(a-w):Math.abs(n)<Math.abs(v-w);(!h||Number(new Date)-e>500)&&(t.preventDefault(),!l&&u.transitions&&(u.vars.animationLoop||(n=n/(u.currentSlide===0&&n<0||u.currentSlide===u.last&&n>0?Math.abs(n)/r+2:1)),u.setProps(f+n,"setTouch")))},k=function(){if(i.removeEventListener("touchmove",b,!1),u.animatingTo===u.currentSlide&&!h&&!(n===null)){var t=s?-n:n,o=t>0?u.getTarget("next"):u.getTarget("prev");u.canAdvance(o)&&(Number(new Date)-e<550&&Math.abs(t)>50||Math.abs(t)>r/2)?u.flexAnimate(o,u.vars.pauseOnAction):l||u.flexAnimate(u.currentSlide,u.vars.pauseOnAction,!0)}i.removeEventListener("touchend",k,!1);p=null;w=null;n=null;f=null},i.addEventListener("touchstart",d,!1)},resize:function(){!u.animating&&u.is(":visible")&&(o||u.doMath(),l?f.smoothHeight():o?(u.slides.width(u.computedW),u.update(u.pagingCount),u.setProps()):c?(u.viewport.height(u.h),u.setProps(u.h,"setTotal")):(u.vars.smoothHeight&&f.smoothHeight(),u.newSlides.width(u.computedW),u.setProps(u.computedW,"setTotal")))},smoothHeight:function(n){if(!c||l){var t=l?u:u.viewport;n?t.animate({height:u.slides.eq(u.animatingTo).innerHeight()},n):t.innerHeight(u.slides.eq(u.animatingTo).innerHeight())}},sync:function(t){var i=n(u.vars.sync).data("flexslider"),r=u.animatingTo;switch(t){case"animate":i.flexAnimate(r,u.vars.pauseOnAction,!1,!0);break;case"play":i.playing||i.asNav||i.play();break;case"pause":i.pause()}},uniqueID:function(t){return t.filter("[id]").add(t.find("[id]")).each(function(){var t=n(this);t.attr("id",t.attr("id")+"_clone")}),t},pauseInvisible:{visProp:null,init:function(){var n=f.pauseInvisible.getHiddenProp(),t;n&&(t=n.replace(/[H|h]idden/,"")+"visibilitychange",document.addEventListener(t,function(){f.pauseInvisible.isHidden()?u.startTimeout?clearTimeout(u.startTimeout):u.pause():u.started?u.play():u.vars.initDelay>0?setTimeout(u.play,u.vars.initDelay):u.play()}))},isHidden:function(){var n=f.pauseInvisible.getHiddenProp();return n?document[n]:!1},getHiddenProp:function(){var t=["webkit","moz","ms","o"],n;if("hidden"in document)return"hidden";for(n=0;n<t.length;n++)if(t[n]+"Hidden"in document)return t[n]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(w);w=setTimeout(function(){h=""},3e3)}};u.flexAnimate=function(t,i,r,h,v){var w,y,d,b,k;if(u.vars.animationLoop||t===u.currentSlide||(u.direction=t>u.currentSlide?"next":"prev"),a&&u.pagingCount===1&&(u.direction=u.currentItem<t?"next":"prev"),!u.animating&&(u.canAdvance(t,v)||r)&&u.is(":visible")){if(a&&h)if(w=n(u.vars.asNavFor).data("flexslider"),u.atEnd=t===0||t===u.count-1,w.flexAnimate(t,!0,!1,!0,v),u.direction=u.currentItem<t?"next":"prev",w.direction=u.direction,Math.ceil((t+1)/u.visible)-1!==u.currentSlide&&t!==0)u.currentItem=t,u.slides.removeClass(e+"active-slide").eq(t).addClass(e+"active-slide"),t=Math.floor(t/u.visible);else return u.currentItem=t,u.slides.removeClass(e+"active-slide").eq(t).addClass(e+"active-slide"),!1;if(u.animating=!0,u.animatingTo=t,i&&u.pause(),u.vars.before(u),u.syncExists&&!v&&f.sync("animate"),u.vars.controlNav&&f.controlNav.active(),o||u.slides.removeClass(e+"active-slide").eq(t).addClass(e+"active-slide"),u.atEnd=t===0||t===u.last,u.vars.directionNav&&f.directionNav.update(),t===u.last&&(u.vars.end(u),u.vars.animationLoop||u.pause()),l)p?(u.slides.eq(u.currentSlide).css({opacity:0,zIndex:1}),u.slides.eq(t).css({opacity:1,zIndex:2}),u.wrapup(y)):(u.slides.eq(u.currentSlide).css({zIndex:1}).animate({opacity:0},u.vars.animationSpeed,u.vars.easing),u.slides.eq(t).css({zIndex:2}).animate({opacity:1},u.vars.animationSpeed,u.vars.easing,u.wrapup));else if(y=c?u.slides.filter(":first").height():u.computedW,o?(d=u.vars.itemMargin,k=(u.itemW+d)*u.move*u.animatingTo,b=k>u.limit&&u.visible!==1?u.limit:k):b=u.currentSlide===0&&t===u.count-1&&u.vars.animationLoop&&u.direction!=="next"?s?(u.count+u.cloneOffset)*y:0:u.currentSlide===u.last&&t===0&&u.vars.animationLoop&&u.direction!=="prev"?s?0:(u.count+1)*y:s?(u.count-1-t+u.cloneOffset)*y:(t+u.cloneOffset)*y,u.setProps(b,"",u.vars.animationSpeed),u.transitions){u.vars.animationLoop&&u.atEnd||(u.animating=!1,u.currentSlide=u.animatingTo);u.container.off("webkitTransitionEnd transitionend");u.container.on("webkitTransitionEnd transitionend",function(){clearTimeout(u.ensureAnimationEnd);u.wrapup(y)});clearTimeout(u.ensureAnimationEnd);u.ensureAnimationEnd=setTimeout(function(){u.wrapup(y)},u.vars.animationSpeed+100)}else u.container.animate(u.args,u.vars.animationSpeed,u.vars.easing,function(){u.wrapup(y)});u.vars.smoothHeight&&f.smoothHeight(u.vars.animationSpeed)}};u.wrapup=function(n){l||o||(u.currentSlide===0&&u.animatingTo===u.last&&u.vars.animationLoop?u.setProps(n,"jumpEnd"):u.currentSlide===u.last&&u.animatingTo===0&&u.vars.animationLoop&&u.setProps(n,"jumpStart"));u.animating=!1;u.currentSlide=u.animatingTo;u.vars.after(u)};u.animateSlides=function(){!u.animating&&t&&u.flexAnimate(u.getTarget("next"))};u.pause=function(){clearInterval(u.animatedSlides);u.animatedSlides=null;u.playing=!1;u.vars.pausePlay&&f.pausePlay.update("play");u.syncExists&&f.sync("pause");u.vars.oc_onPausePlay(u,"pause")};u.play=function(){u.playing&&clearInterval(u.animatedSlides);u.animatedSlides=u.animatedSlides||setInterval(u.animateSlides,u.vars.slideshowSpeed);u.started=u.playing=!0;u.vars.pausePlay&&f.pausePlay.update("pause");u.syncExists&&f.sync("play");u.vars.oc_onPausePlay(u,"play")};u.stop=function(){u.pause();u.stopped=!0};u.canAdvance=function(n,t){var i=a?u.pagingCount-1:u.last;return t?!0:a&&u.currentItem===u.count-1&&n===0&&u.direction==="prev"?!0:a&&u.currentItem===0&&n===u.pagingCount-1&&u.direction!=="next"?!1:n===u.currentSlide&&!a?!1:u.vars.animationLoop?!0:u.atEnd&&u.currentSlide===0&&n===i&&u.direction!=="next"?!1:u.atEnd&&u.currentSlide===i&&n===0&&u.direction==="next"?!1:!0};u.getTarget=function(n){return u.direction=n,n==="next"?u.currentSlide===u.last?0:u.currentSlide+1:u.currentSlide===0?u.last:u.currentSlide-1};u.setProps=function(n,t,i){var r=function(){var i=n?n:(u.itemW+u.vars.itemMargin)*u.move*u.animatingTo,r=function(){if(o)return t==="setTouch"?n:s&&u.animatingTo===u.last?0:s?u.limit-(u.itemW+u.vars.itemMargin)*u.move*u.animatingTo:u.animatingTo===u.last?u.limit:i;switch(t){case"setTotal":return s?(u.count-1-u.currentSlide+u.cloneOffset)*n:(u.currentSlide+u.cloneOffset)*n;case"setTouch":return s?n:n;case"jumpEnd":return s?n:u.count*n;case"jumpStart":return s?u.count*n:n;default:return n}}();return r*(u.vars.rtl?1:-1)+"px"}();u.transitions&&(r=u.isFirefox?c?"translate3d(0,"+r+",0)":"translate3d("+(parseInt(r)+"px")+",0,0)":c?"translate3d(0,"+r+",0)":"translate3d("+((u.vars.rtl?-1:1)*parseInt(r)+"px")+",0,0)",i=i!==undefined?i/1e3+"s":"0s",u.container.css("-"+u.pfx+"-transition-duration",i),u.container.css("transition-duration",i));u.args[u.prop]=r;(u.transitions||i===undefined)&&u.container.css(u.args);u.container.css("transform",r)};u.setup=function(t){if(l)u.vars.rtl?u.slides.css({width:"100%",float:"right",marginLeft:"-100%",position:"relative"}):u.slides.css({width:"100%",float:"left",marginRight:"-100%",position:"relative"}),t==="init"&&(p?u.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+u.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(u.currentSlide).css({opacity:1,zIndex:2}):u.vars.fadeFirstSlide==!1?u.slides.css({opacity:0,display:"block",zIndex:1}).eq(u.currentSlide).css({zIndex:2}).css({opacity:1}):u.slides.css({opacity:0,display:"block",zIndex:1}).eq(u.currentSlide).css({zIndex:2}).animate({opacity:1},u.vars.animationSpeed,u.vars.easing)),u.vars.smoothHeight&&f.smoothHeight();else{var i,r;t==="init"&&(u.viewport=n('<div class="'+e+'viewport"><\/div>').css({overflow:"hidden",position:"relative"}).appendTo(u).append(u.container),u.cloneCount=0,u.cloneOffset=0,s&&(r=n.makeArray(u.slides).reverse(),u.slides=n(r),u.container.empty().append(u.slides)));u.vars.animationLoop&&!o&&(u.cloneCount=2,u.cloneOffset=1,t!=="init"&&u.container.find(".clone").remove(),u.container.append(f.uniqueID(u.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(f.uniqueID(u.slides.last().clone().addClass("clone")).attr("aria-hidden","true")));u.newSlides=n(u.vars.selector,u);i=s?u.count-1-u.currentSlide+u.cloneOffset:u.currentSlide+u.cloneOffset;c&&!o?(u.container.height((u.count+u.cloneCount)*200+"%").css("position","absolute").width("100%"),setTimeout(function(){u.newSlides.css({display:"block"});u.doMath();u.viewport.height(u.h);u.setProps(i*u.h,"init")},t==="init"?100:0)):(t==="init"&&u.slides.first().width(u.computedW),u.container.width((u.count+u.cloneCount)*200+"%"),u.setProps(i*u.computedW,"init"),t==="init"&&u.slides.first().css("marginLeft",u.computedW),setTimeout(function(){u.slides.css("marginLeft","");u.doMath();u.vars.rtl?u.isFirefox?u.newSlides.css({width:u.computedW,marginRight:u.computedM,float:"right",display:"block"}):u.newSlides.css({width:u.computedW,marginRight:u.computedM,float:"left",display:"block"}):u.newSlides.css({width:u.computedW,marginRight:u.computedM,float:"left",display:"block"});u.vars.smoothHeight&&f.smoothHeight()},t==="init"?100:0))}o||u.slides.removeClass(e+"active-slide").eq(u.currentSlide).addClass(e+"active-slide");u.vars.init(u)};u.doMath=function(){var r=u.slides.first(),n=u.vars.itemMargin,t=u.vars.minItems,i=u.vars.maxItems;u.w=u.viewport===undefined?u.width():u.viewport.width();u.isFirefox&&(u.w=u.width());u.h=r.height();u.boxPadding=r.outerWidth()-r.width();o?(u.itemT=u.vars.itemWidth+n,u.itemM=n,u.minW=t?t*u.itemT:u.w,u.maxW=i?i*u.itemT-n:u.w,u.itemW=u.minW>u.w?(u.w-n*(t-1))/t:u.maxW<u.w?(u.w-n*(i-1))/i:u.vars.itemWidth>u.w?u.w:u.vars.itemWidth,u.visible=Math.floor(u.w/u.itemW),u.move=u.vars.move>0&&u.vars.move<u.visible?u.vars.move:u.visible,u.pagingCount=Math.ceil((u.count-u.visible)/u.move+1),u.last=u.pagingCount-1,u.limit=u.pagingCount===1?0:u.vars.itemWidth>u.w?u.itemW*(u.count-1)+n*(u.count-1):(u.itemW+n)*u.count-u.w-n):(u.itemW=u.w,u.itemM=n,u.pagingCount=u.count,u.last=u.count-1);u.computedW=u.itemW-u.boxPadding;u.computedM=u.itemM};u.update=function(n,t){u.doMath();o||(n<u.currentSlide?u.currentSlide+=1:n<=u.currentSlide&&n!==0&&(u.currentSlide-=1),u.animatingTo=u.currentSlide);u.vars.controlNav&&!u.manualControls&&(t==="add"&&!o||u.pagingCount>u.controlNav.length?f.controlNav.update("add"):(t==="remove"&&!o||u.pagingCount<u.controlNav.length)&&(o&&u.currentSlide>u.last&&(u.currentSlide-=1,u.animatingTo-=1),f.controlNav.update("remove",u.last)));u.vars.directionNav&&f.directionNav.update()};u.addSlide=function(t,i){var r=n(t);u.count+=1;u.last=u.count-1;c&&s?i!==undefined?u.slides.eq(u.count-i).after(r):u.container.prepend(r):i!==undefined?u.slides.eq(i).before(r):u.container.append(r);u.update(i,"add");u.slides=n(u.vars.selector+":not(.clone)",u);u.setup();u.vars.added(u)};u.removeSlide=function(t){var i=isNaN(t)?u.slides.index(n(t)):t;u.count-=1;u.last=u.count-1;isNaN(t)?n(t,u.slides).remove():c&&s?u.slides.eq(u.last).remove():u.slides.eq(t).remove();u.doMath();u.update(i,"remove");u.slides=n(u.vars.selector+":not(.clone)",u);u.setup();u.vars.removed(u)};f.init()};n(window).on("blur",function(){t=!1}).on("focus",function(){t=!0});n.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",customDirectionNav:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,isFirefox:!1,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){},rtl:!1,oc_onPausePlay:function(){},oc_onKeyboard:function(){},oc_pauseOnFocus:!1};n.fn.flexslider=function(t){if(t===undefined&&(t={}),typeof t=="object")return this.each(function(){var i=n(this),u=t.selector?t.selector:".slides > li",r=i.find(u);r.length===1&&t.allowOneSlide===!1||r.length===0?(r.fadeIn(400),t.start&&t.start(i)):i.data("flexslider")===undefined&&new n.flexslider(this,t)});var i=n(this).data("flexslider");switch(t){case"play":i.play();break;case"pause":i.pause();break;case"stop":i.stop();break;case"next":i.flexAnimate(i.getTarget("next"),!0);break;case"prev":case"previous":i.flexAnimate(i.getTarget("prev"),!0);break;default:typeof t=="number"&&i.flexAnimate(t,!0)}}}(jQuery);
/*! Tablesaw - v3.0.6 - 2017-11-20
* https://github.com/filamentgroup/tablesaw
* Copyright (c) 2017 Filament Group; Licensed MIT */
(function(n,t){typeof define=="function"&&define.amd?define(["jquery"],function(i){return n.Tablesaw=t(i,n)}):typeof exports=="object"?module.exports=t(require("jquery")(n),n):n.Tablesaw=t(jQuery,n)})(typeof window!="undefined"?window:this,function(n,t){"use strict";var r=!1,i;document.addEventListener("DOMContentLoaded",function(){r=!0});i={i18n:{modeStack:"Stack",modeSwipe:"Swipe",modeToggle:"Toggle",modeSwitchColumnsAbbreviated:"Cols",modeSwitchColumns:"Columns",columnToggleButton:"Columns",columnToggleError:"No eligible columns.",sort:"Sort",swipePreviousColumn:"Previous column",swipeNextColumn:"Next column"},mustard:"head"in document&&(!window.blackberry||window.WebKitPoint)&&!window.operamini,$:n,_init:function(n){i.$(n||document).trigger("enhance.tablesaw")},init:function(n){r?i._init(n):"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){i._init(n)})}};n(t.document).on("enhance.tablesaw",function(){typeof TablesawConfig!="undefined"&&TablesawConfig.i18n&&(i.i18n=n.extend(i.i18n,TablesawConfig.i18n||{}));i.i18n.modes=[i.i18n.modeStack,i.i18n.modeSwipe,i.i18n.modeToggle]});return i.mustard&&n(document.documentElement).addClass("tablesaw-enhanced"),function(){var u="tablesaw",s={toolbar:"tablesaw-bar"},f={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh",resize:"tablesawresize"},l="stack",a="table",v="[data-tablesaw],[data-tablesaw-mode],[data-tablesaw-sortable]",y={},r,e,o,h,c;i.events=f;r=function(t){if(!t)throw new Error("Tablesaw requires an element.");this.table=t;this.$table=n(t);this.$thead=this.$table.children().filter("thead").eq(0);this.$tbody=this.$table.children().filter("tbody");this.mode=this.$table.attr("data-tablesaw-mode")||l;this.$toolbar=null;this.attributes={subrow:"data-tablesaw-subrow",ignorerow:"data-tablesaw-ignorerow"};this.init()};r.prototype.init=function(){if(!this.$thead.length)throw new Error("tablesaw: a <thead> is required, but none was found.");if(!this.$thead.find("th").length)throw new Error("tablesaw: no header cells found. Are you using <th> inside of <thead>?");this.$table.attr("id")||this.$table.attr("id",u+"-"+Math.round(Math.random()*1e4));this.createToolbar();this._initCells();this.$table.data(u,this);this.$table.trigger(f.create,[this])};r.prototype.getConfig=function(t){var i=n.extend(y,t||{});return n.extend(i,typeof TablesawConfig!="undefined"?TablesawConfig:{})};r.prototype._getPrimaryHeaderRow=function(){return this._getHeaderRows().eq(0)};r.prototype._getHeaderRows=function(){return this.$thead.children().filter("tr").filter(function(){return!n(this).is("[data-tablesaw-ignorerow]")})};r.prototype._getRowIndex=function(n){return n.prevAll().length};r.prototype._getHeaderRowIndeces=function(){var i=this,t=[];return this._getHeaderRows().each(function(){t.push(i._getRowIndex(n(this)))}),t};r.prototype._getPrimaryHeaderCells=function(n){return(n||this._getPrimaryHeaderRow()).find("th")};r.prototype._$getCells=function(t){var i=this;return n(t).add(t.cells).filter(function(){var t=n(this),r=t.parent(),u=t.is("[colspan]");return!r.is("["+i.attributes.subrow+"]")&&(!r.is("["+i.attributes.ignorerow+"]")||!u)})};r.prototype._getVisibleColspan=function(){var t=0;return this._getPrimaryHeaderCells().each(function(){var i=n(this);i.css("display")!=="none"&&(t+=parseInt(i.attr("colspan"),10)||1)}),t};r.prototype.getColspanForCell=function(t){var r=this._getVisibleColspan(),i=0;return t.closest("tr").data("tablesaw-rowspanned")&&i++,t.siblings().each(function(){var t=n(this),r=parseInt(t.attr("colspan"),10)||1;t.css("display")!=="none"&&(i+=r)}),r-i};r.prototype.isCellInColumn=function(t,i){return n(t).add(t.cells).filter(function(){return this===i}).length};r.prototype.updateColspanCells=function(t,i,r){var u=this,f=u._getPrimaryHeaderRow();this.$table.find("[rowspan][data-tablesaw-priority]").each(function(){var i=n(this),t,r;i.attr("data-tablesaw-priority")==="persist"&&(t=i.closest("tr"),r=parseInt(i.attr("rowspan"),10),r>1&&(t=t.next(),t.data("tablesaw-rowspanned",!0),r--))});this.$table.find("[colspan],[data-tablesaw-maxcolspan]").filter(function(){return n(this).closest("tr")[0]!==f[0]}).each(function(){var f=n(this),e,o;(r===undefined||u.isCellInColumn(i,this))&&(e=u.getColspanForCell(f),t&&r!==undefined&&f[e===0?"addClass":"removeClass"](t),o=parseInt(f.attr("data-tablesaw-maxcolspan"),10),o?e>o&&(e=o):f.attr("data-tablesaw-maxcolspan",f.attr("colspan")),f.attr("colspan",e))})};r.prototype._findPrimaryHeadersForCell=function(n){for(var i,r=this._getPrimaryHeaderRow(),f=this._getPrimaryHeaderCells(r),e=this._getRowIndex(r),u=[],t=0;t<this.headerMapping.length;t++)if(t!==e)for(i=0;i<this.headerMapping[t].length;i++)this.headerMapping[t][i]===n&&u.push(f[i]);return u};r.prototype.getRows=function(){var t=this;return this.$table.find("tr").filter(function(){return n(this).closest("table").is(t.$table)})};r.prototype.getBodyRows=function(t){return(t?n(t):this.$tbody).children().filter("tr")};r.prototype.getHeaderCellIndex=function(n){for(var i=this.headerMapping[0],t=0;t<i.length;t++)if(i[t]===n)return t;return-1};r.prototype._initCells=function(){var o,t,f,i,r,h,u,e,s;for(this.$table.find("[data-tablesaw-maxcolspan]").each(function(){var t=n(this);t.attr("colspan",t.attr("data-tablesaw-maxcolspan"))}),o=this.getRows(),t=[],o.each(function(n){t[n]=[]}),o.each(function(i){var r=0,u=n(this),f=u.children();f.each(function(){for(var f=parseInt(this.getAttribute("data-tablesaw-maxcolspan")||this.getAttribute("colspan"),10),e=parseInt(this.getAttribute("rowspan"),10),u,n;t[i][r];)r++;if(t[i][r]=this,f)for(u=0;u<f-1;u++)r++,t[i][r]=this;if(e)for(n=1;n<e;n++)t[i+n][r]=this;r++})}),f=this._getHeaderRowIndeces(),i=0;i<t[0].length;i++)for(r=0,h=f.length;r<h;r++)for(u=t[f[r]][i],e=f[r],u.cells||(u.cells=[]);e<t.length;)s=t[e][i],u!==s&&u.cells.push(s),e++;this.headerMapping=t};r.prototype.refresh=function(){this._initCells();this.$table.trigger(f.refresh,[this])};r.prototype._getToolbarAnchor=function(){var n=this.$table.parent();return n.is(".tablesaw-overflow")?n:this.$table};r.prototype._getToolbar=function(n){return n||(n=this._getToolbarAnchor()),n.prev().filter("."+s.toolbar)};r.prototype.createToolbar=function(){var i=this._getToolbarAnchor(),t=this._getToolbar(i);t.length||(t=n("<div>").addClass(s.toolbar).insertBefore(i));this.$toolbar=t;this.mode&&this.$toolbar.addClass("tablesaw-mode-"+this.mode)};r.prototype.destroy=function(){this._getToolbar().each(function(){this.className=this.className.replace(/\btablesaw-mode\-\w*\b/gi,"")});var t=this.$table.attr("id");n(document).off("."+t);n(window).off("."+t);this.$table.trigger(f.destroy,[this]);this.$table.removeData(u)};n.fn[u]=function(){return this.each(function(){var t=n(this);t.data(u)||new r(this)})};e=n(t.document);e.on("enhance.tablesaw",function(t){i.mustard&&n(t.target).find(a).filter(v)[u]()});o=!1;e.on("scroll.tablesaw",function(){o=!0;t.clearTimeout(h);h=t.setTimeout(function(){o=!1},300)});n(t).on("resize",function(){o||(t.clearTimeout(c),c=t.setTimeout(function(){e.trigger(f.resize)},150))});i.Table=r}(),function(){var t={stackTable:"tablesaw-stack",cellLabels:"tablesaw-cell-label",cellContentLabels:"tablesaw-cell-content"},u={key:"tablesaw-stack"},f={labelless:"data-tablesaw-no-labels",hideempty:"data-tablesaw-hide-empty"},r=function(t,i){this.tablesaw=i;this.$table=n(t);this.labelless=this.$table.is("["+f.labelless+"]");this.hideempty=this.$table.is("["+f.hideempty+"]");this.$table.data(u.key,this)};r.prototype.init=function(){if(this.$table.addClass(t.stackTable),!this.labelless){var i=this;this.$table.find("th, td").filter(function(){return!n(this).closest("thead").length}).filter(function(){return!n(this).closest("tr").is("["+f.labelless+"]")&&(!i.hideempty||!!n(this).html())}).each(function(){var r=n(document.createElement("b")).addClass(t.cellLabels),u=n(this),f;n(i.tablesaw._findPrimaryHeadersForCell(this)).each(function(t){var i=n(this.cloneNode(!0)),f=i.find(".tablesaw-sortable-btn"),u;if(i.find(".tablesaw-sortable-arrow").remove(),u=i.find("[data-tablesaw-checkall]"),u.closest("label").remove(),u.length){r=n([]);return}t>0&&r.append(document.createTextNode(", "));r.append(f.length?f[0].childNodes:i[0].childNodes)});r.length&&!u.find("."+t.cellContentLabels).length&&u.wrapInner("<span class='"+t.cellContentLabels+"'><\/span>");f=u.find("."+t.cellLabels);f.length?f.replaceWith(r):u.prepend(r)})}};r.prototype.destroy=function(){this.$table.removeClass(t.stackTable);this.$table.find("."+t.cellLabels).remove();this.$table.find("."+t.cellContentLabels).each(function(){n(this).replaceWith(this.childNodes)})};n(document).on(i.events.create,function(n,t){if(t.mode==="stack"){var i=new r(t.table,t);i.init()}}).on(i.events.refresh,function(t,i){i.mode==="stack"&&n(i.table).data(u.key).init()}).on(i.events.destroy,function(t,i){i.mode==="stack"&&n(i.table).data(u.key).destroy()});i.Stack=r}(),function(){var t="tablesawbtn",i={_create:function(){return n(this).each(function(){n(this).trigger("beforecreate."+t)[t]("_init").trigger("create."+t)})},_init:function(){var r=n(this),i=this.getElementsByTagName("select")[0];return i&&n(this).addClass("btn-select tablesaw-btn-select")[t]("_select",i),r},_select:function(t){var i=function(t,i){var o=n(i).find("option"),r=document.createElement("span"),u,e,s=!1,f,h;if(r.setAttribute("aria-hidden","true"),r.innerHTML="&#160;",o.each(function(){var n=this;n.selected&&(r.innerHTML=n.text)}),e=t.childNodes,o.length>0){for(f=0,h=e.length;f<h;f++)u=e[f],u&&u.nodeName.toUpperCase()==="SPAN"&&(t.replaceChild(r,u),s=!0);s||t.insertBefore(r,t.firstChild)}};i(this,t);n(this).on("change refresh",function(){i(this,t)})}};n.fn[t]=function(i,r,u,f){return this.each(function(){if(i&&typeof i=="string")return n.fn[t].prototype[i].call(this,r,u,f);if(n(this).data(t+"active"))return n(this);n(this).data(t+"active",!0);n.fn[t].prototype._create.call(this)})};n.extend(n.fn[t].prototype,i)}(),function(){var r={key:"tablesaw-coltoggle"},t=function(t){(this.$table=n(t),this.$table.length)&&(this.tablesaw=this.$table.data("tablesaw"),this.attributes={btnTarget:"data-tablesaw-columntoggle-btn-target",set:"data-tablesaw-columntoggle-set"},this.classes={columnToggleTable:"tablesaw-columntoggle",columnBtnContain:"tablesaw-columntoggle-btnwrap tablesaw-advance",columnBtn:"tablesaw-columntoggle-btn tablesaw-nav-btn down",popup:"tablesaw-columntoggle-popup",priorityPrefix:"tablesaw-priority-"},this.set=[],this.$headers=this.tablesaw._getPrimaryHeaderCells(),this.$table.data(r.key,this))};t.prototype.initSet=function(){var t=this.$table.attr(this.attributes.set),i;t&&(i=this.$table[0],this.set=n("table["+this.attributes.set+"='"+t+"']").filter(function(){return this!==i}).get())};t.prototype.init=function(){function p(n){var i=n.checked,r=t.getHeaderFromCheckbox(n),u=t.tablesaw._$getCells(r);u[i?"removeClass":"addClass"]("tablesaw-toggle-cellhidden");u[i?"addClass":"removeClass"]("tablesaw-toggle-cellvisible");t.updateColspanCells(r,i);t.$table.trigger("tablesawcolumns")}function a(i){i&&n(i.target).closest("."+t.classes.popup).length||(n(document).off("click."+f),o.removeClass("up").addClass("down"),u.removeClass("visible"))}function k(){u.addClass("visible");o.removeClass("down").addClass("up");n(document).off("click."+f,a);window.clearTimeout(w);w=window.setTimeout(function(){n(document).on("click."+f,a)},15)}var f,h,o,s,e,u,t,y,c,l,w,v,b;if(this.$table.length){t=this;y=this.tablesaw.getConfig({getColumnToggleLabelTemplate:function(n){return"<label><input type='checkbox' checked>"+n+"<\/label>"}});this.$table.addClass(this.classes.columnToggleTable);f=this.$table.attr("id");h=f+"-popup";u=n("<div class='"+this.classes.columnBtnContain+"'><\/div>");o=n("<a href='#"+h+"' class='btn tablesaw-btn btn-micro "+this.classes.columnBtn+"' data-popup-link><span>"+i.i18n.columnToggleButton+"<\/span><\/a>");s=n("<div class='"+this.classes.popup+"' id='"+h+"'><\/div>");e=n("<div class='btn-group'><\/div>");this.$popup=s;c=!1;this.$headers.each(function(){var r=n(this),i=r.attr("data-tablesaw-priority"),u=t.tablesaw._$getCells(this);i&&i!=="persist"&&(u.addClass(t.classes.priorityPrefix+i),n(y.getColumnToggleLabelTemplate(r.text())).appendTo(e).find('input[type="checkbox"]').data("tablesaw-header",this),c=!0)});c||e.append("<label>"+i.i18n.columnToggleError+"<\/label>");e.appendTo(s);e.find('input[type="checkbox"]').on("change",function(i){if(p(i.target),t.set.length){var u;n(t.$popup).find("input[type='checkbox']").each(function(n){if(this===i.target)return u=n,!1});n(t.set).each(function(){var t=n(this).data(r.key).$popup.find("input[type='checkbox']").get(u);t&&(t.checked=i.target.checked,p(t))})}});o.appendTo(u);l=n(this.$table.attr(this.attributes.btnTarget));u.appendTo(l.length?l:this.tablesaw.$toolbar);o.on("click.tablesaw",function(n){n.preventDefault();u.is(".visible")?a():k()});if(s.appendTo(u),this.$menu=e,v=this.$table.closest(".tablesaw-overflow"),v.css("-webkit-overflow-scrolling"))v.on("scroll",function(){var t=n(this);window.clearTimeout(b);b=window.setTimeout(function(){t.css("-webkit-overflow-scrolling","auto");window.setTimeout(function(){t.css("-webkit-overflow-scrolling","touch")},0)},100)});n(window).on(i.events.resize+"."+f,function(){t.refreshToggle()});this.initSet();this.refreshToggle()}};t.prototype.getHeaderFromCheckbox=function(t){return n(t).data("tablesaw-header")};t.prototype.refreshToggle=function(){var n=this;this.$menu.find("input").each(function(){var t=n.getHeaderFromCheckbox(this);this.checked=n.tablesaw._$getCells(t).eq(0).css("display")==="table-cell"});this.updateColspanCells()};t.prototype.updateColspanCells=function(n,t){this.tablesaw.updateColspanCells("tablesaw-toggle-cellhidden",n,t)};t.prototype.destroy=function(){this.$table.removeClass(this.classes.columnToggleTable);this.$table.find("th, td").each(function(){var t=n(this);t.removeClass("tablesaw-toggle-cellhidden").removeClass("tablesaw-toggle-cellvisible");this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,"")})};n(document).on(i.events.create,function(n,i){if(i.mode==="columntoggle"){var r=new t(i.table);r.init()}});n(document).on(i.events.destroy,function(t,i){i.mode==="columntoggle"&&n(i.table).data(r.key).destroy()});n(document).on(i.events.refresh,function(t,i){i.mode==="columntoggle"&&n(i.table).data(r.key).refreshPriority()});i.ColumnToggle=t}(),function(){function f(t){var i=[];return n(t.childNodes).each(function(){var t=n(this);t.is("input, select")?i.push(t.val()):t.is(".tablesaw-cell-label")||i.push((t.text()||"").replace(/^\s+|\s+$/g,""))}),i.join("")}var t="tablesaw-sortable",e="table[data-"+t+"]",o="[data-"+t+"-switch]",u={sortCol:"data-tablesaw-sortable-col",defaultCol:"data-tablesaw-sortable-default-col",numericCol:"data-tablesaw-sortable-numeric",subRow:"data-tablesaw-subrow",ignoreRow:"data-tablesaw-ignorerow"},r={head:t+"-head",ascend:t+"-ascending",descend:t+"-descending",switcher:t+"-switch",tableToolbar:"tablesaw-bar-section",sortButton:t+"-btn"},s={_create:function(i){return n(this).each(function(){var r=n(this).data(t+"-init");if(r)return!1;n(this).data(t+"-init",!0).trigger("beforecreate."+t)[t]("_init",i).trigger("create."+t)})},_init:function(){function a(t){n.each(t,function(t,i){n(i).addClass(r.head)})}function v(t,i){n.each(t,function(t,u){var f=n("<button class='"+r.sortButton+"'/>");f.on("click",{col:u},i);n(u).wrapInner(f).find("button").append("<span class='tablesaw-sortable-arrow'>")})}function l(t){n.each(t,function(t,i){var f=n(i);f.removeAttr(u.defaultCol);f.removeClass(r.ascend);f.removeClass(r.descend)})}function y(i){if(!n(i.target).is("a[href]")){i.stopPropagation();var f=n(i.target).closest("["+u.sortCol+"]"),c=i.data.col,o=h.index(f[0]);l(f.closest("thead").find("th").filter(function(){return this!==f[0]}));f.is("."+r.descend)||!f.is("."+r.ascend)?(s[t]("sortBy",c,!0),o+="_asc"):(s[t]("sortBy",c),o+="_desc");e&&e.find("select").val(o).trigger("refresh");i.preventDefault()}}function p(t){n.each(t,function(t,i){var f=n(i);f.is("["+u.defaultCol+"]")&&(f.is("."+r.descend)||f.addClass(r.ascend))})}function w(o){var h,a;e=n("<div>").addClass(r.switcher).addClass(r.tableToolbar);h=["<label>"+i.i18n.sort+":"];h.push('<span class="btn tablesaw-btn"><select>');o.each(function(t){var i=n(this),o=i.is("["+u.defaultCol+"]"),s=i.is("."+r.descend),a=i.is("["+u.numericCol+"]"),c=0,l=5,e;n(this.cells.slice(0,l)).each(function(){isNaN(parseInt(f(this),10))||c++});e=c===l;a||i.attr(u.numericCol,e?"":"false");h.push("<option"+(o&&!s?" selected":"")+' value="'+t+'_asc">'+i.text()+" "+(e?"&#x2191;":"(A-Z)")+"<\/option>");h.push("<option"+(o&&s?" selected":"")+' value="'+t+'_desc">'+i.text()+" "+(e?"&#x2193;":"(Z-A)")+"<\/option>")});h.push("<\/select><\/span><\/label>");e.html(h.join(""));a=c.$toolbar.children().eq(0);a.length?e.insertBefore(a):e.appendTo(c.$toolbar);e.find(".tablesaw-btn").tablesawbtn();e.find("select").on("change",function(){var i=n(this).val().split("_"),r=o.eq(i[0]);l(r.siblings());s[t]("sortBy",r.get(0),i[1]==="asc")})}var s=n(this),c=s.data("tablesaw"),h,e;s.addClass(t);h=s.children().filter("thead").find("th["+u.sortCol+"]");a(h);v(h,y);p(h);s.is(o)&&w(h)},sortRows:function(t,i,r,e,o){function l(t,i){var r=[];return n.each(t,function(t,e){for(var s=e.parentNode,h=n(s),c=[],o=h.next(),l;o.is("["+u.subRow+"]");)c.push(o[0]),o=o.next();l=s.parentNode;h.is("["+u.subRow+"]")||l===i&&r.push({element:e,cell:f(e),row:s,subrows:c.length?c:null,ignored:h.is("["+u.ignoreRow+"]")})}),r}function a(n,t){var i=/[^\-\+\d\.]/g;return n?function(n,r){return n.ignored||r.ignored?0:t?parseFloat(n.cell.replace(i,""))-parseFloat(r.cell.replace(i,"")):n.cell.toLowerCase()>r.cell.toLowerCase()?1:-1}:function(n,r){return n.ignored||r.ignored?0:t?parseFloat(r.cell.replace(i,""))-parseFloat(n.cell.replace(i,"")):n.cell.toLowerCase()<r.cell.toLowerCase()?1:-1}}function v(n){for(var i=[],t=0,r=n.length;t<r;t++)i.push(n[t].row),n[t].subrows&&i.push(n[t].subrows);return i}var h,c,y=l(e.cells,o),s=n(e).data("tablesaw-sort");return h=(s&&typeof s=="function"?s(r):!1)||a(r,n(e).is("["+u.numericCol+"]")&&!n(e).is("["+u.numericCol+'="false"]')),c=y.sort(h),v(c)},makeColDefault:function(t,i){var f=n(t);f.attr(u.defaultCol,"true");i?(f.removeClass(r.descend),f.addClass(r.ascend)):(f.removeClass(r.ascend),f.addClass(r.descend))},sortBy:function(i,r){var u=n(this),e,f=u.data("tablesaw");f.$tbody.each(function(){for(var c=this,a=n(this),v=f.getBodyRows(c),h,l=f.headerMapping[0],o=0,s=l.length;o<s;o++)if(l[o]===i){e=o;break}for(h=u[t]("sortRows",v,e,r,i,c),o=0,s=h.length;o<s;o++)a.append(h[o])});u[t]("makeColDefault",i,r);u.trigger("tablesaw-sorted")}};n.fn[t]=function(i){var u=Array.prototype.slice.call(arguments,1),r;return i&&typeof i=="string"?(r=n.fn[t].prototype[i].apply(this[0],u),typeof r!="undefined"?r:n(this)):(n(this).data(t+"-active")||(n(this).data(t+"-active",!0),n.fn[t].prototype._create.call(this,i)),n(this))};n.extend(n.fn[t].prototype,s);n(document).on(i.events.create,function(n,i){i.$table.is(e)&&i.$table[t]()})}(),function(){function f(f,e){function g(){e.css({width:"1px"});e.find("."+r.hiddenCol).removeClass(r.hiddenCol);w=[];s.each(function(){w.push(this.offsetWidth)});e.css({width:""})}function nt(n){o._$getCells(n).removeClass(r.hiddenCol)}function tt(n){o._$getCells(n).addClass(r.hiddenCol)}function ft(n){o._$getCells(n).addClass(r.persistCol)}function et(t){return n(t).is('[data-tablesaw-priority="persist"]')}function it(){e.removeClass(r.persistWidths);n("#"+c+"-persist").remove()}function ot(){var o="#"+c+".tablesaw-swipe ",i=[],h=e.width(),f=[],u,t;s.each(function(n){var t;et(this)&&(t=this.offsetWidth,t<h*.75&&(f.push(n+"-"+t),i.push(o+" ."+r.persistCol+":nth-child("+(n+1)+") { width: "+t+"px; }")))});u=f.join("_");i.length&&(e.addClass(r.persistWidths),t=n("#"+c+"-persist"),t.length&&t.data("tablesaw-hash")===u||(t.remove(),n("<style>"+i.join("\n")+"<\/style>").attr("id",c+"-persist").data("tablesaw-hash",u).appendTo(ut)))}function b(){var t=[],i;return h.each(function(u){var f=n(this),e=f.css("display")==="none"||f.is("."+r.hiddenCol);if(e||i){if(e&&i)return t[1]=u,!1}else i=!0,t[0]=u}),t}function rt(){var n=b();return[n[1]-1,n[0]-1]}function st(n){return n?b():rt()}function k(n){return n[1]>-1&&n[1]<h.length}function ht(){var n=e.attr("data-tablesaw-swipe-media");return!n||"matchMedia"in t&&t.matchMedia(n).matches}function l(){var f;if(ht()){var t=e.parent().width(),h=[],i=0,u=[],c=s.length;s.each(function(r){var e=n(this),f=e.is('[data-tablesaw-priority="persist"]');h.push(f);i+=w[r];u.push(i);(f||i>t)&&c--});f=c===0;s.each(function(n){u[n]>t&&tt(this)});s.each(function(n){if(h[n]){ft(this);return}(u[n]<=t||f)&&(f=!1,nt(this),o.updateColspanCells(r.hiddenCol,this,!0))});it();e.trigger("tablesawcolumns")}}function a(n){var t=st(n);k(t)&&(isNaN(t[0])&&(t[0]=n?0:h.length-1),ot(),tt(h.get(t[0])),o.updateColspanCells(r.hiddenCol,h.get(t[0]),!1),nt(h.get(t[1])),o.updateColspanCells(r.hiddenCol,h.get(t[1]),!0),e.trigger("tablesawcolumns"))}function v(n,t){return(n.touches||n.originalEvent.touches)[0][t]}var o=e.data("tablesaw"),y=n("<div class='tablesaw-advance'><\/div>"),d=n("<a href='#' class='btn tablesaw-nav-btn tablesaw-btn btn-micro left'>"+i.i18n.swipePreviousColumn+"<\/a>").appendTo(y),p=n("<a href='#' class='btn tablesaw-nav-btn tablesaw-btn btn-micro right'>"+i.i18n.swipeNextColumn+"<\/a>").appendTo(y),s=f._getPrimaryHeaderCells(),h=s.not('[data-tablesaw-priority="persist"]'),w=[],ut=n(document.head||"head"),c=e.attr("id");if(!s.length)throw new Error("tablesaw swipe: no header cells found.");e.addClass("tablesaw-swipe");g();y.appendTo(o.$toolbar);c||(c="tableswipe-"+Math.round(Math.random()*1e4),e.attr("id",c));d.add(p).on("click",function(t){a(!!n(t.target).closest(p).length);t.preventDefault()});if(!e.is("["+u.disableTouchEvents+"]"))e.on("touchstart.swipetoggle",function(r){var e=v(r,"pageX"),s=v(r,"pageY"),u,o,h=window.pageYOffset;n(t).off(i.events.resize,l);n(this).on("touchmove.swipetoggle",function(n){u=v(n,"pageX");o=v(n,"pageY")}).on("touchend.swipetoggle",function(){var r=f.getConfig({swipeHorizontalThreshold:30,swipeVerticalThreshold:30}),c=r.swipe?r.swipe.verticalThreshold:r.swipeVerticalThreshold,v=r.swipe?r.swipe.horizontalThreshold:r.swipeHorizontalThreshold,y=Math.abs(window.pageYOffset-h)>=c,p=Math.abs(o-s)>=c;p||y||(u-e<-1*v&&a(!0),u-e>v&&a(!1));window.setTimeout(function(){n(t).on(i.events.resize,l)},300);n(this).off("touchmove.swipetoggle touchend.swipetoggle")})});e.on("tablesawcolumns.swipetoggle",function(){var n=k(rt()),t=k(b());d[n?"removeClass":"addClass"](r.hideBtn);p[t?"removeClass":"addClass"](r.hideBtn);o.$toolbar[!n&&!t?"addClass":"removeClass"](r.allColumnsVisible)}).on("tablesawnext.swipetoggle",function(){a(!0)}).on("tablesawprev.swipetoggle",function(){a(!1)}).on(i.events.destroy+".swipetoggle",function(){var r=n(this);r.removeClass("tablesaw-swipe");o.$toolbar.find(".tablesaw-advance").remove();n(t).off(i.events.resize,l);r.off(".swipetoggle")}).on(i.events.refresh,function(){it();g();l()});l();n(t).on(i.events.resize,l)}var r={hideBtn:"disabled",persistWidths:"tablesaw-fix-persist",hiddenCol:"tablesaw-swipe-cellhidden",persistCol:"tablesaw-swipe-cellpersist",allColumnsVisible:"tablesaw-all-cols-visible"},u={disableTouchEvents:"data-tablesaw-no-touch",ignorerow:"data-tablesaw-ignorerow",subrow:"data-tablesaw-subrow"};n(document).on(i.events.create,function(n,t){t.mode==="swipe"&&f(t,t.$table)})}(),function(){function u(u){function e(){if(!r.show(u[0])){f.css("display","none");return}f.css("display","block");var t=s.find("li").removeClass(h);u.find("thead th").each(function(i){n(this).hasClass("tablesaw-swipe-cellhidden")&&t.eq(i).addClass(h)})}var o=u.data("tablesaw"),f=n('<div class="tablesaw-advance minimap">'),s=n('<ul class="tablesaw-advance-dots">').appendTo(f),h="tablesaw-advance-dots-hide",c=u.data("tablesaw")._getPrimaryHeaderCells();c.each(function(){s.append("<li><i><\/i><\/li>")});f.appendTo(o.$toolbar);e();n(t).on(i.events.resize,e);u.on("tablesawcolumns.minimap",function(){e()}).on(i.events.destroy+".minimap",function(){var r=n(this);o.$toolbar.find(".tablesaw-advance").remove();n(t).off(i.events.resize,e);r.off(".minimap")})}var r={attr:{init:"data-tablesaw-minimap"},show:function(n){var i=n.getAttribute(r.attr.init);return i===""?!0:i&&"matchMedia"in t?t.matchMedia(i).matches:!1}};n(document).on(i.events.create,function(n,t){(t.mode==="swipe"||t.mode==="columntoggle")&&t.$table.is("[ "+r.attr.init+"]")&&u(t.$table)});i.MiniMap=r}(),function(){var r={selectors:{init:"table[data-tablesaw-mode-switch]"},attributes:{excludeMode:"data-tablesaw-mode-exclude"},classes:{main:"tablesaw-modeswitch",toolbar:"tablesaw-bar-section"},modes:["stack","swipe","columntoggle"],init:function(t){var o=n(t),v=o.data("tablesaw"),h=o.attr(r.attributes.excludeMode),c=v.$toolbar,f=n("<div>").addClass(r.classes.main+" "+r.classes.toolbar),e=['<label><span class="abbreviated">'+i.i18n.modeSwitchColumnsAbbreviated+'<\/span><span class="longform">'+i.i18n.modeSwitchColumns+"<\/span>:"],y=o.attr("data-tablesaw-mode"),l,u,a,s;for(e.push('<span class="btn tablesaw-btn"><select>'),u=0,a=r.modes.length;u<a;u++)h&&h.toLowerCase()===r.modes[u]||(l=y===r.modes[u],e.push("<option"+(l?" selected":"")+' value="'+r.modes[u]+'">'+i.i18n.modes[u]+"<\/option>"));e.push("<\/select><\/span><\/label>");f.html(e.join(""));s=c.find(".tablesaw-advance").eq(0);s.length?f.insertBefore(s):f.appendTo(c);f.find(".tablesaw-btn").tablesawbtn();f.find("select").on("change",function(i){return r.onModeChange.call(t,i,n(this).val())})},onModeChange:function(t,i){var u=n(this),f=u.data("tablesaw"),e=f.$toolbar.find("."+r.classes.main);e.remove();f.destroy();u.attr("data-tablesaw-mode",i);u.tablesaw()}};n(t.document).on(i.events.create,function(n,t){t.$table.is(r.selectors.init)&&r.init(t.table)})}(),function(){function t(n){(this.tablesaw=n,this.$table=n.$table,this.attr="data-tablesaw-checkall",this.checkAllSelector="["+this.attr+"]",this.forceCheckedSelector="["+this.attr+"-checked]",this.forceUncheckedSelector="["+this.attr+"-unchecked]",this.checkboxSelector='input[type="checkbox"]',this.$triggers=null,this.$checkboxes=null,this.$table.data(r))||(this.$table.data(r,this),this.init())}var r="tablesawCheckAll";t.prototype._filterCells=function(t){return t.filter(function(){return!n(this).closest("tr").is("[data-tablesaw-subrow],[data-tablesaw-ignorerow]")}).find(this.checkboxSelector).not(this.checkAllSelector)};t.prototype.getCheckboxesForButton=function(t){return this._filterCells(n(n(t).attr(this.attr)))};t.prototype.getCheckboxesForCheckbox=function(t){return this._filterCells(n(n(t).closest("th")[0].cells))};t.prototype.init=function(){var t=this;this.$table.find(this.checkAllSelector).each(function(){var i=n(this);i.is(t.checkboxSelector)?t.addCheckboxEvents(this):t.addButtonEvents(this)})};t.prototype.addButtonEvents=function(t){var i=this;n(t).on("click",function(t){var u,f,e;t.preventDefault();u=i.getCheckboxesForButton(this);f=!0;u.each(function(){this.checked||(f=!1)});e=n(this).is(i.forceCheckedSelector)?!0:n(this).is(i.forceUncheckedSelector)?!1:f?!1:!0;u.each(function(){this.checked=e;n(this).trigger("change."+r)})})};t.prototype.addCheckboxEvents=function(t){var u=this,i;n(t).on("change",function(){var n=this.checked;u.getCheckboxesForCheckbox(this).each(function(){this.checked=n})});i=u.getCheckboxesForCheckbox(t);i.on("change."+r,function(){var n=0,r;i.each(function(){this.checked&&n++});r=n===i.length;t.checked=r;t.indeterminate=n!==0&&!r})};n(document).on(i.events.create,function(n,i){new t(i)});i.CheckAll=t}(),i});
/*! jquery-qrcode v0.14.0 - https://larsjung.de/jquery-qrcode/ */
(function(n){"use strict";function e(t,i,r,u){function h(n,t){return(n-=u,t-=u,n<0||n>=o||t<0||t>=o)?!1:e.isDark(n,t)}function c(n,t,i,r){var e=f.isDark,u=1/s;f.isDark=function(f,o){var s=o*u,h=f*u,c=s+u,l=h+u;return e(f,o)&&(n>c||s>i||t>l||h>r)}}var f={},e=n(r,i),o,s;return e.addData(t),e.make(),u=u||0,o=e.getModuleCount(),s=e.getModuleCount()+2*u,f.text=t,f.level=i,f.version=r,f.moduleCount=s,f.isDark=h,f.addBlank=c,f}function r(n,t,i,r,u){i=Math.max(1,i||1);r=Math.min(40,r||40);for(var f=i;f<=r;f+=1)try{return e(n,t,f,u)}catch(o){}return undefined}function o(n,i,r){var u=r.size,s="bold "+r.mSize*u+"px "+r.fontname,h=t("<canvas/>")[0].getContext("2d");h.font=s;var v=h.measureText(r.label).width,c=r.mSize,l=v/u,o=(1-l)*r.mPosX,e=(1-c)*r.mPosY,y=o+l,a=e+c,f=.01;r.mode===1?n.addBlank(0,e-f,u,a+f):n.addBlank(o-f,e-f,y+f,a+f);i.fillStyle=r.fontcolor;i.font=s;i.fillText(r.label,o*u,e*u+.75*r.mSize*u)}function s(n,t,i){var u=i.size,c=i.image.naturalWidth||1,l=i.image.naturalHeight||1,f=i.mSize,o=f*c/l,s=(1-o)*i.mPosX,e=(1-f)*i.mPosY,a=s+o,h=e+f,r=.01;i.mode===3?n.addBlank(0,e-r,u,h+r):n.addBlank(s-r,e-r,a+r,h+r);t.drawImage(i.image,s*u,e*u,o*u,f*u)}function h(n,i,r){t(r.background).is("img")?i.drawImage(r.background,0,0,r.size,r.size):r.background&&(i.fillStyle=r.background,i.fillRect(r.left,r.top,r.size,r.size));var u=r.mode;u===1||u===2?o(n,i,r):(u===3||u===4)&&s(n,i,r)}function c(n,t,i,r,u,f,e,o){n.isDark(e,o)&&t.rect(r,u,f,f)}function l(n,t,i,r,u,f,e,o,s,h){e?n.moveTo(t+f,i):n.moveTo(t,i);o?(n.lineTo(r-f,i),n.arcTo(r,i,r,u,f)):n.lineTo(r,i);s?(n.lineTo(r,u-f),n.arcTo(r,u,t,u,f)):n.lineTo(r,u);h?(n.lineTo(t+f,u),n.arcTo(t,u,t,i,f)):n.lineTo(t,u);e?(n.lineTo(t,i+f),n.arcTo(t,i,r,i,f)):n.lineTo(t,i)}function a(n,t,i,r,u,f,e,o,s,h){e&&(n.moveTo(t+f,i),n.lineTo(t,i),n.lineTo(t,i+f),n.arcTo(t,i,t+f,i,f));o&&(n.moveTo(r-f,i),n.lineTo(r,i),n.lineTo(r,i+f),n.arcTo(r,i,r-f,i,f));s&&(n.moveTo(r-f,u),n.lineTo(r,u),n.lineTo(r,u-f),n.arcTo(r,u,r-f,u,f));h&&(n.moveTo(t+f,u),n.lineTo(t,u),n.lineTo(t,u-f),n.arcTo(t,u,t+f,u,f))}function v(n,t,i,r,u,f,e,o){var s=n.isDark,d=r+f,g=u+f,nt=i.radius*f,p=e-1,w=e+1,b=o-1,k=o+1,tt=s(e,o),it=s(p,b),h=s(p,o),rt=s(p,k),c=s(e,k),ut=s(w,k),v=s(w,o),ft=s(w,b),y=s(e,b);tt?l(t,r,u,d,g,nt,!h&&!y,!h&&!c,!v&&!c,!v&&!y):a(t,r,u,d,g,nt,h&&y&&it,h&&c&&rt,v&&c&&ut,v&&y&&ft)}function y(n,i,r){var e=n.moduleCount,o=r.size/e,s=c,u,f,h;for(r.radius>0&&r.radius<=.5&&(s=v),i.beginPath(),u=0;u<e;u+=1)for(f=0;f<e;f+=1){var l=r.left+f*o,a=r.top+u*o,y=o;s(n,i,r,l,a,y,u,f)}t(r.fill).is("img")?(i.strokeStyle="rgba(0,0,0,0.5)",i.lineWidth=2,i.stroke(),h=i.globalCompositeOperation,i.globalCompositeOperation="destination-out",i.fill(),i.globalCompositeOperation=h,i.clip(),i.drawImage(r.fill,0,0,r.size,r.size),i.restore()):(i.fillStyle=r.fill,i.fill())}function u(n,i){var u=r(i.text,i.ecLevel,i.minVersion,i.maxVersion,i.quiet),f,e;return u?(f=t(n).data("qrcode",u),e=f[0].getContext("2d"),h(u,e,i),y(u,e,i),f):null}function f(n){var i=t("<canvas/>").attr("width",n.size).attr("height",n.size);return u(i,n)}function p(n){return t("<img/>").attr("src",f(n)[0].toDataURL("image/png"))}function w(n){var e=r(n.text,n.ecLevel,n.minVersion,n.maxVersion,n.quiet);if(!e)return null;var o=n.size,c=n.background,l=Math.floor,s=e.moduleCount,i=l(o/s),a=l(.5*(o-i*s)),u,f,v={position:"relative",left:0,top:0,padding:0,margin:0,width:o,height:o},y={position:"absolute",padding:0,margin:0,width:i,height:i,"background-color":n.fill},h=t("<div/>").data("qrcode",e).css(v);for(c&&h.css("background-color",c),u=0;u<s;u+=1)for(f=0;f<s;f+=1)e.isDark(u,f)&&t("<div/>").css(y).css({left:a+f*i,top:a+u*i}).appendTo(h);return h}function b(n){return i&&n.render==="canvas"?f(n):i&&n.render==="image"?p(n):w(n)}var t=window.jQuery,i=function(){var n=document.createElement("canvas");return!!(n.getContext&&n.getContext("2d"))}(),k={render:"canvas",minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,fill:"#000",background:null,text:"no text",radius:0,quiet:0,mode:0,mSize:.1,mPosX:.5,mPosY:.5,label:"no label",fontname:"sans",fontcolor:"#000",image:null};t.fn.qrcode=function(n){var i=t.extend({},k,n);return this.each(function(n,r){r.nodeName.toLowerCase()==="canvas"?u(r,i):t(r).append(b(i))})}})(function(){var n=function(){function f(n,t){if(typeof n.length=="undefined")throw new Error(n.length+"/"+t);var u=function(){for(var i=0,u,r;i<n.length&&n[i]==0;)i+=1;for(u=new Array(n.length-i+t),r=0;r<n.length-i;r+=1)u[r]=n[r+i];return u}(),r={};return r.getAt=function(n){return u[n]},r.getLength=function(){return u.length},r.multiply=function(n){for(var t,e=new Array(r.getLength()+n.getLength()-1),u=0;u<r.getLength();u+=1)for(t=0;t<n.getLength();t+=1)e[u+t]^=i.gexp(i.glog(r.getAt(u))+i.glog(n.getAt(t)));return f(e,0)},r.mod=function(n){var e,u,t;if(r.getLength()-n.getLength()<0)return r;for(e=i.glog(r.getAt(0))-i.glog(n.getAt(0)),u=new Array(r.getLength()),t=0;t<r.getLength();t+=1)u[t]=r.getAt(t);for(t=0;t<n.getLength();t+=1)u[t]^=i.gexp(i.glog(n.getAt(t))+e);return f(u,0).mod(n)},r}var e=function(n,t){var k=236,d=17,l=n,p=u[t],i=null,e=0,a=null,w=[],o={},b=function(n,t){e=l*4+17;i=function(n){for(var i,r=new Array(n),t=0;t<n;t+=1)for(r[t]=new Array(n),i=0;i<n;i+=1)r[t][i]=null;return r}(e);v(0,0);v(e-7,0);v(0,e-7);tt();nt();rt(n,t);l>=7&&it(n);a==null&&(a=et(l,p,w));ut(a,t)},v=function(n,t){for(var u,r=-1;r<=7;r+=1)if(!(n+r<=-1)&&!(e<=n+r))for(u=-1;u<=7;u+=1)t+u<=-1||e<=t+u||(i[n+r][t+u]=0<=r&&r<=6&&(u==0||u==6)||0<=u&&u<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=u&&u<=4?!0:!1)},g=function(){for(var t,i=0,u=0,n=0;n<8;n+=1)b(!0,n),t=r.getLostPoint(o),(n==0||i>t)&&(i=t,u=n);return u},nt=function(){for(var t,n=8;n<e-8;n+=1)i[n][6]==null&&(i[n][6]=n%2==0);for(t=8;t<e-8;t+=1)i[6][t]==null&&(i[6][t]=t%2==0)},tt=function(){for(var f,o,s,n,t,u=r.getPatternPosition(l),e=0;e<u.length;e+=1)for(f=0;f<u.length;f+=1)if(o=u[e],s=u[f],i[o][s]==null)for(n=-2;n<=2;n+=1)for(t=-2;t<=2;t+=1)i[o+n][s+t]=n==-2||n==2||t==-2||t==2||n==0&&t==0?!0:!1},it=function(n){for(var u,f=r.getBCHTypeNumber(l),t=0;t<18;t+=1)u=!n&&(f>>t&1)==1,i[Math.floor(t/3)][t%3+e-11]=u;for(t=0;t<18;t+=1)u=!n&&(f>>t&1)==1,i[t%3+e-11][Math.floor(t/3)]=u},rt=function(n,t){for(var f,s=p<<3|t,o=r.getBCHTypeInfo(s),u=0;u<15;u+=1)f=!n&&(o>>u&1)==1,u<6?i[u][8]=f:u<8?i[u+1][8]=f:i[e-15+u][8]=f;for(u=0;u<15;u+=1)f=!n&&(o>>u&1)==1,u<8?i[8][e-u-1]=f:u<9?i[8][15-u]=f:i[8][14-u]=f;i[e-8][8]=!n},ut=function(n,t){for(var o,s,a,h=-1,u=e-1,c=7,l=0,v=r.getMaskFunction(t),f=e-1;f>0;f-=2)for(f==6&&(f-=1);;){for(o=0;o<2;o+=1)i[u][f-o]==null&&(s=!1,l<n.length&&(s=(n[l]>>>c&1)==1),a=v(u,f-o),a&&(s=!s),i[u][f-o]=s,c-=1,c==-1&&(l+=1,c=7));if(u+=h,u<0||e<=u){u-=h;h=-h;break}}},ft=function(n,t){for(var s,v,p,w,c,h,i,b=0,l=0,a=0,e=new Array(t.length),o=new Array(t.length),u=0;u<t.length;u+=1){for(s=t[u].dataCount,v=t[u].totalCount-s,l=Math.max(l,s),a=Math.max(a,v),e[u]=new Array(s),i=0;i<e[u].length;i+=1)e[u][i]=255&n.getBuffer()[i+b];b+=s;var y=r.getErrorCorrectPolynomial(v),d=f(e[u],y.getLength()-1),k=d.mod(y);for(o[u]=new Array(y.getLength()-1),i=0;i<o[u].length;i+=1)p=i+k.getLength()-o[u].length,o[u][i]=p>=0?k.getAt(p):0}for(w=0,i=0;i<t.length;i+=1)w+=t[i].totalCount;for(c=new Array(w),h=0,i=0;i<l;i+=1)for(u=0;u<t.length;u+=1)i<e[u].length&&(c[h]=e[u][i],h+=1);for(i=0;i<a;i+=1)for(u=0;u<t.length;u+=1)i<o[u].length&&(c[h]=o[u][i],h+=1);return c},et=function(n,t,i){for(var o,e,c=s.getRSBlocks(n,t),u=h(),f=0;f<i.length;f+=1)o=i[f],u.put(o.getMode(),4),u.put(o.getLength(),r.getLengthInBits(o.getMode(),n)),o.write(u);for(e=0,f=0;f<c.length;f+=1)e+=c[f].dataCount;if(u.getLengthInBits()>e*8)throw new Error("code length overflow. ("+u.getLengthInBits()+">"+e*8+")");for(u.getLengthInBits()+4<=e*8&&u.put(0,4);u.getLengthInBits()%8!=0;)u.putBit(!1);for(;;){if(u.getLengthInBits()>=e*8)break;if(u.put(k,8),u.getLengthInBits()>=e*8)break;u.put(d,8)}return ft(u,c)};return o.addData=function(n){var t=c(n);w.push(t);a=null},o.isDark=function(n,t){if(n<0||e<=n||t<0||e<=t)throw new Error(n+","+t);return i[n][t]},o.getModuleCount=function(){return e},o.make=function(){b(!1,g())},o.createTableTag=function(n,t){var i,r,u;for(n=n||2,t=typeof t=="undefined"?n*4:t,i="",i+='<table style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: "+t+"px;",i+='">',i+="<tbody>",r=0;r<o.getModuleCount();r+=1){for(i+="<tr>",u=0;u<o.getModuleCount();u+=1)i+='<td style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: 0px;",i+=" width: "+n+"px;",i+=" height: "+n+"px;",i+=" background-color: ",i+=o.isDark(r,u)?"#000000":"#ffffff",i+=";",i+='"/>';i+="<\/tr>"}return i+="<\/tbody>",i+"<\/table>"},o.createImgTag=function(n,t){n=n||2;t=typeof t=="undefined"?n*4:t;var r=o.getModuleCount()*n+t*2,i=t,u=r-t;return y(r,r,function(t,r){if(i<=t&&t<u&&i<=r&&r<u){var f=Math.floor((t-i)/n),e=Math.floor((r-i)/n);return o.isDark(e,f)?0:1}return 1})},o};e.stringToBytes=function(n){for(var r,i=[],t=0;t<n.length;t+=1)r=n.charCodeAt(t),i.push(r&255);return i};e.createStringToBytes=function(n,t){var i=function(){for(var f=a(n),i=function(){var n=f.read();if(n==-1)throw new Error;return n},r=0,e={},u;;){if(u=f.read(),u==-1)break;var o=i(),s=i(),h=i(),c=String.fromCharCode(u<<8|o),l=s<<8|h;e[c]=l;r+=1}if(r!=t)throw new Error(r+" != "+t);return e}(),r="?".charCodeAt(0);return function(n){for(var e,t,u=[],f=0;f<n.length;f+=1)e=n.charCodeAt(f),e<128?u.push(e):(t=i[n.charAt(f)],typeof t=="number"?(t&255)==t?u.push(t):(u.push(t>>>8),u.push(t&255)):u.push(r));return u}};var n={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},u={L:1,M:0,Q:3,H:2},t={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},r=function(){var s=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],e=1335,o=7973,h=21522,r={},u=function(n){for(var t=0;n!=0;)t+=1,n>>>=1;return t};return r.getBCHTypeInfo=function(n){for(var t=n<<10;u(t)-u(e)>=0;)t^=e<<u(t)-u(e);return(n<<10|t)^h},r.getBCHTypeNumber=function(n){for(var t=n<<12;u(t)-u(o)>=0;)t^=o<<u(t)-u(o);return n<<12|t},r.getPatternPosition=function(n){return s[n-1]},r.getMaskFunction=function(n){switch(n){case t.PATTERN000:return function(n,t){return(n+t)%2==0};case t.PATTERN001:return function(n){return n%2==0};case t.PATTERN010:return function(n,t){return t%3==0};case t.PATTERN011:return function(n,t){return(n+t)%3==0};case t.PATTERN100:return function(n,t){return(Math.floor(n/2)+Math.floor(t/3))%2==0};case t.PATTERN101:return function(n,t){return n*t%2+n*t%3==0};case t.PATTERN110:return function(n,t){return(n*t%2+n*t%3)%2==0};case t.PATTERN111:return function(n,t){return(n*t%3+(n+t)%2)%2==0};default:throw new Error("bad maskPattern:"+n);}},r.getErrorCorrectPolynomial=function(n){for(var t=f([1],0),r=0;r<n;r+=1)t=t.multiply(f([1,i.gexp(r)],0));return t},r.getLengthInBits=function(t,i){if(1<=i&&i<10)switch(t){case n.MODE_NUMBER:return 10;case n.MODE_ALPHA_NUM:return 9;case n.MODE_8BIT_BYTE:return 8;case n.MODE_KANJI:return 8;default:throw new Error("mode:"+t);}else if(i<27)switch(t){case n.MODE_NUMBER:return 12;case n.MODE_ALPHA_NUM:return 11;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 10;default:throw new Error("mode:"+t);}else if(i<41)switch(t){case n.MODE_NUMBER:return 14;case n.MODE_ALPHA_NUM:return 13;case n.MODE_8BIT_BYTE:return 16;case n.MODE_KANJI:return 12;default:throw new Error("mode:"+t);}else throw new Error("type:"+i);},r.getLostPoint=function(n){for(var s,c,u,f,e,h,t,l,r=n.getModuleCount(),o=0,i=0;i<r;i+=1)for(t=0;t<r;t+=1){for(s=0,c=n.isDark(i,t),u=-1;u<=1;u+=1)if(!(i+u<0)&&!(r<=i+u))for(f=-1;f<=1;f+=1)t+f<0||r<=t+f||(u!=0||f!=0)&&c==n.isDark(i+u,t+f)&&(s+=1);s>5&&(o+=3+s-5)}for(i=0;i<r-1;i+=1)for(t=0;t<r-1;t+=1)e=0,n.isDark(i,t)&&(e+=1),n.isDark(i+1,t)&&(e+=1),n.isDark(i,t+1)&&(e+=1),n.isDark(i+1,t+1)&&(e+=1),(e==0||e==4)&&(o+=3);for(i=0;i<r;i+=1)for(t=0;t<r-6;t+=1)n.isDark(i,t)&&!n.isDark(i,t+1)&&n.isDark(i,t+2)&&n.isDark(i,t+3)&&n.isDark(i,t+4)&&!n.isDark(i,t+5)&&n.isDark(i,t+6)&&(o+=40);for(t=0;t<r;t+=1)for(i=0;i<r-6;i+=1)n.isDark(i,t)&&!n.isDark(i+1,t)&&n.isDark(i+2,t)&&n.isDark(i+3,t)&&n.isDark(i+4,t)&&!n.isDark(i+5,t)&&n.isDark(i+6,t)&&(o+=40);for(h=0,t=0;t<r;t+=1)for(i=0;i<r;i+=1)n.isDark(i,t)&&(h+=1);return l=Math.abs(100*h/r/r-50)/5,o+l*10},r}(),i=function(){for(var i,t=new Array(256),r=new Array(256),n=0;n<8;n+=1)t[n]=1<<n;for(n=8;n<256;n+=1)t[n]=t[n-4]^t[n-5]^t[n-6]^t[n-8];for(n=0;n<255;n+=1)r[t[n]]=n;return i={},i.glog=function(n){if(n<1)throw new Error("glog("+n+")");return r[n]},i.gexp=function(n){while(n<0)n+=255;while(n>=256)n-=255;return t[n]},i}();var s=function(){var n=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],i=function(n,t){var i={};return i.totalCount=n,i.dataCount=t,i},t={},r=function(t,i){switch(i){case u.L:return n[(t-1)*4+0];case u.M:return n[(t-1)*4+1];case u.Q:return n[(t-1)*4+2];case u.H:return n[(t-1)*4+3];default:return undefined}};return t.getRSBlocks=function(n,t){var f=r(n,t),s,e,u,o;if(typeof f=="undefined")throw new Error("bad rs block @ typeNumber:"+n+"/errorCorrectLevel:"+t);for(s=f.length/3,e=[],u=0;u<s;u+=1){var h=f[u*3+0],c=f[u*3+1],l=f[u*3+2];for(o=0;o<h;o+=1)e.push(i(c,l))}return e},t}(),h=function(){var t=[],i=0,n={};return n.getBuffer=function(){return t},n.getAt=function(n){var i=Math.floor(n/8);return(t[i]>>>7-n%8&1)==1},n.put=function(t,i){for(var r=0;r<i;r+=1)n.putBit((t>>>i-r-1&1)==1)},n.getLengthInBits=function(){return i},n.putBit=function(n){var r=Math.floor(i/8);t.length<=r&&t.push(0);n&&(t[r]|=128>>>i%8);i+=1},n},c=function(t){var u=n.MODE_8BIT_BYTE,f=t,r=e.stringToBytes(t),i={};return i.getMode=function(){return u},i.getLength=function(){return r.length},i.write=function(n){for(var t=0;t<r.length;t+=1)n.put(r[t],8)},i},o=function(){var t=[],n={};return n.writeByte=function(n){t.push(n&255)},n.writeShort=function(t){n.writeByte(t);n.writeByte(t>>>8)},n.writeBytes=function(t,i,r){i=i||0;r=r||t.length;for(var u=0;u<r;u+=1)n.writeByte(t[u+i])},n.writeString=function(t){for(var i=0;i<t.length;i+=1)n.writeByte(t.charCodeAt(i))},n.toByteArray=function(){return t},n.toString=function(){var i="",n;for(i+="[",n=0;n<t.length;n+=1)n>0&&(i+=","),i+=t[n];return i+"]"},n},l=function(){var t=0,n=0,r=0,u="",i={},f=function(n){u+=String.fromCharCode(e(n&63))},e=function(n){if(!(n<0)){if(n<26)return 65+n;if(n<52)return n- -71;if(n<62)return n-4;if(n==62)return 43;if(n==63)return 47}throw new Error("n:"+n);};return i.writeByte=function(i){for(t=t<<8|i&255,n+=8,r+=1;n>=6;)f(t>>>n-6),n-=6},i.flush=function(){var e,i;if(n>0&&(f(t<<6-n),t=0,n=0),r%3!=0)for(e=3-r%3,i=0;i<e;i+=1)u+="="},i.toString=function(){return u},i},a=function(n){var u=n,i=0,r=0,t=0,f={},e;return f.read=function(){for(var n,f;t<8;){if(i>=u.length){if(t==0)return-1;throw new Error("unexpected end of file./"+t);}if(n=u.charAt(i),i+=1,n=="=")return t=0,-1;n.match(/^\s$/)||(r=r<<6|e(n.charCodeAt(0)),t+=6)}return f=r>>>t-8&255,t-=8,f},e=function(n){if(65<=n&&n<=90)return n-65;if(97<=n&&n<=122)return n-71;if(48<=n&&n<=57)return n- -4;if(n==43)return 62;if(n==47)return 63;throw new Error("c:"+n);},f},v=function(n,t){var r=n,f=t,i=new Array(n*t),u={};u.setPixel=function(n,t,u){i[t*r+n]=u};u.write=function(n){var u,i,t;for(n.writeString("GIF87a"),n.writeShort(r),n.writeShort(f),n.writeByte(128),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(0),n.writeByte(255),n.writeByte(255),n.writeByte(255),n.writeString(","),n.writeShort(0),n.writeShort(0),n.writeShort(r),n.writeShort(f),n.writeByte(0),u=2,i=s(u),n.writeByte(u),t=0;i.length-t>255;)n.writeByte(255),n.writeBytes(i,t,255),t+=255;n.writeByte(i.length-t);n.writeBytes(i,t,i.length-t);n.writeByte(0);n.writeString(";")};var e=function(n){var u=n,t=0,i=0,r={};return r.write=function(n,r){if(n>>>r!=0)throw new Error("length over");while(t+r>=8)u.writeByte(255&(n<<t|i)),r-=8-t,n>>>=8-t,i=0,t=0;i=n<<t|i;t=t+r},r.flush=function(){t>0&&u.writeByte(i)},r},s=function(n){for(var v,f,s,r,c,l=1<<n,y=(1<<n)+1,u=n+1,t=h(),a=0;a<l;a+=1)t.add(String.fromCharCode(a));for(t.add(String.fromCharCode(l)),t.add(String.fromCharCode(y)),v=o(),f=e(v),f.write(l,u),s=0,r=String.fromCharCode(i[s]),s+=1;s<i.length;)c=String.fromCharCode(i[s]),s+=1,t.contains(r+c)?r=r+c:(f.write(t.indexOf(r),u),t.size()<4095&&(t.size()==1<<u&&(u+=1),t.add(r+c)),r=c);return f.write(t.indexOf(r),u),f.write(y,u),f.flush(),v.toByteArray()},h=function(){var t={},i=0,n={};return n.add=function(r){if(n.contains(r))throw new Error("dup key:"+r);t[r]=i;i+=1},n.size=function(){return i},n.indexOf=function(n){return t[n]},n.contains=function(n){return typeof t[n]!="undefined"},n};return u},y=function(n,t,i,r){for(var f,c,s,a,h,u,y=v(n,t),e=0;e<t;e+=1)for(f=0;f<n;f+=1)y.setPixel(f,e,i(f,e));for(c=o(),y.write(c),s=l(),a=c.toByteArray(),h=0;h<a.length;h+=1)s.writeByte(a[h]);return s.flush(),u="",u+="<img",u+=' src="',u+="data:image/gif;base64,",u+=s,u+='"',u+=' width="',u+=n,u+='"',u+=' height="',u+=t,u+='"',r&&(u+=' alt="',u+=r,u+='"'),u+"/>"};return e}();return function(n){typeof define=="function"&&define.amd?define([],n):typeof exports=="object"&&(module.exports=n())}(function(){return n}),!function(n){n.stringToBytes=function(n){function t(n){for(var t,i=[],r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i.push(t):t<2048?i.push(192|t>>6,128|t&63):t<55296||t>=57344?i.push(224|t>>12,128|t>>6&63,128|t&63):(r++,t=65536+((t&1023)<<10|n.charCodeAt(r)&1023),i.push(240|t>>18,128|t>>12&63,128|t>>6&63,128|t&63));return i}return t(n)}}(n),n}());SMSLink=SMSLink||{};SMSLink.detector=SMSLink.detector||function(){var t=navigator.userAgent,n,r,i;return t.match(/iPad/i)||t.match(/iPhone/i)?(n="iOS",i=t.indexOf("OS ")):t.match(/Android/i)?(n="Android",i=t.indexOf("Android ")):n=null,n==="iOS"&&i>-1?r=t.substr(i+3,3).replace("_","."):n==="Android"&&i>-1?n=t.substr(i+8,3):ver=null,{version:function(){return r},os:function(){return n},isMobile:function(){return n!==null}}};SMSLink=SMSLink||{};SMSLink.link=SMSLink.link||function(){function n(){SMSLink.linkDetector||(SMSLink.linkDetector=new SMSLink.detector)}return n(),{replaceAll:function(){this.replaceWithSelector("[href^='sms:']")},replaceWithSelector:function(n){elements=document.querySelectorAll(n);for(i in elements)this.replace(elements[i])},replace:function(n){if(n.href){replaceBody=!1;switch(SMSLink.linkDetector.os()){case"iOS":replaceBody=parseFloat(SMSLink.linkDetector.version())<=8?";":"&"}replaceBody&&(n.href=n.href.replace(/\?body=/,replaceBody+"body="))}}}},function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"&&typeof require=="function"?n(require("jquery")):n(jQuery)}(function(n){"use strict";function i(t,r){var u=this;u.element=t;u.el=n(t);u.suggestions=[];u.badQueries=[];u.selectedIndex=-1;u.currentValue=u.element.value;u.timeoutId=null;u.cachedResponse={};u.onChangeTimeout=null;u.onChange=null;u.isLocal=!1;u.suggestionsContainer=null;u.noSuggestionsContainer=null;u.options=n.extend(!0,{},i.defaults,r);u.classes={selected:"autocomplete-selected",suggestion:"autocomplete-suggestion"};u.hint=null;u.hintValue="";u.selection=null;u.initialize();u.setOptions(r)}function f(n,t,i){return n.value.toLowerCase().indexOf(i)!==-1}function e(n){return typeof n=="string"?JSON.parse(n):n}function o(n,t){if(!t)return n.value;var i="("+u.escapeRegExChars(t)+")";return n.value.replace(new RegExp(i,"gi"),"<strong>$1<\/strong>").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&lt;(\/?strong)&gt;/g,"<$1>")}function s(n,t){return'<div class="autocomplete-group">'+t+"<\/div>"}var u=function(){return{escapeRegExChars:function(n){return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},createNode:function(n){var t=document.createElement("div");return t.className=n,t.style.position="absolute",t.style.display="none",t}}}(),t={ESC:27,TAB:9,RETURN:13,LEFT:37,UP:38,RIGHT:39,DOWN:40},r=n.noop;i.utils=u;n.Autocomplete=i;i.defaults={ajaxSettings:{},autoSelectFirst:!1,appendTo:"body",serviceUrl:null,lookup:null,onSelect:null,onHint:null,width:"auto",minChars:1,maxHeight:300,deferRequestBy:0,params:{},formatResult:o,formatGroup:s,delimiter:null,zIndex:9999,type:"GET",noCache:!1,onSearchStart:r,onSearchComplete:r,onSearchError:r,preserveInput:!1,containerClass:"autocomplete-suggestions",tabDisabled:!1,dataType:"text",currentRequest:null,triggerSelectOnValidInput:!0,preventBadQueries:!0,lookupFilter:f,paramName:"query",transformResult:e,showNoSuggestionNotice:!1,noSuggestionNotice:"No results",orientation:"bottom",forceFixPosition:!1};i.prototype={initialize:function(){var t=this,f="."+t.classes.suggestion,e=t.classes.selected,u=t.options,r;t.element.setAttribute("autocomplete","off");t.noSuggestionsContainer=n('<div class="autocomplete-no-suggestion"><\/div>').html(this.options.noSuggestionNotice).get(0);t.suggestionsContainer=i.utils.createNode(u.containerClass);r=n(t.suggestionsContainer);r.appendTo(u.appendTo||"body");u.width!=="auto"&&r.css("width",u.width);r.on("mouseover.autocomplete",f,function(){t.activate(n(this).data("index"))});r.on("mouseout.autocomplete",function(){t.selectedIndex=-1;r.children("."+e).removeClass(e)});r.on("click.autocomplete",f,function(){t.select(n(this).data("index"))});r.on("click.autocomplete",function(){clearTimeout(t.blurTimeoutId)});t.fixPositionCapture=function(){t.visible&&t.fixPosition()};n(window).on("resize.autocomplete",t.fixPositionCapture);t.el.on("keydown.autocomplete",function(n){t.onKeyPress(n)});t.el.on("keyup.autocomplete",function(n){t.onKeyUp(n)});t.el.on("blur.autocomplete",function(){t.onBlur()});t.el.on("focus.autocomplete",function(){t.onFocus()});t.el.on("change.autocomplete",function(n){t.onKeyUp(n)});t.el.on("input.autocomplete",function(n){t.onKeyUp(n)})},onFocus:function(){var n=this;n.disabled||(n.fixPosition(),n.el.val().length>=n.options.minChars&&n.onValueChange())},onBlur:function(){var t=this,i=t.options,r=t.el.val(),u=t.getQuery(r);t.blurTimeoutId=setTimeout(function(){t.element!==document.activeElement&&t.hide();t.selection&&t.currentValue!==u&&(i.onInvalidateSelection||n.noop).call(t.element)},200)},abortAjax:function(){var n=this;n.currentRequest&&(n.currentRequest.abort(),n.currentRequest=null)},setOptions:function(t){var r=this,i=n.extend({},r.options,t);r.isLocal=Array.isArray(i.lookup);r.isLocal&&(i.lookup=r.verifySuggestionsFormat(i.lookup));i.orientation=r.validateOrientation(i.orientation,"bottom");n(r.suggestionsContainer).css({"max-height":i.maxHeight+"px",width:i.width+"px","z-index":i.zIndex});this.options=i},clearCache:function(){this.cachedResponse={};this.badQueries=[]},clear:function(){this.clearCache();this.currentValue="";this.suggestions=[]},disable:function(){var n=this;n.disabled=!0;clearTimeout(n.onChangeTimeout);n.abortAjax()},enable:function(){this.disabled=!1},fixPosition:function(){var t=this,i=n(t.suggestionsContainer),f=i.parent().get(0),a,s;if(f===document.body||t.options.forceFixPosition){var e=t.options.orientation,o=i.outerHeight(),h=t.el.outerHeight(),u=t.el.offset(),r={top:u.top,left:u.left};if(e==="auto"){var v=n(window).height(),c=n(window).scrollTop(),l=-c+u.top-o,y=c+v-(u.top+h+o);e=Math.max(l,y)===l?"top":"bottom"}r.top+=e==="top"?-o:h;f!==document.body&&(a=i.css("opacity"),t.visible||i.css("opacity",0).show(),s=i.offsetParent().offset(),r.top-=s.top,r.top+=f.scrollTop,r.left-=s.left,t.visible||i.css("opacity",a).hide());t.options.width==="auto"&&(r.width=t.el.outerWidth()+"px");i.css(r)}},isCursorAtEnd:function(){var i=this,n=i.el.val().length,r=i.element.selectionStart,t;return typeof r=="number"?r===n:document.selection?(t=document.selection.createRange(),t.moveStart("character",-n),n===t.text.length):!0},onKeyPress:function(n){var i=this;if(!i.disabled&&!i.visible&&n.which===t.DOWN&&i.currentValue){i.suggest();return}if(!i.disabled&&i.visible){switch(n.which){case t.ESC:i.el.val(i.currentValue);i.hide();break;case t.RIGHT:if(i.hint&&i.options.onHint&&i.isCursorAtEnd()){i.selectHint();break}return;case t.TAB:if(i.hint&&i.options.onHint){i.selectHint();return}if(i.selectedIndex===-1){i.hide();return}if(i.select(i.selectedIndex),i.options.tabDisabled===!1)return;break;case t.RETURN:if(i.selectedIndex===-1){i.hide();return}i.select(i.selectedIndex);break;case t.UP:i.moveUp();break;case t.DOWN:i.moveDown();break;default:return}n.stopImmediatePropagation();n.preventDefault()}},onKeyUp:function(n){var i=this;if(!i.disabled){switch(n.which){case t.UP:case t.DOWN:return}clearTimeout(i.onChangeTimeout);i.currentValue!==i.el.val()&&(i.findBestHint(),i.options.deferRequestBy>0?i.onChangeTimeout=setTimeout(function(){i.onValueChange()},i.options.deferRequestBy):i.onValueChange())}},onValueChange:function(){if(this.ignoreValueChange){this.ignoreValueChange=!1;return}var t=this,r=t.options,u=t.el.val(),i=t.getQuery(u);if(t.selection&&t.currentValue!==i&&(t.selection=null,(r.onInvalidateSelection||n.noop).call(t.element)),clearTimeout(t.onChangeTimeout),t.currentValue=u,t.selectedIndex=-1,r.triggerSelectOnValidInput&&t.isExactMatch(i)){t.select(0);return}i.length<r.minChars?t.hide():t.getSuggestions(i)},isExactMatch:function(n){var t=this.suggestions;return t.length===1&&t[0].value.toLowerCase()===n.toLowerCase()},getQuery:function(n){var i=this.options.delimiter,t;return i?(t=n.split(i),t[t.length-1].trim()):n},getSuggestionsLocal:function(t){var f=this,r=f.options,e=t.toLowerCase(),o=r.lookupFilter,u=parseInt(r.lookupLimit,10),i;return i={suggestions:n.grep(r.lookup,function(n){return o(n,t,e)})},u&&i.suggestions.length>u&&(i.suggestions=i.suggestions.slice(0,u)),i},getSuggestions:function(t){var u,i=this,r=i.options,f=r.serviceUrl,e,o,s;if(r.params[r.paramName]=t,r.onSearchStart.call(i.element,r.params)!==!1){if(e=r.ignoreParams?null:r.params,typeof r.lookup=="function"){r.lookup(t,function(n){i.suggestions=n.suggestions;i.suggest();r.onSearchComplete.call(i.element,t,n.suggestions)});return}i.isLocal?u=i.getSuggestionsLocal(t):(typeof f=="function"&&(f=f.call(i.element,t)),o=f+"?"+n.param(e||{}),u=i.cachedResponse[o]);u&&Array.isArray(u.suggestions)?(i.suggestions=u.suggestions,i.suggest(),r.onSearchComplete.call(i.element,t,u.suggestions)):i.isBadQuery(t)?r.onSearchComplete.call(i.element,t,[]):(i.abortAjax(),s={url:f,data:e,type:r.type,dataType:r.dataType},n.extend(s,r.ajaxSettings),i.currentRequest=n.ajax(s).done(function(n){var u;i.currentRequest=null;u=r.transformResult(n,t);i.processResponse(u,t,o);r.onSearchComplete.call(i.element,t,u.suggestions)}).fail(function(n,u,f){r.onSearchError.call(i.element,t,n,u,f)}))}},isBadQuery:function(n){if(!this.options.preventBadQueries)return!1;for(var t=this.badQueries,i=t.length;i--;)if(n.indexOf(t[i])===0)return!0;return!1},hide:function(){var t=this,i=n(t.suggestionsContainer);typeof t.options.onHide=="function"&&t.visible&&t.options.onHide.call(t.element,i);t.visible=!1;t.selectedIndex=-1;clearTimeout(t.onChangeTimeout);n(t.suggestionsContainer).hide();t.onHint(null)},suggest:function(){if(!this.suggestions.length){this.options.showNoSuggestionNotice?this.noSuggestions():this.hide();return}var t=this,i=t.options,o=i.groupBy,c=i.formatResult,u=t.getQuery(t.currentValue),s=t.classes.suggestion,l=t.classes.selected,r=n(t.suggestionsContainer),a=n(t.noSuggestionsContainer),h=i.beforeRender,f="",e,v=function(n){var t=n.data[o];return e===t?"":(e=t,i.formatGroup(n,e))};if(i.triggerSelectOnValidInput&&t.isExactMatch(u)){t.select(0);return}n.each(t.suggestions,function(n,t){o&&(f+=v(t,u,n));f+='<div class="'+s+'" data-index="'+n+'">'+c(t,u,n)+"<\/div>"});this.adjustContainerWidth();a.detach();r.html(f);typeof h=="function"&&h.call(t.element,r,t.suggestions);t.fixPosition();r.show();i.autoSelectFirst&&(t.selectedIndex=0,r.scrollTop(0),r.children("."+s).first().addClass(l));t.visible=!0;t.findBestHint()},noSuggestions:function(){var t=this,r=t.options.beforeRender,i=n(t.suggestionsContainer),u=n(t.noSuggestionsContainer);this.adjustContainerWidth();u.detach();i.empty();i.append(u);typeof r=="function"&&r.call(t.element,i,t.suggestions);t.fixPosition();i.show();t.visible=!0},adjustContainerWidth:function(){var t=this,r=t.options,i,u=n(t.suggestionsContainer);r.width==="auto"?(i=t.el.outerWidth(),u.css("width",i>0?i:300)):r.width==="flex"&&u.css("width","")},findBestHint:function(){var t=this,i=t.el.val().toLowerCase(),r=null;if(i){n.each(t.suggestions,function(n,t){var u=t.value.toLowerCase().indexOf(i)===0;return u&&(r=t),!u});t.onHint(r)}},onHint:function(n){var t=this,r=t.options.onHint,i="";n&&(i=t.currentValue+n.value.substr(t.currentValue.length));t.hintValue!==i&&(t.hintValue=i,t.hint=n,typeof r=="function"&&r.call(t.element,i))},verifySuggestionsFormat:function(t){return t.length&&typeof t[0]=="string"?n.map(t,function(n){return{value:n,data:null}}):t},validateOrientation:function(t,i){return t=(t||"").trim().toLowerCase(),n.inArray(t,["auto","bottom","top"])===-1&&(t=i),t},processResponse:function(n,t,i){var r=this,u=r.options;(n.suggestions=r.verifySuggestionsFormat(n.suggestions),u.noCache||(r.cachedResponse[i]=n,u.preventBadQueries&&!n.suggestions.length&&r.badQueries.push(t)),t===r.getQuery(r.currentValue))&&(r.suggestions=n.suggestions,r.suggest())},activate:function(t){var i=this,r,u=i.classes.selected,f=n(i.suggestionsContainer),e=f.find("."+i.classes.suggestion);return(f.find("."+u).removeClass(u),i.selectedIndex=t,i.selectedIndex!==-1&&e.length>i.selectedIndex)?(r=e.get(i.selectedIndex),n(r).addClass(u),r):null},selectHint:function(){var t=this,i=n.inArray(t.hint,t.suggestions);t.select(i)},select:function(n){var t=this;t.hide();t.onSelect(n)},moveUp:function(){var t=this;if(t.selectedIndex!==-1){if(t.selectedIndex===0){n(t.suggestionsContainer).children("."+t.classes.suggestion).first().removeClass(t.classes.selected);t.selectedIndex=-1;t.ignoreValueChange=!1;t.el.val(t.currentValue);t.findBestHint();return}t.adjustScroll(t.selectedIndex-1)}},moveDown:function(){var n=this;n.selectedIndex!==n.suggestions.length-1&&n.adjustScroll(n.selectedIndex+1)},adjustScroll:function(t){var i=this,u=i.activate(t),r,f,h,e,o,s;if(u){e=n(u).outerHeight();r=u.offsetTop;f=n(i.suggestionsContainer).scrollTop();h=f+i.options.maxHeight-e;r<f?n(i.suggestionsContainer).scrollTop(r):r>h&&n(i.suggestionsContainer).scrollTop(r-i.options.maxHeight+e);i.options.preserveInput||(i.ignoreValueChange=!0,o=i.getValue(i.suggestions[t].value),i.el.val(o),s=i.options.afterKeyboardMove,typeof s=="function"&&s.call(i.element,o));i.onHint(null)}},onSelect:function(n){var t=this,r=t.options.onSelect,i=t.suggestions[n];t.currentValue=t.getValue(i.value);t.currentValue===t.el.val()||t.options.preserveInput||t.el.val(t.currentValue);t.onHint(null);t.suggestions=[];t.selection=i;typeof r=="function"&&r.call(t.element,i)},getValue:function(n){var r=this,u=r.options.delimiter,t,i;return u?(t=r.currentValue,i=t.split(u),i.length===1)?n:t.substr(0,t.length-i[i.length-1].length)+n:n},dispose:function(){var t=this;t.el.off(".autocomplete").removeData("autocomplete");n(window).off("resize.autocomplete",t.fixPositionCapture);n(t.suggestionsContainer).remove()}};n.fn.devbridgeAutocomplete=function(t,r){var u="autocomplete";return arguments.length?this.each(function(){var e=n(this),f=e.data(u);typeof t=="string"?f&&typeof f[t]=="function"&&f[t](r):(f&&f.dispose&&f.dispose(),f=new i(this,t),e.data(u,f))}):this.first().data(u)};n.fn.autocomplete||(n.fn.autocomplete=n.fn.devbridgeAutocomplete)});
/*!
 * @fileOverview TouchSwipe - jQuery Plugin
 * @version 1.6.18
 *
 * @author Matt Bryson http://www.github.com/mattbryson
 * @see https://github.com/mattbryson/TouchSwipe-Jquery-Plugin
 * @see http://labs.rampinteractive.co.uk/touchSwipe/
 * @see http://plugins.jquery.com/project/touchSwipe
 * @license
 * Copyright (c) 2010-2015 Matt Bryson
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 */
(function(n){typeof define=="function"&&define.amd&&define.amd.jQuery?define(["jquery"],n):typeof module!="undefined"&&module.exports?n(require("jquery")):n(jQuery)})(function(n){"use strict";function ft(t){return t&&t.allowPageScroll===undefined&&(t.swipe!==undefined||t.swipeStatus!==undefined)&&(t.allowPageScroll=o),t.click!==undefined&&t.tap===undefined&&(t.tap=t.click),t||(t={}),t=n.extend({},n.fn.swipe.defaults,t),this.each(function(){var r=n(this),i=r.data(c);i||(i=new et(this,t),r.data(c,i))})}function et(ft,et){function tr(t){var r,f,u,e;if(!pu())return n(t.target).closest(et.excludedElements,ot).length>0?void 0:(r=t.originalEvent?t.originalEvent:t,r.pointerType&&r.pointerType=="mouse"&&et.fallbackToMouseEvents==!1)?void 0:(u=r.touches,e=u?u[0]:r,st=rt,u?ct=u.length:et.preventDefaultEvents!==!1&&t.preventDefault(),at=0,vt=null,yt=null,kt=null,lt=0,dt=0,gt=0,pt=1,bt=0,ci=ku(),dr(),wi(0,e),!u||ct===et.fingers||et.fingers===a||vi()?(gi=ti(),ct==2&&(wi(1,u[1]),dt=gt=hr(ht[0].start,ht[1].start)),(et.swipeStatus||et.pinchStatus)&&(f=wt(r,st))):f=!1,f===!1)?(st=i,wt(r,st),f):(et.hold&&(ei=setTimeout(n.proxy(function(){ot.trigger("hold",[r.target]);et.hold&&(f=et.hold.call(ot,r,r.target))},this),et.longTapThreshold)),pi(!0),null)}function ir(n){var f=n.originalEvent?n.originalEvent:n,e,h;if(st!==t&&st!==i&&!yi()){var o,r=f.touches,c=r?r[0]:f,u=gr(c);li=ti();r&&(ct=r.length);et.hold&&clearTimeout(ei);st=s;ct==2&&(dt==0?(wi(1,r[1]),dt=gt=hr(ht[0].start,ht[1].start)):(gr(r[1]),gt=hr(ht[0].end,ht[1].end),kt=gu(ht[0].end,ht[1].end)),pt=du(dt,gt),bt=Math.abs(dt-gt));ct===et.fingers||et.fingers===a||!r||vi()?(vt=iu(u.start,u.end),yt=iu(u.last,u.end),uu(n,yt),at=nf(u.start,u.end),lt=tu(),bu(vt,at),o=wt(f,st),(!et.triggerOnTouchEnd||et.triggerOnTouchLeave)&&(e=!0,et.triggerOnTouchLeave&&(h=rf(this),e=uf(u.end,h)),!et.triggerOnTouchEnd&&e?st=fr(s):et.triggerOnTouchLeave&&!e&&(st=fr(t)),(st==i||st==t)&&wt(f,st))):(st=i,wt(f,st));o===!1&&(st=i,wt(f,st))}}function rr(n){var r=n.originalEvent?n.originalEvent:n,u=r.touches;if(u){if(u.length&&!yi())return yu(r),!0;if(u.length&&yi())return!0}return yi()&&(ct=nr),li=ti(),lt=tu(),or()||!er()?(st=i,wt(r,st)):et.triggerOnTouchEnd||et.triggerOnTouchEnd===!1&&st===s?(et.preventDefaultEvents!==!1&&n.cancelable!==!1&&n.preventDefault(),st=t,wt(r,st)):!et.triggerOnTouchEnd&&br()?(st=t,ui(r,st,w)):st===s&&(st=i,wt(r,st)),pi(!1),null}function ri(){ct=0;li=0;gi=0;dt=0;gt=0;pt=1;dr();pi(!1)}function ur(n){var i=n.originalEvent?n.originalEvent:n;et.triggerOnTouchLeave&&(st=fr(t),wt(i,st))}function cr(){ot.off(si,tr);ot.off(hi,ri);ot.off(ki,ir);ot.off(di,rr);ii&&ot.off(ii,ur);pi(!1)}function fr(n){var r=n,f=lr(),u=er(),e=or();return!f||e?r=i:u&&n==s&&(!et.triggerOnTouchEnd||et.triggerOnTouchLeave)?r=t:!u&&n==t&&et.triggerOnTouchLeave&&(r=i),r}function wt(n,r){var u,f=n.touches;return(eu()||yr())&&(u=ui(n,r,g)),(fu()||vi())&&u!==!1&&(u=ui(n,r,nt)),au()&&u!==!1?u=ui(n,r,tt):vu()&&u!==!1?u=ui(n,r,it):lu()&&u!==!1&&(u=ui(n,r,w)),r===i&&ri(n),r===t&&(f?f.length||ri(n):ri(n)),u}function ui(o,s,h){var c;if(h==g){if(ot.trigger("swipeStatus",[s,vt||null,at||0,lt||0,ct,ht,yt]),et.swipeStatus&&(c=et.swipeStatus.call(ot,o,s,vt||null,at||0,lt||0,ct,ht,yt),c===!1))return!1;if(s==t&&vr()){if(clearTimeout(fi),clearTimeout(ei),ot.trigger("swipe",[vt,at,lt,ct,ht,yt]),et.swipe&&(c=et.swipe.call(ot,o,vt,at,lt,ct,ht,yt),c===!1))return!1;switch(vt){case r:ot.trigger("swipeLeft",[vt,at,lt,ct,ht,yt]);et.swipeLeft&&(c=et.swipeLeft.call(ot,o,vt,at,lt,ct,ht,yt));break;case u:ot.trigger("swipeRight",[vt,at,lt,ct,ht,yt]);et.swipeRight&&(c=et.swipeRight.call(ot,o,vt,at,lt,ct,ht,yt));break;case f:ot.trigger("swipeUp",[vt,at,lt,ct,ht,yt]);et.swipeUp&&(c=et.swipeUp.call(ot,o,vt,at,lt,ct,ht,yt));break;case e:ot.trigger("swipeDown",[vt,at,lt,ct,ht,yt]);et.swipeDown&&(c=et.swipeDown.call(ot,o,vt,at,lt,ct,ht,yt))}}}if(h==nt){if(ot.trigger("pinchStatus",[s,kt||null,bt||0,lt||0,ct,pt,ht]),et.pinchStatus&&(c=et.pinchStatus.call(ot,o,s,kt||null,bt||0,lt||0,ct,pt,ht),c===!1))return!1;if(s==t&&ar())switch(kt){case y:ot.trigger("pinchIn",[kt||null,bt||0,lt||0,ct,pt,ht]);et.pinchIn&&(c=et.pinchIn.call(ot,o,kt||null,bt||0,lt||0,ct,pt,ht));break;case p:ot.trigger("pinchOut",[kt||null,bt||0,lt||0,ct,pt,ht]);et.pinchOut&&(c=et.pinchOut.call(ot,o,kt||null,bt||0,lt||0,ct,pt,ht))}}return h==w?(s===i||s===t)&&(clearTimeout(fi),clearTimeout(ei),sr()&&!su()?(ni=ti(),fi=setTimeout(n.proxy(function(){ni=null;ot.trigger("tap",[o.target]);et.tap&&(c=et.tap.call(ot,o,o.target))},this),et.doubleTapThreshold)):(ni=null,ot.trigger("tap",[o.target]),et.tap&&(c=et.tap.call(ot,o,o.target)))):h==tt?(s===i||s===t)&&(clearTimeout(fi),clearTimeout(ei),ni=null,ot.trigger("doubletap",[o.target]),et.doubleTap&&(c=et.doubleTap.call(ot,o,o.target))):h==it&&(s===i||s===t)&&(clearTimeout(fi),ni=null,ot.trigger("longtap",[o.target]),et.longTap&&(c=et.longTap.call(ot,o,o.target))),c}function er(){var n=!0;return et.threshold!==null&&(n=at>=et.threshold),n}function or(){var n=!1;return et.cancelThreshold!==null&&vt!==null&&(n=nu(vt)-at>=et.cancelThreshold),n}function ru(){return et.pinchThreshold!==null?bt>=et.pinchThreshold:!0}function lr(){return et.maxTimeThreshold?lt>=et.maxTimeThreshold?!1:!0:!0}function uu(n,t){if(et.preventDefaultEvents!==!1)if(et.allowPageScroll===o)n.preventDefault();else{var i=et.allowPageScroll===d;switch(t){case r:(et.swipeLeft&&i||!i&&et.allowPageScroll!=b)&&n.preventDefault();break;case u:(et.swipeRight&&i||!i&&et.allowPageScroll!=b)&&n.preventDefault();break;case f:(et.swipeUp&&i||!i&&et.allowPageScroll!=k)&&n.preventDefault();break;case e:(et.swipeDown&&i||!i&&et.allowPageScroll!=k)&&n.preventDefault()}}}function ar(){var n=pr(),t=wr(),i=ru();return n&&t&&i}function vi(){return!!(et.pinchStatus||et.pinchIn||et.pinchOut)}function fu(){return!!(ar()&&vi())}function vr(){var n=lr(),t=er(),i=pr(),r=wr(),u=or();return!u&&r&&i&&t&&n}function yr(){return!!(et.swipe||et.swipeStatus||et.swipeLeft||et.swipeRight||et.swipeUp||et.swipeDown)}function eu(){return!!(vr()&&yr())}function pr(){return ct===et.fingers||et.fingers===a||!l}function wr(){return ht[0].end.x!==0}function br(){return!!et.tap}function sr(){return!!et.doubleTap}function ou(){return!!et.longTap}function kr(){if(ni==null)return!1;var n=ti();return sr()&&n-ni<=et.doubleTapThreshold}function su(){return kr()}function hu(){return(ct===1||!l)&&(isNaN(at)||at<et.threshold)}function cu(){return lt>et.longTapThreshold&&at<ut}function lu(){return!!(hu()&&br())}function au(){return!!(kr()&&sr())}function vu(){return!!(cu()&&ou())}function yu(n){ai=ti();nr=n.touches.length+1}function dr(){ai=0;nr=0}function yi(){var n=!1,t;return ai&&(t=ti()-ai,t<=et.fingerReleaseThreshold&&(n=!0)),n}function pu(){return!!(ot.data(c+"_intouch")===!0)}function pi(n){if(ot){if(n===!0){ot.on(ki,ir);ot.on(di,rr);if(ii)ot.on(ii,ur)}else ot.off(ki,ir,!1),ot.off(di,rr,!1),ii&&ot.off(ii,ur,!1);ot.data(c+"_intouch",n===!0)}}function wi(n,t){var i={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return i.start.x=i.last.x=i.end.x=t.pageX||t.clientX,i.start.y=i.last.y=i.end.y=t.pageY||t.clientY,ht[n]=i,i}function gr(n){var i=n.identifier!==undefined?n.identifier:0,t=wu(i);return t===null&&(t=wi(i,n)),t.last.x=t.end.x,t.last.y=t.end.y,t.end.x=n.pageX||n.clientX,t.end.y=n.pageY||n.clientY,t}function wu(n){return ht[n]||null}function bu(n,t){n!=o&&(t=Math.max(t,nu(n)),ci[n].distance=t)}function nu(n){return ci[n]?ci[n].distance:undefined}function ku(){var n={};return n[r]=bi(r),n[u]=bi(u),n[f]=bi(f),n[e]=bi(e),n}function bi(n){return{direction:n,distance:0}}function tu(){return li-gi}function hr(n,t){var i=Math.abs(n.x-t.x),r=Math.abs(n.y-t.y);return Math.round(Math.sqrt(i*i+r*r))}function du(n,t){var i=t/n*1;return i.toFixed(2)}function gu(){return pt<1?p:y}function nf(n,t){return Math.round(Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)))}function tf(n,t){var r=n.x-t.x,u=t.y-n.y,f=Math.atan2(u,r),i=Math.round(f*180/Math.PI);return i<0&&(i=360-Math.abs(i)),i}function iu(n,t){if(ff(n,t))return o;var i=tf(n,t);return i<=45&&i>=0?r:i<=360&&i>=315?r:i>=135&&i<=225?u:i>45&&i<135?e:f}function ti(){var n=new Date;return n.getTime()}function rf(t){t=n(t);var i=t.offset();return{left:i.left,right:i.left+t.outerWidth(),top:i.top,bottom:i.top+t.outerHeight()}}function uf(n,t){return n.x>t.left&&n.x<t.right&&n.y>t.top&&n.y<t.bottom}function ff(n,t){return n.x==t.x&&n.y==t.y}var et=n.extend({},et),oi=l||h||!et.fallbackToMouseEvents,si=oi?h?v?"MSPointerDown":"pointerdown":"touchstart":"mousedown",ki=oi?h?v?"MSPointerMove":"pointermove":"touchmove":"mousemove",di=oi?h?v?"MSPointerUp":"pointerup":"touchend":"mouseup",ii=oi?h?"mouseleave":null:"mouseleave",hi=h?v?"MSPointerCancel":"pointercancel":"touchcancel",at=0,vt=null,yt=null,lt=0,dt=0,gt=0,pt=1,bt=0,kt=0,ci=null,ot=n(ft),st="start",ct=0,ht={},gi=0,li=0,ai=0,nr=0,ni=0,fi=null,ei=null;try{ot.on(si,tr);ot.on(hi,ri)}catch(ef){n.error("events not supported "+si+","+hi+" on jQuery.swipe")}this.enable=function(){this.disable();ot.on(si,tr);ot.on(hi,ri);return ot};this.disable=function(){return cr(),ot};this.destroy=function(){cr();ot.data(c,null);ot=null};this.option=function(t,i){if(typeof t=="object")et=n.extend(et,t);else if(et[t]!==undefined){if(i===undefined)return et[t];et[t]=i}else if(t)n.error("Option "+t+" does not exist on jQuery.swipe.options");else return et;return null}}var r="left",u="right",f="up",e="down",y="in",p="out",o="none",d="auto",g="swipe",nt="pinch",w="tap",tt="doubletap",it="longtap",b="horizontal",k="vertical",a="all",ut=10,rt="start",s="move",t="end",i="cancel",l="ontouchstart"in window,v=window.navigator.msPointerEnabled&&!window.PointerEvent&&!l,h=(window.PointerEvent||window.navigator.msPointerEnabled)&&!l,c="TouchSwipe";n.fn.swipe=function(t){var r=n(this),i=r.data(c);if(i&&typeof t=="string"){if(i[t])return i[t].apply(i,Array.prototype.slice.call(arguments,1));n.error("Method "+t+" does not exist on jQuery.swipe")}else if(i&&typeof t=="object")i.option.apply(i,arguments);else if(!i&&(typeof t=="object"||!t))return ft.apply(this,arguments);return r};n.fn.swipe.version="1.6.18";n.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:".noSwipe",preventDefaultEvents:!0};n.fn.swipe.phases={PHASE_START:rt,PHASE_MOVE:s,PHASE_END:t,PHASE_CANCEL:i};n.fn.swipe.directions={LEFT:r,RIGHT:u,UP:f,DOWN:e,IN:y,OUT:p};n.fn.swipe.pageScroll={NONE:o,HORIZONTAL:b,VERTICAL:k,AUTO:d};n.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:a}}),function(n,t){typeof define=="function"&&define.amd?define(["jquery"],function(i){return n.jBox=t(i)}):typeof module=="object"&&module.exports?module.exports=n.jBox=t(require("jquery")):n.jBox=t(n.jQuery)}(this,function(n){var t=jBoxWrapper(n);try{typeof jBoxConfirmWrapper!="undefined"&&jBoxConfirmWrapper&&jBoxConfirmWrapper(t,n)}catch(i){console.error(i)}try{typeof jBoxImageWrapper!="undefined"&&jBoxImageWrapper&&jBoxImageWrapper(t,n)}catch(i){console.error(i)}try{typeof jBoxNoticeWrapper!="undefined"&&jBoxNoticeWrapper&&jBoxNoticeWrapper(t,n)}catch(i){console.error(i)}return t});
var OpenCities=OpenCities||{};OpenCities.SeamlessForms={_options:{},init:function(n){var r=this,i=$.extend({},this._options,n||{}),t;console.dir(i);t=$(".sc-standard-form");t.length&&$(".sc-form-matrix .sc-form-control > table",t).addClass("sc-responsive-table");$(function(){$(".sc-form").each(function(){var n=this,t,i;$(".sc-captcha",n).each(function(){var e=$(".sc-captcha-description-text",this),f=$(".sc-captcha-input input",this),i,t,r,u;$(".sc-captcha-image .CaptchaImageDiv img",this).on("click",function(){$(f).trigger("focus")});for(i=[".se-form-required-asterisk",".se-form-required-text"],t=0;t<i.length;t++)r=$(i[t],n),u=$(i[t],this),r.length&&u.length&&u.html(r.html())});t=$(".sc-form-errors ul > li > a",n);t.length&&($(n).addClass("sc-has-errors"),$("html, body").animate({scrollTop:$(n).offset().top-100},0),t.each(function(){var t=$(this).attr("href"),n=$(t);n.length&&$(n).parentsUntil(".sc-element-container").parent().addClass("sc-has-error")}),i=document.querySelector(".sc-form-errors a"),i!=null&&i.focus());$(n).hasClass("sc-form-thank-you")&&$("html, body").animate({scrollTop:$(n).offset().top-100},0);$(".sc-element-container .se-form-required-text",n).each(function(){$(this).parentsUntil(".sc-element-container").parent().addClass("sc-required")})})})}};
var $=$||{},OpenCities=OpenCities||{};(function(n){var t={ResourceStrings:{}};$.extend(!0,n,{init:function(){this.init=function(){};try{for(var t in window.OpenCitiesResourceStrings)window.OpenCitiesResourceStrings.hasOwnProperty(t)&&n.ResourceStrings.addResourceString(t,window.OpenCitiesResourceStrings[t])}catch(i){console.info("No OpenCities resource strings found at startup.")}(function(){$(function(){var n=function(n){var r=$(this).attr("type"),t,i,f,u;if(n.which==13&&r!="submit"&&r!="button"&&r!="reset")for(t=$(this);$(t).length;){if(t=$(t).parent(),f=$(t).attr("onkeypress"),/^javascript:return WebForm_FireDefaultButton/.test(f))break;if(i=$("input[type=submit]",t),$(i).length){u=$(i).filter(".default-button");u.length?$(u).first().trigger("click"):$(i).first().trigger("click");n.preventDefault();break}}};$("form").on("focus","input",function(){if(!$(this).data("okpbound")){$(this).data("okpbound",!0);$(this).on("keypress",n)}})})})();
/**
             * Timeago is a jQuery plugin that makes it easy to support automatically
             * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
             *
             * @name timeago
             * @version 1.5.3
             * @requires jQuery v1.2.3+
             * @author Ryan McGeary
             * @license MIT License - http://www.opensource.org/licenses/mit-license.php
             *
             * For usage and examples, visit:
             * http://timeago.yarp.com/
             *
             * Copyright (c) 2008-2015, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
             */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof module=="object"&&typeof module.exports=="object"?n(require("jquery")):n(jQuery)})(function(t){function f(){var u=i.settings,n;return u.autoDispose&&!t.contains(document.documentElement,this)?(t(this).timeago("dispose"),this):(n=o(this),isNaN(n.datetime)||(u.cutoff===0||Math.abs(e(n.datetime))<u.cutoff?t(this).text(r(n.datetime)):t(this).attr("title").length>0&&t(this).text(t(this).attr("title"))),this)}function o(n){if(n=t(n),!n.data("timeago")){n.data("timeago",{datetime:i.datetime(n)});var r=n.text().trim();i.settings.localeTitle?n.attr("title",n.data("timeago").datetime.toLocaleString()):r.length>0&&!(i.isTime(n)&&n.attr("title"))&&n.attr("title",r)}return n.data("timeago")}function r(n){return i.inWords(e(n))}function e(n){return(new Date).getTime()-n.getTime()}var i,u;t.timeago=function(n){return n instanceof Date?r(n):typeof n=="string"?r(t.timeago.parse(n)):typeof n=="number"?r(new Date(n)):r(t.timeago.datetime(n))};i=t.timeago;t.extend(t.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,autoDispose:!0,strings:{prefixAgo:n.Snippet("Sys Js TimeAgo prefixAgo",null),prefixFromNow:n.Snippet("Sys Js TimeAgo prefixFromNow",null),suffixAgo:n.Snippet("Sys Js TimeAgo suffixAgo","ago"),suffixFromNow:n.Snippet("Sys Js TimeAgo suffixFromNow","from now"),inPast:n.Snippet("Sys Js TimeAgo inPast","any moment now"),seconds:n.Snippet("Sys Js TimeAgo seconds","less than a minute"),minute:n.Snippet("Sys Js TimeAgo minute","about a minute"),minutes:n.Snippet("Sys Js TimeAgo minutes","{0} minutes"),hour:n.Snippet("Sys Js TimeAgo hour","about an hour"),hours:n.Snippet("Sys Js TimeAgo hours","about {0} hours"),day:n.Snippet("Sys Js TimeAgo day","a day"),days:n.Snippet("Sys Js TimeAgo days","{0} days"),month:n.Snippet("Sys Js TimeAgo month","about a month"),months:n.Snippet("Sys Js TimeAgo months","{0} months"),year:n.Snippet("Sys Js TimeAgo year","about a year"),years:n.Snippet("Sys Js TimeAgo years","{0} years"),wordSeparator:" ",numbers:[]}},inWords:function(n){function i(i,r){var u=typeof i=="function"?i(r,n):i,f=t.numbers&&t.numbers[r]||r;return u.replace(/\{0\}/i,f)}var l,o;if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var t=this.settings.strings,s=t.prefixAgo,h=t.suffixAgo;if(this.settings.allowFuture&&n<0&&(s=t.prefixFromNow,h=t.suffixFromNow),!this.settings.allowPast&&n>=0)return this.settings.strings.inPast;var u=Math.abs(n)/1e3,f=u/60,e=f/60,r=e/24,c=r/365;return l=u<45&&i(t.seconds,Math.round(u))||u<90&&i(t.minute,1)||f<45&&i(t.minutes,Math.round(f))||f<90&&i(t.hour,1)||e<24&&i(t.hours,Math.round(e))||e<42&&i(t.day,1)||r<30&&i(t.days,Math.round(r))||r<45&&i(t.month,1)||r<365&&i(t.months,Math.round(r/30))||c<1.5&&i(t.year,1)||i(t.years,Math.round(c)),o=t.wordSeparator||"",t.wordSeparator===undefined&&(o=" "),[s,l,h].join(o).trim()},parse:function(n){var t=(n||"").trim();return t=t.replace(/\.\d+/,""),t=t.replace(/-/,"/").replace(/-/,"/"),t=t.replace(/T/," ").replace(/Z/," UTC"),t=t.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),t=t.replace(/([\+\-]\d\d)$/," $100"),new Date(t)},datetime:function(n){var r=i.isTime(n)?t(n).attr("datetime"):t(n).attr("title");return i.parse(r)},isTime:function(n){return t(n).get(0).tagName.toLowerCase()==="time"}});u={init:function(){var r=t.proxy(f,this),n;r();n=i.settings;n.refreshMillis>0&&(this._timeagoInterval=setInterval(r,n.refreshMillis))},update:function(n){var r=n instanceof Date?n:i.parse(n);t(this).data("timeago",{datetime:r});i.settings.localeTitle&&t(this).attr("title",r.toLocaleString());f.apply(this)},updateFromDOM:function(){t(this).data("timeago",{datetime:i.parse(i.isTime(this)?t(this).attr("datetime"):t(this).attr("title"))});f.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};t.fn.timeago=function(n,t){var i=n?u[n]:u.init;if(!i)throw new Error("Unknown function name '"+n+"' for timeago");return this.each(function(){i.call(this,t)}),this};document.createElement("abbr");document.createElement("time")}),function(n){n.fn.OCDetachTemp=function(){return this.data("dt_placeholder",n('<span style="display: none;" />').insertAfter(this)),this.detach()};n.fn.OCReattach=function(){return this.data("dt_placeholder")?(this.insertBefore(this.data("dt_placeholder")),this.data("dt_placeholder").remove(),this.removeData("dt_placeholder")):window.console&&console.error&&console.error("Unable to reattach this element because its placeholder is not available."),this}}(jQuery),function(){var n,t;n=document.createElement("div");n.style.color="rgb(31, 41, 59)";document.body.appendChild(n);t=document.defaultView?document.defaultView.getComputedStyle(n,null).color:n.currentStyle.color;t=t.replace(/ /g,"");document.body.removeChild(n);t!=="rgb(31,41,59)"?$("html").addClass("os-high-contrast"):$("html").addClass("no-os-high-contrast")}(),function(){var t=n.Snippet("Sys Js ARIA Ready","Ready"),i=$('<div id="oc-aria-status" role="status" aria-live="polite" aria-atomic="true" class="visuallyhidden">'+t+"<\/div>");$("body").append(i);$(".search-filter").each(function(){var t=$(this),r,f,i,u,e,o;t.attr("role","search");t.attr("aria-label","Search filters");r=t.parent().parent().find(".listing-results, .no-item-text").parent();r.find(".list-container, .accordion-list-container").attr("role","list").children().attr("role","listitem");r.length===1&&(f=n.Tools.UniqueId(r),t.attr("aria-controls",f),i=t.find(".filter-title"),i.length===0&&(i=t.find("h2")),i.length===0&&(i=t.find(".search-filter-header")),u=i.text()||"",u!==""&&(e=n.Snippet("Sys Js ARIA Results of n0","Results of {0}"),o=e.replace(/\{0\}/i,u),r.attr("aria-label",o).attr("role","region"),t.attr("aria-label",u)))});$("#skip-to-content-container").prependTo("body");$("a").each(function(){var n=$(this),t=n.attr("target");t==="_blank"&&(n.attr("aria-describedby","new-window-0"),n.addClass("opens-in-new-tab"))})}();n.Plugins.FeaturedSectionMenu.init();n.Plugins.BreakpointChange.init();n.Plugins.OpenForms.init();n.Plugins.Glossary.init();n.Plugins.Tooltip.init();n.Plugins.ContentBlocks.init();n.Plugins.PageSections.init();n.Plugins.MatchHeight.init();n.Plugins.Slider.init();n.Plugins.PageFeedbackForm.init();n.Plugins.MultiContentAccordion.init();n.Plugins.CommentForum.init();n.Plugins.SocialMediaIcons.init();n.Plugins.HideSingleOptionSelectBox.init();n.Plugins.LightboxSearch.init();n.Plugins.SearchFilterMultiSelect.init();n.Plugins.SearchFilterCriteriaTags.init();n.Plugins.MultiDateEvent.init();n.Plugins.ImageFade.init();n.Plugins.SharePage.init();n.Plugins.SocialFeed.init();n.Plugins.QRCode.init();n.Plugins.PhoneNumber.init();n.Plugins.SiteSearchTracking.init();n.Plugins.EmergencyAnnouncements.init();n.Plugins.RepointContentListDateFilter.init();n.Plugins.MyArea.init();n.Plugins.SiteSearch.init();n.Plugins.ContentCarousel.init();n.Plugins.Meetings.init();n.Plugins.Calendar.init();n.Plugins.SubscriptionsSearch.init();n.Plugins.Subscriptions.init();n.Plugins.HomepageListingTemplates.init();n.Plugins.FeaturedLinks.init();n.Plugins.StepNumbering.init();n.Plugins.ContainerEvent.init();n.Ready(function(){n.Plugins.UtilityBar.init();n.Plugins.RadTreeA11yLayer.init();n.Plugins.RadEditorA11yLayer.init();n.Plugins.UnsupportedBrowserWarning.init()});$(function(){n.Fixes.Apply();n.Hookups.Run(document);var t=$("body");t.on("click","a.document[href]",function(){var i=$(this),u=i.attr("href"),r=i.find(".file-info").text(),t=i.text();r.length>0&&(t=t.replace(r,""));t=t.replace(/\s+/g," ").trim();t.length>50&&(t=t.substr(0,47)+"...");n.Analytics.Record.DocumentDownload(u,t)});if(t.hasClass("content-type-oc-profile"))t.on("click","a.profile-featured-panel",function(){var i=$(this),t=i.find("h2").text().trim();t!==""&&n.Analytics.Record.FeatureWidgetClick(t)});$(".top-task-homepage").on("click","a.profile-list",function(){var t=$(this).attr("title");n.Analytics.Record.TopTaskClick(t)});$(".navigation-top-tasks-list").on("click","a.navigation-top-task-icon",function(){var t=$(this).attr("title");n.Analytics.Record.TopTaskNavigationClick(t)});$('.add-to-calendar-body input[type="submit"]').on("click",function(){n.Analytics.Record.AddToCalendarClick()});$(".hyperlink-button-container a.hyperlink-button").on("click",function(){var t=$(this).attr("href");n.Analytics.Record.EventsCallToActionClick(t)})})},QueryString:function(n){var r,i,t;if(n==="")return{};for(r={},i=0;i<n.length;++i)t=n[i].split("="),t.length<2&&t.push(""),t.length>2&&(t=[t.shift(),t.join("=")]),r[t[0]]=decodeURIComponent(t[1].replace(/\+/g," "));return r}(window.location.search.substr(1).split("&")),Fixes:{Apply:function(){for(var n in this.Fix)(typeof this.Fix[n].test!="function"||this.Fix[n].test())&&(console.log("Applying fix: "+n),this.Fix[n].apply())},Fix:{Patch_CMS_4383:{test:function(){return!0},apply:function(){$(".search-filter-body input[type=submit]").on("click",function(){var n=$("#mainForm"),t=n.attr("action")+"",i=t.replace(/(\?.*dlv_.*)(\(pageindex=\d+\))/g,"$1");n.attr("action",i)})}},SMSLinkFix:{test:function(){return!0},apply:function(){link=new SMSLink.link;link.replaceAll()}},IOSMultiSelect:{test:function(){return!0},apply:function(){var n=$("select[multiple]");n.on("blur",function(){var n=$(this);n.data("value",n.val());setTimeout(function(){n.val(n.data("value"))},600)})}}}},Hookups:{_hookupStore:[],Add:function(n){typeof n=="function"&&this._hookupStore.push(n)},Run:function(n){typeof n=="undefined"&&(n=document);console.log("Running "+this._hookupStore.length+" hookups");for(var t=0;t<this._hookupStore.length;t++)this._hookupStore[t](n)}},CreateElement:function(n){var t=arguments.length>1?arguments[1]:{};return $(document.createElement(n)).attr(t)},Snippet:function(i,r){return t.ResourceStrings.hasOwnProperty(i)?n.ResourceStrings.getResourceString(i):r||""},SnippetOrName:function(t){return n.Snippet(t,t)},ResourceStrings:{addResourceString:function(n,i){this.hasResourceString(n)?console.warn("ResourceString '"+n+"' already defined."):t.ResourceStrings[n]=i},hasResourceString:function(n){return t.ResourceStrings.hasOwnProperty(n)},getResourceString:function(n){return t.ResourceStrings[n]}},Tools:{Caret:{getPosition:function(n){return n.selectionStart||n.selectionStart=="0"?n.selectionStart:0},setPosition:function(n,t){n.focus();n.setSelectionRange(t,t)}},ValueOrDefault:function(n,t){return typeof n=="undefined"?t:n},GetQueryStringParameterByName:function(t){return n.QueryString[t]},ArgsAsOptions:function(n,t){for(var l,r={},u=t||[],i=0;i<n.length;i++){var e=typeof n[i],a=i===n.length-1,s=e=="object",h=u.length>=i+1&&typeof u[i]=="object",c=h&&typeof u[i][e]!="undefined",v=c&&s&&u[i].object=="options";if(c)v?r=$.extend(r,n[i]):r[u[i][e]]=n[i];else if(s&&a)r=$.extend(r,n[i]);else if(h){var y="ArgsAsOptions: Argument "+(i+1)+" ("+n[i]+") is not of the correct type. Type is '"+e+"'.",f="",o=0;for(l in u[i])o>0&&(f+=", "),f+="'"+l+"'",o++;return f=o==1?" Expecting: "+f+".":" Expecting one of: "+f+".",console.warn(y+f),!1}}return!r.sc_selector&&r.selector&&(r.sc_selector=r.selector),r},Debounce:function(n,t,i){var r;return function(){function e(){i||n.apply(u,f);r=null}var u=this,f=arguments;r?clearTimeout(r):i&&n.apply(u,f);r=setTimeout(e,t||100)}},StringToClassName:function(n){return n.toLowerCase().replace(/^\s+|\s+$/g,"").replace(/[^a-z\d]+/ig,"-").replace(/^(\d)/g,"-$1").replace(/-{2,}/g,"-").replace(/-+$/g,"")},BytesToSize:function(n){if(n===0)return"0 Byte";var t=1e3,i=Math.floor(Math.log(n)/Math.log(t));return(n/Math.pow(t,i)).toPrecision(3)+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]},FormatTemplate:function(n,t){for(var u="",r=0,e=/\{\w+\}/mg,i=e.exec(n),f;i!==null;){for(f=0;f<i.length;f++){var o=i[0],s=o.length,h=o.substr(1,s-2);h in t&&(u+=n.substring(r,i.index),u+=t[h].toString(),r=i.index+s)}i=e.exec(n)}return r===0?n:u+n.substr(r)},SocialWebsiteMatch:{_websiteInfo:{Facebook:{Name:"Facebook",IconClass:"facebook",Matches:["facebook.com"]},Twitter:{Name:"Twitter",IconClass:"twitter",Matches:["twitter.com"]},"Google+":{Name:"Google+",IconClass:"google-plus",Matches:["google."]},Instagram:{Name:"Instagram",IconClass:"instagram",Matches:["instagram.com"]},Linkedin:{Name:"Linkedin",IconClass:"linkedin",Matches:["linkedin.com"]},Pinterest:{Name:"Pinterest",IconClass:"pinterest",Matches:["pinterest."]},YouTube:{Name:"YouTube",IconClass:"youtube",Matches:["youtube."]},Flickr:{Name:"Flickr",IconClass:"flickr",Matches:["flickr.com"]},Tumblr:{Name:"Tumblr",IconClass:"tumblr",Matches:["tumblr.com"]},Vimeo:{Name:"Vimeo",IconClass:"vimeo",Matches:["vimeo.com"]},LiveJournal:{Name:"LiveJournal",IconClass:"livejournal",Matches:["livejournal."]},Wordpress:{Name:"Wordpress",IconClass:"wordpress",Matches:["wordpress."]},TripAdvisor:{Name:"TripAdvisor",IconClass:"tripadvisor",Matches:["tripadvisor.com"]},BookingCom:{Name:"BookingCom",IconClass:"bookingcom",Matches:["booking.com"]},HotelsCombined:{Name:"HotelsCombined",IconClass:"hotelscombined",Matches:["hotelscombined.com"]}},GetWebsiteByURL:function(n){var r="",f=/^((https?|ftp):\/\/)?([\-A-Z0-9.]+)\/?/i.exec(n),e,t,u,i,o;if(f!==null&&(r=f[3]),r==="")return!1;for(e in this._websiteInfo)for(t=this._websiteInfo[e],u=t.Matches,i=0;i<u.length;i++)if(o=u[i],r.toLocaleLowerCase().indexOf(o.toLocaleLowerCase())>-1)return{Name:t.Name,IconClass:t.IconClass};return!1},GetWebsiteByName:function(n){if(n in this._websiteInfo){var t=this._websiteInfo[n];return{Name:t.Name,IconClass:t.IconClass}}return!1},AddMatchPattern:function(n,t){var r=!0,i;return n in this._websiteInfo?(i=this._websiteInfo[n],$.inArray(t,i.Matches)?(console.warn('SocialWebsiteMatch.AddMatchPattern(): The pattern "'+t+'" already exists for '+i.Name+". Redundant call."),r=!1):i.Matches.push(t)):(console.error("SocialWebsiteMatch.AddMatchPattern(): No social website registered with the key "+n+'. Use GetSiteNames() to get a list of available sites or define your own with AddWebsite({Name:"Site Name", IconClass:"site-name"}).'),r=!1),r},AddWebsite:function(n){var t="Name"in n&&typeof n.Name=="string"&&"IconClass"in n&&typeof n.IconClass=="string",i;return t||(console.error('SocialWebsiteMatch.AddWebsite(website): website parameter should be of the form {Name:"Site Name", IconClass:"site-name"}.'),t=!1),t&&n.Name in this._websiteInfo&&(console.error('SocialWebsiteMatch.AddWebsite(website): Social website already registered with the name "'+n.Name+'". Cannot add duplicate.'),t=!1),t&&(i="Matches"in n,t=!i||n.Matches instanceof Array,t?(hasMatchesObject||(n.Matches=[]),this._websiteInfo[n.Name]=n):console.error("SocialWebsiteMatch.AddWebsite(website): If website.Matches is specified, it must be an array. Error while processing website named "+n.Name)),t},GetSiteNames:function(){var n=[];for(var t in obj)n.push(t);return n}},StopWatch:{_started:0,_elapsed:0,_lap:0,_isRunning:!1,Start:function(){return this._isRunning||(this._started===0&&this.Reset(),this._started=this._lap=$.now(),this._isRunning=!0),this.Read()},Stop:function(){return this._isRunning&&(this._elapsed+=$.now()-this._started,this._isRunning=!1),this.Read()},Lap:function(){this.Start();var n=$.now(),t=n-this._lap;return this._lap=n,t},Reset:function(){this._started=0;this._stopped=0;this._elapsed=0;this._lap=0},Read:function(){return this._isRunning?this._elapsed+$.now()-this._started:this._elapsed},ReadLap:function(){return this.lap===0?0:$.now()-this._lap}},GenerateUniqueId:function(n){n=arguments.length>0&&typeof n=="string"?n:"uid";for(var t="";t===""||document.getElementById(t)!==null;)t=n+"_"+(new Date).getTime()+"_"+Math.floor(Math.random()*1e4);return t},UniqueId:function(t,i){var r=t.attr("id");return typeof r=="undefined"&&(r=n.Tools.GenerateUniqueId(i),t.attr("id",r)),r},IsElementInViewport:function(n){typeof jQuery=="function"&&n instanceof jQuery&&(n=n[0]);var t=n.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},AccessibleGoogleMap:function(t){for(var u,e,f=["pan up","pan down","pan right","pan left","zoom in","zoom out","show street map","show satellite imagery"],i=[],r=0;r<f.length;r++)u=f[r],e=n.Snippet("Sys Js Mapping "+u,u),i.push(e);t.addListener("idle",function(){var r=$(t.getDiv().childNodes[0]),o=r.children("div").first(),c=!1,s=!1,u=!1,f=!1,h=!1,e=null,l,y,a,v,p,w;t.setOptions({keyboardShortcuts:!0});t._oc_HasKeyboard=u;t._oc_LastInputFrom="mouseup";l=n.Tools.GenerateUniqueId();y=n.Snippet("Sys Js Mapping Google Map Instructions","<p>Google Map Instructions<\/p><p>Press arrow keys to pan<\/p><p>Press plus or minus keys to zoom<\/p><p>Shortcut keys<\/p><p>Press M for roadmap view<\/p><p>Press S for satellite view<\/p><p>Press H for hybrid view<\/p><p>Press T for terrain view<\/p>");$('<div class="visuallyhidden map_help" id="'+l+'">'+y+"<\/div>").prependTo(r);$(window).on("mousedown mouseup",function(n){s=n.type==="mousedown"}).on("mouseup keyup",function(n){switch(n.type){case"keyup":(n.keyCode<=13||n.keyCode>=32)&&(t._oc_LastInputFrom="keyboard");break;case"mouseup":t._oc_LastInputFrom="mouse"}});o.on("click",function(){h=!s;c=!0;setTimeout(function(){c=!1},50)}).on("focus",function(){$(this).attr("aria-describedby",l)}).on("focusin",function(n){s||u||($(this).trigger("click"),u=t._oc_HasKeyboard=!0);n.target!==o[0]||s||$(this).parent().parent().addClass("oc-keyboard-focus");e=$(n.target)}).on("blur",function(){$(this).removeAttr("aria-describedby")}).on("focusout",function(n){c&&jQuery.contains(t.getDiv(),n.target)?$(n.target).trigger("focus"):n.target===o[0]&&$(this).parent().parent().removeClass("oc-keyboard-focus");u&&!f&&(u=t._oc_HasKeyboard=!1,setTimeout(function(){u||r.trigger("click")},50))}).on("keyup",function(n){switch(n.which){case 72:t.setMapTypeId(google.maps.MapTypeId.HYBRID);break;case 77:case 82:t.setMapTypeId(google.maps.MapTypeId.ROADMAP);break;case 83:t.setMapTypeId(google.maps.MapTypeId.SATELLITE);break;case 84:t.setMapTypeId(google.maps.MapTypeId.TERRAIN)}});a=function(){$("div[title]",r).each(function(){var u=$(this),f=(u.attr("title")||"").toLowerCase().trim(),r,t;if(f!==""){for(r=!1,t=0;t<i.length;t++)if(f==i[t]){r=!0;break}r&&n.Tools.AccessibleGoogleMapButton(u,"","oc-keyboard-focus-important")}})};t.addListener("tilesloaded",a,{once:!0});t.addListener("resize",a);v=t.getZoom();t.addListener("zoom_changed",function(){f=v!=t.getZoom();v=t.getZoom();h=f&&u});t.addListener("idle",function(){h&&f&&setTimeout(function(){e!==null&&e.length===1&&jQuery.contains(r[0],e[0])?e.trigger("focus"):o.trigger("focus")},50);f=!1;h=!1});p=document.querySelectorAll(".gmnoprint.gm-style-mtc-bbw");p.forEach(function(n){n.setAttribute("aria-label","Map type control")});w=r.children().last().children().first().children().last().children().last();r.on("click keydown",n.Tools.Debounce(function(){setTimeout(function(){w.children().each(function(){var t=$(this).children().last();n.Tools.AccessibleGoogleMapCloseButton(t)})},1500)},500,!0))},{once:!0})},AccessibleGoogleMapInfoWindow:function(t,i){t._oc_hasAccessibleGoogleMapInfoWindowEvent||(t.addListener("domready",function(){if(typeof t._oc_Container!="object"){var r=t.getContent();t.setContent('<div id="oc-intected-maps-probe"><\/div>');t._oc_Container=$("#oc-intected-maps-probe").parent().parent().parent().parent().parent();t._oc_GetCloseButton=function(){return t._oc_Container.children().last().children().last()};t.setContent(r)}n.Tools.AccessibleGoogleMapCloseButton(t._oc_GetCloseButton(),i)}),t._oc_hasAccessibleGoogleMapInfoWindowEvent=!0)},AccessibleGoogleMapCloseButton:function(t,i){if(t[0]!==undefined){$focusOutlineElement=t[0].tagName==="IMG"?t.prev():t;var r=n.Tools.AccessibleGoogleMapButton(t,"Close info window","",$focusOutlineElement);if(r){t.children().first().attr({alt:"",role:"presentation"});(typeof i=="undefined"||i===null)&&(i=function(){$(this).data("has-focus")&&$(this).parent().closest("[tabindex]").trigger("focus")});t.on("click",i)}}},AccessibleGoogleMapButton:function(n,t,i,r){if(n.data("oc-acc-processed")===!0)return!1;n.data("oc-acc-processed",!0);var u="oc-keyboard-focus",f=!1;typeof t=="string"&&t!==""&&n.attr("aria-label",t);typeof i=="string"&&i!==""&&(u+=" "+i);r===undefined&&(r=n);r!==n&&n.addClass("no-outline");n.attr({role:"button",tabindex:0}).on("mousedown mouseup",function(n){f=n.type==="mousedown";n.preventDefault()}).on("keydown",function(n){n.which===13&&($(this).trigger("click"),n.preventDefault())}).on("focus",function(t){if(f){t.preventDefault();return}n.data("has-focus",!0);r.addClass(u);t.preventDefault()}).on("blur",function(t){n.data("has-focus",!1);r.removeClass(u);t.preventDefault()});return!0},HasElementHeightChanged:function(n,t){var r=n.clientHeight,i;(function u(){i=n.clientHeight;r!=i&&t();r=i;n.hasElementHeightChangedTimer&&clearTimeout(n.hasElementHeightChangedTimer);n.hasElementHeightChangedTimer=setTimeout(u,200)})()},RefreshPlugins:function(){n.Plugins.Gallery.refresh();n.Plugins.SocialFeed.refresh();n.MapsFeature.Refresh();n.Plugins.Tabs.Refresh();n.Plugins.Slider.Refresh();n.Plugins.FeaturedLinks.Refresh();n.Plugins.ResponsiveTables.Refresh()},ValidateEmail:function(n){return/^(?!\.)([a-zA-Z0-9_'+*$%\^&!.\-])+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9:]{2,4})+$/.test(n)?!0:!1},ColorContrast:{linearChannelValues:[0,.00030352698354883752,.000607053967097675,.00091058095064651249,.00121410793419535,.0015176349177441874,.001821161901293025,.0021246888848418626,.0024282158683907,.0027317428519395373,.0030352698354883748,.0033465357638991608,.0036765073240474359,.0040247170184963066,.0043914420374102934,.0047769534806937292,.005181516702338386,.0056053916242027229,.0060488330228570539,.0065120907925944752,.0069954101872653869,.0074990320432261753,.0080231929853849943,.0085681256180693069,.0091340587022207872,.00972121732023785,.010329823029626936,.010960094006488246,.011612245179743885,.012286488356915872,.012983032342173012,.013702083047289686,.014443843596092545,.015208514422912709,.015996293365509631,.016807375752887384,.017641954488384078,.018500220128379697,.019382360956935723,.0202885630566524,.021219010376003555,.022173884793387385,.02315336617811041,.024157632448504756,.02518685962736163,.026241221894849898,.027320891639074894,.028426039504420793,.0295568344378088,.030713443732993635,.031896033073011532,.033104766570885055,.03433980680868217,.035601314875020343,.036889450401100039,.0382043715953465,.039546235276732837,.040915196906853191,.042311410620809675,.043735029256973465,.045186204385675541,.046665086336880095,.048171824226889419,.049706565984127232,.051269458374043238,.052860647023180246,.054480276442442369,.056128490049600091,.057805430191067229,.0595112381629812,.061246054231617608,.063010017653167674,.064803266692905773,.066625938643772892,.068478169844400166,.070360095696595876,.072271850682317479,.074213568380149628,.076185381481307851,.078187421805186327,.080219820314468324,.0822827071298148,.084376211544148816,.086500462036549763,.088655586285772942,.090841711183407683,.093058962846687451,.0953074666309647,.097587347141862457,.099898728247113891,.10224173308810132,.10461648409110419,.10702310297826761,.10946171077829933,.1119324278369056,.11443537382697373,.11697066775851084,.11953842798834562,.12213877222960187,.12477181756095049,.12743768043564743,.13013647669036429,.13286832155381798,.13563332965520566,.13843161503245183,.14126329114027164,.14412847085805777,.14702726649759498,.14995978981060856,.15292615199615017,.1559264637078274,.15896083506088041,.162029375639111,.16513219450166761,.16826940018969075,.17144110073282259,.17464740365558504,.17788841598362912,.18116424424986022,.184474994500441,.18782077230067787,.19120168274079138,.1946178304415758,.19806931955994886,.20155625379439707,.20507873639031693,.20863687014525575,.21223075741405523,.21586050011389926,.21952619972926921,.2232279573168085,.22696587351009836,.23074004852434915,.23455058216100522,.238397573812271,.24228112246555486,.24620132670783548,.25015828472995344,.25415209433082675,.25818285292159582,.26225065752969623,.26635560480286247,.27049779101306581,.27467731206038465,.2788942634768104,.28314874042999211,.28744083772691748,.29177064981753587,.29613827079832111,.3005437944157765,.30498731406988627,.30946892281750854,.31398871337571754,.31854677812509186,.32314320911295075,.32777809805654218,.33245153634617935,.33716361504833037,.34191442490866092,.3467040563550296,.35153259950043936,.35640014414594351,.3613067797835095,.36625259559883949,.37123768047414912,.3762621229909065,.38132601143253014,.386429433787049,.39157247774972326,.39675523072562685,.40197777983219579,.4072402119017367,.41254261348390375,.41788507084813747,.42326766998607168,.42869049661390662,.43415363617474895,.43965717384091879,.44520119451622786,.45078578283822346,.45641102318040466,.46207699965440707,.467783796112159,.47353149614800955,.4793201831008268,.48514994005607037,.49102084984783562,.49693299506087041,.50288645803256871,.50888132085493376,.51491766537652139,.5209955732043543,.52711512570581309,.53327640401050524,.53947948901210718,.5457244613701866,.55201140151200012,.55834038963426791,.56471150570492923,.57112482946487308,.57758044042965062,.5840784178911641,.59061884091933692,.59720178836376336,.60382733885533779,.61049557080786476,.61720656241965111,.62396039167507611,.63075713634614683,.63759687399403264,.64447968197058214,.65140563741982416,.65837481727944847,.665387298282272,.67244315695768753,.67954246963309384,.6866853124353135,.69387176129198991,.70110189193297312,.70837577989168676,.71569350050648073,.72305512892196933,.73046074009035367,.73791040877273084,.74540420954038744,.75294221677607787,.76052450467529242,.768151147247507,.7758222183174236,.78353779152619352,.79129794033263023,.799102738014409,.8069522576692516,.81484657221610124,.82278575439628354,.83076987677465464,.83879901174074,.846873231509858,.85499260812423383,.86315721345410235,.87136711919879717,.87962239688783173,.88792311788196632,.89626935337426639,.90466117439114957,.9130986517934192,.92158185627729461,.93011085837542373,.938685728457888,.94730653673319987,.95597335324928612,.96468624789446511,.97344529039841254,.98225055033311715,.99110209711382979,1],getContrastColor:function(t){var i=n.Tools.ColorContrast.contrast(t,"#FFFFFF"),r=n.Tools.ColorContrast.contrast(t,"#080808");return i>r?"#FFFFFF":"#080808"},luminance:function(t){var i=n.Tools.ColorContrast.linearChannelValues[parseInt("0x"+t.slice(1,3))],r=n.Tools.ColorContrast.linearChannelValues[parseInt("0x"+t.slice(3,5))],u=n.Tools.ColorContrast.linearChannelValues[parseInt("0x"+t.slice(5))];return.2126*i+.7152*r+.0722*u},contrast:function(t,i){var r=n.Tools.ColorContrast.luminance(t)+.05,u=n.Tools.ColorContrast.luminance(i)+.05,f=Math.max(r,u),e=Math.min(r,u);return f/e}},DaysOfTheWeek:{day:[],initDays:function(){this.initDays=function(){};n.Tools.DaysOfTheWeek.day=[{name:OpenCities.Snippet("Sys Js Sunday","Sunday"),shortName:OpenCities.Snippet("Sys Js Sunday Short","Su")},{name:OpenCities.Snippet("Sys Js Monday","Monday"),shortName:OpenCities.Snippet("Sys Js Monday Short","Mo")},{name:OpenCities.Snippet("Sys Js Tuesday","Tuesday"),shortName:OpenCities.Snippet("Sys Js Tuesday Short","Tu")},{name:OpenCities.Snippet("Sys Js Wednesday","Wednesday"),shortName:OpenCities.Snippet("Sys Js Wednesday Short","We")},{name:OpenCities.Snippet("Sys Js Thursday","Thursday"),shortName:OpenCities.Snippet("Sys Js Thursday Short","Th")},{name:OpenCities.Snippet("Sys Js Friday","Friday"),shortName:OpenCities.Snippet("Sys Js Friday Short","Fr")},{name:OpenCities.Snippet("Sys Js Saturday","Saturday"),shortName:OpenCities.Snippet("Sys Js Saturday Short","Sa")}]},getName:function(t){return n.Tools.DaysOfTheWeek.initDays(),this.day[t].name},getShortName:function(t){return n.Tools.DaysOfTheWeek.initDays(),this.day[t].shortName},startWeekMonday:function(){n.Tools.DaysOfTheWeek.initDays();this.day.push(this.day.shift())},startWeekSaturday:function(){n.Tools.DaysOfTheWeek.initDays();this.day.unshift(this.day.pop())}},IsLeapYear:function(n){return 0==n%4&&0!=n%100||0==n%400},GetMonth:function(t,i){var r=[{name:n.Snippet("Sys Js January","January"),days:31,pretty:"01"},{name:n.Snippet("Sys Js February","February"),days:n.Tools.IsLeapYear(i)?29:28,pretty:"02"},{name:n.Snippet("Sys Js March","March"),days:31,pretty:"03"},{name:n.Snippet("Sys Js April","April"),days:30,pretty:"04"},{name:n.Snippet("Sys Js May","May"),days:31,pretty:"05"},{name:n.Snippet("Sys Js June","June"),days:30,pretty:"06"},{name:n.Snippet("Sys Js July","July"),days:31,pretty:"07"},{name:n.Snippet("Sys Js August","August"),days:31,pretty:"08"},{name:n.Snippet("Sys Js September","September"),days:30,pretty:"09"},{name:n.Snippet("Sys Js October","October"),days:31,pretty:"10"},{name:n.Snippet("Sys Js November","November"),days:30,pretty:"11"},{name:n.Snippet("Sys Js December","December"),days:31,pretty:"12"}];return r[t]},PreserveReadSpeaker:function(n){var i=n.parents(".rs_preserve"),t=n.find(".rs_preserve");i.length===0&&n.addClass("rs_preserve");t.length>0&&t.removeClass("rs_preserve")}},Dependencies:{Check:function(n,t){var u=!0,r,i;if(n)for(r in n)n[r]||(i='A required dependency "'+r+'" is missing.',i=t?t+": "+i:i,console.warn(i),u=!1);return u},GetScript:function(n,t){var i=this._scripts,u=function(){for(i[n].status="ready";i[n].callbacks.length;){var t=i[n].callbacks.shift();t()}},r;n in i||(i[n]={status:"preload",callbacks:[]});typeof t=="function"&&i[n].callbacks.push(t);i[n].status=="ready"?u():i[n].status=="preload"&&(i[n].status="loading",r=document.createElement("script"),r.onreadystatechange=function(){(r.readyState==="loaded"||r.readyState==="complete")&&u()},r.onload=function(){u()},r.src=n,document.getElementsByTagName("head")[0].appendChild(r))},GetStylesheet:function(n,t){var r=typeof t=="string"?t:"all",u=(n+"|"+r).toLowerCase(),i;this._stylesheets.indexOf(u)>-1||(this._stylesheets.push(u),i=document.createElement("link"),i.rel="stylesheet",i.type="text/css",i.href=n,r&&(i.media=r),document.getElementsByTagName("head")[0].appendChild(i))},_scripts:{},_stylesheets:[]},Search:{listOfSearchObj:[],init:function(){var t=$(".profile-search-container");t.length!==0&&t.each(function(t,i){var r={},u=$(i).data("object-id"),f,e;if(n.Search.listOfSearchObj[u]=r,f=OpenCities.Settings.SearchVariables[u],f!==undefined&&f!==null){$.extend(r,{pageUrl:f.PageUrl});e=$(".profile-search-submit",i);e.on("click",function(t){var i;if(t.preventDefault(),i=$(this).closest(".profile-search-container"),u=i.data("object-id"),r=n.Search.GetSearchObject(u),r!==undefined&&r!==null){var f=new RegExp("\\{0\\}","gi"),e=$(".profile-search-keyword-input",i),o=encodeURIComponent(e.val()),s=r.pageUrl.replace(f,o);window.location=s}})}})},GetSearchObject:function(t){return n.Search.listOfSearchObj[t]}},AddressPicker:{geocoder:null,listOfAddrPickers:[],init:function(){var t=$(".address-picker-container");t.length!==0&&(n.AddressPicker.geocoder=new google.maps.Geocoder,t.each(function(t,i){var r={},o=$(i).data("object-id"),u,s,h,e;if(n.AddressPicker.listOfAddrPickers[o]=r,u=OpenCities.Settings.AddressPickerVariables[o],u!==undefined&&u!==null){$.extend(r,{mapId:u.MapId});$.extend(r,{pageUrl:u.PageUrl});var f=$(".address-picker-location-input",i),c=$(".address-picker-submit",i),l=u.AddressSource;if($.extend(r,{addressSource:u.AddressSource}),s=function(n){$.extend(r,{selectedPlaceId:n.data.Id})},l==="CMS"?n.MapsFeature.InitAutoComplete(f,{onSelect:s}):n.GoogleMapFeatures.InitAutoCompleteGooglePlaces(f[0],r),h=location.protocol.replace(/:/g,""),e=$(".address-picker-my-location",i),h==="https")e.on("click",function(t){n.AddressPicker.FindMyLocation(i,r);t.preventDefault()});else e.hide();c.on("click",function(t){var u,i,e;t.preventDefault();var o=$(this).closest(".address-picker-container"),c=o.data("object-id"),s=n.AddressPicker.GetAddressPickerObject(c);if(s!==undefined&&s!==null){u=r.selectedPlaceId;i="";u!==undefined&&u!==""&&(i="addressId="+u);f=$(".address-picker-location-input",o);e=encodeURIComponent(f.val());e!==""&&(i!==""&&(i+="&"),i+="address="+e);r.mapId!==undefined&&r.mapId!==null&&r.mapId!==""&&(i!==""&&(i+="&"),i+="mapId="+r.mapId);var l=r.pageUrl.split("?"),a=l.length===1?"?":"&",h=r.pageUrl;i!==""&&(h=r.pageUrl+a+i);window.location=h}})}}))},GetAddressPickerObject:function(t){return n.AddressPicker.listOfAddrPickers[t]},FindMyLocation:function(t,i){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(r){n.AddressPicker.PopulateAddress(r,t,i)},function(i){n.AddressPicker.ShowErrorFindMyLocation(i,t)}):console.log("Geolocation is not supported by this browser.")},ShowErrorFindMyLocation:function(n,t){var i=OpenCities.Snippet("Sys Js MyArea Error An unknown error occurred","An unknown error occurred.");switch(n.code){case n.PERMISSION_DENIED:i=OpenCities.Snippet("Sys Js MyArea Error User denied the request for","User denied the request for Geolocation.");break;case n.POSITION_UNAVAILABLE:i=OpenCities.Snippet("Sys Js MyArea Error Location information is unavailable","Location information is unavailable.");break;case n.TIMEOUT:i=OpenCities.Snippet("Sys Js MyArea Error The request to get user location timed","The request to get user location timed out.");break;case n.UNKNOWN_ERROR:i=OpenCities.Snippet("Sys Js MyArea Error An unknown error occurred","An unknown error occurred.")}console.log(n);$(".address-picker-location-input",t).val(i);$(".use-my-location-button",t).hide()},PopulateAddress:function(t,i,r){var u=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);n.AddressPicker.geocoder.geocode({latLng:u},function(t,u){if(u==google.maps.GeocoderStatus.OK)if(r.addressSource==="Google")$.extend(r,{selectedPlaceId:t[0].place_id}),$(".address-picker-location-input",i).val(t[0].formatted_address);else{var f=n.GoogleMapFeatures.GetAddressFromGeocoderResult(t[0]);$.ajax({url:"/api/v1/myarea/searchfuzzy",type:"GET",dataType:"json",data:{keywords:f,maxresults:1},success:function(n){n.Items.length>0?($.extend(r,{selectedPlaceId:n.Items[0].Id}),$(".address-picker-location-input",i).val(n.Items[0].AddressSingleLine)):$(".address-picker-location-input",i).val(f)}})}})}},GoogleMapFeatures:{InitAutoCompleteGooglePlaces:function(n,t){var f={},e=OpenCities.Settings.Application.LocationSettings.MapRegion,o,i,r,s,h,u;e!==null&&e!==""&&(o={},$.extend(o,{country:e}),$.extend(f,{componentRestrictions:o}));i=OpenCities.Settings.Application.LocationSettings.Bounds;r=new google.maps.LatLngBounds;i!==null&&i!=="undefined"&&(i.northeast!==null&&i.northeast!==undefined&&(s=new google.maps.LatLng(i.northeast.lat,i.northeast.lng),r.extend(s)),i.southwest!==null&&i.southwest!==undefined&&(h=new google.maps.LatLng(i.southwest.lat,i.southwest.lng),r.extend(h)),$.extend(f,{bounds:r}));u=new google.maps.places.Autocomplete(n,f);u.setFields(["place_id","geometry","name"]);u.addListener("place_changed",function(){var n=u.getPlace();$.extend(t,{selectedPlaceId:n.place_id})})},GetAddressFromGeocoderResult:function(n){var t="",i="",r="",u="";return $.each(n.address_components,function(){var n=$(this)[0];n.types.indexOf("street_number")>=0&&(t=n.long_name);n.types.indexOf("route")>=0&&(i=n.long_name);n.types.indexOf("locality")>=0&&(r=n.long_name);n.types.indexOf("postal_code")>=0&&(u=n.long_name)}),t+" "+i+" "+r+" "+u}},MapsFeature:{geocoder:null,listOfMaps:[],onAddressChangeListeners:[],clusterStyles:null,paths:{mapCluster:OpenCities.Paths.SiteTemplate+"markerclusterer.min.js",spiderfier:OpenCities.Paths.SiteTemplate+"spiderFier-1.0.3.oms.min.js"},lazy_init:function(){$maps=$(".custom-map-canvas");const n={threshold:1};$maps.each(function(t,i){var r=new IntersectionObserver(function(n,t){var r=typeof n[0].isIntersecting=="boolean"?n[0].isIntersecting:n[0].intersectionRatio>0;r&&(OpenCities.MapsFeature.init(i),t.unobserve(i))},n);r.observe(i)})},init:function(t){var i,r,u;n.MapsFeature.SetMarkerClusterOptions();n.MapsFeature.geocoder=new google.maps.Geocoder;$(".no-js-element",$(t)).remove();i={autoFitMarkers:!1,id:null,name:null,googleMap:null,uniqueId:null,resultsLeft:null,zoomLevel:null,$parentContainer:null,$mapContainer:null,oms:null,markers:[],kmlLayers:[],hasLegend:!1,centrePointLatLng:null,skipRebound:null,reorient:null,isSearchClicked:null,hasSidePanel:!1,spiderfier:null,activemarkerWindow:null,contentTypeMarkerDetails:[],mapApplicationId:null,$mapResultsList:null,$mapResultsList_focusProtection:!1,mapCluster:null,centerMarker:null,searchedLocation:"",searchedLocationLatLng:null,searchedResultObj:null,containerId:null,showMore:!1,layerIds:[],bounds:new google.maps.LatLngBounds,infoWindow:new google.maps.InfoWindow({maxWidth:247})};n.MapsFeature.InitInfoWindow(i);i.$parentContainer=t;r=OpenCities.Tools.UniqueId($(i.$parentContainer));i.containerId=r;u=$(t).data("map-id");i.id=u;n.MapsFeature.listOfMaps[r]=i;$(i.$parentContainer).is(":hidden")?$(i.$parentContainer).attr("data-initialised","false"):($(i.$parentContainer).attr("data-initialised","true"),$.getJSON("/ocmaps/get/"+u,function(t){t.success&&n.MapsFeature.InitialiseMap(t.map,r)},"json"))},InitInfoWindow:function(n){google.maps.event.addListener(n.infoWindow,"domready",function(){if(this!==n.activemarkerWindow){this.close();return}var t=$(".gm-style-iw");t.addClass("oc-iw");setTimeout(function(){var i=$("button",t);i.on("click",function(){n.activeMarker!==undefined&&n.activeMarker!==null&&(n.activeMarker=null)});i.find("span").hide();i.css({opacity:"1",right:"0px",top:"0px","background-image":"url("+OpenCities.Paths.SiteTemplate+"close-icons.svg)","background-position":"7px 7px","background-repeat":"no-repeat","background-color":"rgba(0,0,0,0.54)",width:"28px",height:"28px","border-radius":"0px"});n.imageClass==="no-image"&&i.css({"background-position":"-38px 7px","background-color":"transparent"});i.next("img").css({right:"1px",top:"15px"});$(".iw-content").height()<140&&$(".iw-bottom-gradient").css({display:"none"});i.on("mouseout",function(){$(this).css({opacity:"1"})})},100)})},OnAddressChange:function(t){n.MapsFeature.onAddressChangeListeners.push(t)},SetMarkerClusterOptions:function(){n.MapsFeature.clusterStyles=[{textColor:"#000000",url:OpenCities.Paths.SiteTemplate+"m1.png",width:53,height:52},{textColor:"#000000",url:OpenCities.Paths.SiteTemplate+"m2.png",width:56,height:55},{textColor:"#000000",url:OpenCities.Paths.SiteTemplate+"m3.png",width:66,height:65},{textColor:"#000000",url:OpenCities.Paths.SiteTemplate+"m4.png",width:78,height:77},{textColor:"#000000",url:OpenCities.Paths.SiteTemplate+"m5.png",width:90,height:89}]},Refresh:function(){$(".custom-map-canvas").each(function(){var i=$(this),t,u=i.attr("data-initialised"),r,f;u!==undefined&&(r=i.attr("id"),u==="true"?(t=n.MapsFeature.GetMapObject(r),t!==undefined&&t.googleMap!==undefined&&google.maps.event.trigger(t.googleMap,"resize")):i.is(":visible")&&(t=n.MapsFeature.GetMapObject(r),i.attr("data-initialised","true"),f=t.containerId,$.getJSON("/ocmaps/get/"+t.id,function(t){t.success&&n.MapsFeature.InitialiseMap(t.map,f)},"json")))})},RenderMap:function(t,i,r,u){var f=OpenCities.Settings.Application.LanguageSettings.UserLanguage,e={MapId:u,Bounds:i,IdList:t,LanguageCode:f,RefreshResults:!0,UniqueId:null};n.MapsFeature.GetMapResults(e,r)},ClearMap:function(n){var t;if(n.googleMap){if(n.markers!==null){for(t=0;t<n.markers.length;t++)n.markers[t].setMap(null);n.markers=[]}if(n.contentTypeMarkerDetails!==null){for(t=0;t<n.contentTypeMarkerDetails.length;t++)n.contentTypeMarkerDetails[t].marker.setMap(null);n.contentTypeMarkerDetails=[]}if(n.kmlLayers!=null){for(t=0;t<n.kmlLayers.length;t++)n.kmlLayers[t].setMap(null);n.kmlLayers=[]}n.centerMarker!==null&&(n.centerMarker.setMap(null),n.centerMarker=null);n.resultsLeft=undefined;n.activemarkerWindow=null;n.markerCluster.clearMarkers()}},GetMapObject:function(t){return n.MapsFeature.listOfMaps[t]},GetMapObjectByGoogleMap:function(t){var r,i;for(r in n.MapsFeature.listOfMaps)if(i=n.MapsFeature.listOfMaps[r],i.googleMap===t)return i;return null},InitialiseMap:function(t,i){function e(t,i,r){$.ajax({url:"/api/v1/myarea/searchfuzzy",type:"GET",dataType:"json",data:{keywords:t,maxresults:1},success:function(t){if(t.Items.length>0){r.searchedResultObj=t.Items[0];i.val(t.Items[0].AddressSingleLine);r.searchedLocation=t.Items[0].AddressSingleLine;r.isSearchClicked=!0;var u=null;t.Items[0].LatLon!==null&&(u=new google.maps.LatLng(t.Items[0].LatLon[0],t.Items[0].LatLon[1]));r.searchedLocationLatLng=u;r.searchedLocationLatLng===null||r.searchedLocationLatLng===""?n.MapsFeature.geocoder.geocode({address:t.Items[0].AddressSingleLine},function(t,i){if(i===google.maps.GeocoderStatus.OK){var u=t[0].geometry.location;r.searchedLocationLatLng=u}n.MapsFeature.FilterMapResults(!0,r);n.MapsFeature.onAddressChangeListeners.forEach(function(n){n(r.searchedResultObj)})}):(n.MapsFeature.FilterMapResults(!0,r),n.MapsFeature.onAddressChangeListeners.forEach(function(n){n(r.searchedResultObj)}))}else r.searchedLocationLatLng=null,r.searchedLocation="",r.searchedResultObj=null,n.MapsFeature.FilterMapResults(!0,r),n.MapsFeature.onAddressChangeListeners.forEach(function(n){n(r.searchedResultObj)})}})}function u(n,t,i){n.css({width:t+"%",height:i+"px"})}function h(n,i,r){var s=100,o=100,e,f;switch(!0){case n.outerWidth()<480:n.hasClass("container-size-4")||(f=479.999,n.removeClass("container-size-1 container-size-2 container-size-3 content-narrow").addClass("container-size-4"),e=f*o/100*(t.aspectRatio.height/t.aspectRatio.width),u(n.find(".map-results-list"),s,e),u(n.find(".oc-map"),o,e));break;case n.outerWidth()<768:n.hasClass("container-size-3")||(f=767.999,n.removeClass("container-size-1 container-size-2 container-size-4 content-narrow").addClass("container-size-3"),e=f*o/100*(t.aspectRatio.height/t.aspectRatio.width),u(n.find(".map-results-list"),s,e),u(n.find(".oc-map"),o,e));break;case n.outerWidth()<900:n.hasClass("container-size-2")||(f=899.999,n.removeClass("container-size-1 container-size-3 container-size-4 content-narrow").addClass("container-size-2"),e=f*o/100*(t.aspectRatio.height/t.aspectRatio.width),u(n.find(".map-results-list"),s,e),u(n.find(".oc-map"),o,e));break;default:n.outerWidth()<992?n.hasClass("container-size-1")||n.hasClass("content-narrow")||(f=991.999,n.removeClass("container-size-2 container-size-3 container-size-4").addClass("container-size-1 content-narrow"),c(n,f,r,t.aspectRatio)):(n.hasClass("container-size-1")&&n.hasClass("content-narrow")||!n.hasClass("container-size-1"))&&(f=1070,n.removeClass("container-size-2 container-size-3 container-size-4 content-narrow").addClass("container-size-1"),c(n,f,r,t.aspectRatio))}}function c(n,t,i,r){var o=100,f=100,e;i&&(o=30,f=70);e=t*f/100*(r.height/r.width);u(n.find(".map-results-list"),o,e);u(n.find(".oc-map"),f,e)}var r=n.MapsFeature.GetMapObject(i),o,s,f;if(r!==null&&(r.skipRebound=!0,r.reorient=!1,r!==undefined)){r.name=t.Name;$.extend(r,{addressSource:t.addressSource});r.mapCenterIconUrl=t.mapCenterIconUrl;$.extend(r,{hasAddressFilter:t.HasAddressFilter});n.MapsFeature.InitialiseFilter(t.layer,t.HasCategoryFilter,t.HasAddressFilter,r);o=parseFloat(t.lat);s=parseFloat(t.longitude);r.zoomLevel=parseInt(t.zoomLevel)||zoomDefault;r.centrePointLatLng=new google.maps.LatLng(o,s);f="off";t.showPOI&&(f="on");$mapListContainer=$('<div class="list-js-results js-element"><\/div>');r.$mapContainer=$('<div class="oc-map"><\/div>');r.$mapContainer.appendTo($mapListContainer);r.mapApplicationId=OpenCities.Tools.UniqueId(r.$mapContainer);$mapListContainer.appendTo(r.$parentContainer);$(r.$parentContainer).find(".map-loading-message").remove();r.googleMap=new google.maps.Map(r.$mapContainer[0],{center:r.centrePointLatLng,zoom:r.zoomLevel,streetViewControl:!1,gestureHandling:"cooperative",styles:[{featureType:"poi",stylers:[{visibility:f}]}]});var l=function(i){return{initSpiderfier:function(){var u,r,f;i.oms=new OverlappingMarkerSpiderfier(i.googleMap,{markersWontMove:!0,markersWontHide:!0,basicFormatEvents:!0});i.autoFitMarkers=t.isAutoFitLayersEnabled;i.hasSidePanel=t.HasSidePanel;t.HasSidePanel&&(n.MapsFeature.AddContainerSidePanel(t.layer,i),n.MapsFeature.InitTabChangeEvents(i));u=OpenCities.Snippet("Sys Js MyArea no more results","No results found. Try searching for something else.");$noResultContainer=$('<div class="list-js-no-results js-element">'+u+" <\/div>");i.$mapContainer.parent().after($noResultContainer);n.Tools.AccessibleGoogleMap(i.googleMap);n.Tools.AccessibleGoogleMapInfoWindow(new google.maps.InfoWindow);t.HasLegend&&(i.hasLegend=!0,n.MapsFeature.InitialiseLegend(t.layer,i.containerId));r=t.layer;for(f in r)i.layerIds.push(r[f].Id);i.googleMap.addListener("bounds_changed",function(){if(!i.skipRebound)try{if(i.resultsLeft!==undefined&&i.resultsLeft===0)return;i.reorient=!0;n.MapsFeature.FilterMapResults(!1,i)}catch(t){console.log(t)}},3e3);i.$mapContainer.attr("aria-busy","true").addClass("loading").data("has-content",!0);google.maps.event.addListenerOnce(i.googleMap,"idle",function(){var u=n.Tools.GetQueryStringParameterByName("addressId"),r=n.Tools.GetQueryStringParameterByName("address"),o=$(".search-filter input[type=text]",i.$parentContainer),c=!1,s="",f,h;if(i.hasAddressFilter&&(u!==undefined&&u!==""||r!==undefined&&r!=="")){if(r=decodeURIComponent(r),f=n.Tools.GetQueryStringParameterByName("mapId"),f!==undefined&&f!==null&&f!==""){if(f!==i.id)return;s=i.containerId}i.addressSource==="CMS"?u!==undefined&&u!==""?$.ajax({url:"/api/v1/myarea/searchbyid",type:"GET",dataType:"json",data:{addressId:u},success:function(t){t!==null&&t!==undefined?(c=!0,i.searchedLocation=t.AddressSingleLine,i.searchedResultObj={Id:t.Id,AddressSingleLine:t.AddressSingleLine,MunicipalSubdivision:t.MunicipalSubdivision},i.isSearchClicked=!0,o.val(t.AddressSingleLine),t.LatLon!==null&&(i.searchedLocationLatLng=new google.maps.LatLng(t.LatLon[0],t.LatLon[1])),i.searchedLocationLatLng===null||i.searchedLocationLatLng===""?n.MapsFeature.geocoder.geocode({address:t.AddressSingleLine},function(t,r){if(r==google.maps.GeocoderStatus.OK){var u=t[0].geometry.location;i.searchedLocationLatLng=u;$.extend(i.searchedResultObj,{LatLon:u})}n.MapsFeature.FilterMapResults(!0,i);n.MapsFeature.onAddressChangeListeners.forEach(function(n){n(i.searchedResultObj)})}):($.extend(i.searchedResultObj,{LatLon:i.searchedLocationLatLng}),n.MapsFeature.FilterMapResults(!0,i),n.MapsFeature.onAddressChangeListeners.forEach(function(n){n(i.searchedResultObj)}))):e(r,o,i)},error:function(){e(r,o,i)}}):e(r,o,i):u!==undefined&&u!==""?n.MapsFeature.PopulateMapFromGoogle(u,r,i):n.MapsFeature.PopulateMapFromGoogleByAddress(r,i);s!==""&&$("html, body").animate({scrollTop:$("#"+s).offset().top-20},500)}else t.HasInitialResults?(h=i.googleMap.getBounds(),n.MapsFeature.RenderMap(i.layerIds,h.toUrlValue(4),i.containerId,i.id),i.hasSidePanel&&setTimeout(function(){n.MapsFeature.ShowListView(i)},200)):n.MapsFeature.HideMapData(i)});h($(i.$parentContainer),t.width,i.hasSidePanel);$(window).on("resize",n.Tools.Debounce(function(){h($(i.$parentContainer),t.width,i.hasSidePanel)},50))}}}(r),a=function(t){return{mapCluster:function(){var i={gridSize:50,maxZoom:t.zoomLevel-1,styles:n.MapsFeature.clusterStyles},r=t.googleMap,u=t.markers;t.markerCluster=new markerClusterer.MarkerClusterer({map:r,markers:u,algorithmOptions:i});t.markerCluster.renderer.render=v;n.Dependencies.GetScript(n.MapsFeature.paths.spiderfier,l.initSpiderfier)}}}(r),v=function(t){const i=t.count,u=t._position,f=i<10?0:i<100?1:i<1e3?2:i<1e4?3:4,r=n.MapsFeature.clusterStyles[f];return new google.maps.Marker({position:u,icon:{url:r.url,scaledSize:new google.maps.Size(r.height,r.width)},label:{text:String(i),color:"rgba(255,255,255,0.9)",fontSize:"12px"},zIndex:1e3+i})};n.Dependencies.GetScript(n.MapsFeature.paths.mapCluster,a.mapCluster)}},PopulateMapFromGoogle:function(t,i,r){n.MapsFeature.geocoder.geocode({placeId:t},function(t,u){if(u===google.maps.GeocoderStatus.OK&&(t!==null||t!==undefined)){var f=$(".search-filter input[type=text]",r.$parentContainer),e=t[0].geometry.location;r.searchedLocationLatLng=e;r.searchedLocation=t[0].formatted_address;r.isSearchClicked=!0;f.val(t[0].formatted_address);n.MapsFeature.FilterMapResults(!0,r);n.MapsFeature.onAddressChangeListeners.forEach(function(n){n(r.searchedResultObj)})}else n.MapsFeature.PopulateMapFromGoogleByAddress(i,r)})},PopulateMapFromGoogleByAddress:function(t,i){var c=$(".search-filter input[type=text]",i.$parentContainer),u={},r,f,s,h,e,o;$.extend(u,{address:t});r=OpenCities.Settings.Application.LocationSettings.Bounds;f=new google.maps.LatLngBounds;r!==null&&r!=="undefined"&&(r.northeast!==null&&r.northeast!==undefined&&(s=new google.maps.LatLng(r.northeast.lat,r.northeast.lng),f.extend(s)),r.southwest!==null&&r.southwest!==undefined&&(h=new google.maps.LatLng(r.southwest.lat,r.southwest.lng),f.extend(h)),$.extend(u,{bounds:f}));e=OpenCities.Settings.Application.LocationSettings.MapRegion;e!==null&&e!==""&&(o={},$.extend(o,{country:e}),$.extend(u,{componentRestrictions:o}));n.MapsFeature.geocoder.geocode(u,function(t,r){if(r==google.maps.GeocoderStatus.OK){var u=t[0].geometry.location;i.searchedLocationLatLng=u;i.searchedLocation=t[0].formatted_address;i.isSearchClicked=!0;c.val(t[0].formatted_address)}n.MapsFeature.FilterMapResults(!0,i);n.MapsFeature.onAddressChangeListeners.forEach(function(n){n(i.searchedResultObj)})})},InitTabChangeEvents:function(t){var i=$(t.$parentContainer).find(".map-buttons").attr({role:"tablist","aria-orientation":"horizontal"}),r={role:"tab","aria-selected":"false",tabindex:"-1"};$listView=$(t.$parentContainer).find(".button-list-view").on("click",function(i){return n.MapsFeature.ShowListView(t),i.preventDefault(),!1}).attr(r).data("page-index",0);$mapView=$(t.$parentContainer).find(".button-map-view").on("click",function(i){return n.MapsFeature.ShowMapView(t),i.preventDefault(),!1}).attr(r).data("page-index",1);var e=OpenCities.Tools.UniqueId($listView),o=OpenCities.Tools.UniqueId($mapView),u=OpenCities.Tools.UniqueId(t.$mapResultsList),f=OpenCities.Tools.UniqueId(t.$mapContainer);$listView.attr("aria-controls",u);$mapView.attr("aria-controls",f);i.on("keyup",function(n){var t=n.keyCode,r,e,o,u,f,s=$(this);t==37||t==39?(r=$(":focus",i),r.length>0&&r.is(".tab-header-title")&&(e=r.data("page-index"),f=i.children().length,o=t<=38?-1:1,u=(e+o)%f,u<0&&(u+=f),i.children().eq(u).trigger("focus").trigger("click"),n.preventDefault())):(t===13||t===27||t===32||t===40)&&$(":focus",i).length>0&&(i.parent().find(".selected-tab").attr("tabindex","0").trigger("focus").attr("tabindex","-1"),n.preventDefault())}).on("keydown",function(n){var t=n.keyCode;(t===32||t===40)&&n.preventDefault()});n.MapsFeature.ShowMapView(t)},AddContainerSidePanel:function(n,t){$mapTabs=$('<div class="tab-buttons map-buttons clearfix"><a class="tab-header-title button-list-view" href="#"><i class="item-icon" aria-hidden="true"><\/i> <span class="item-text">List View<\/span><\/a> <a class="tab-header-title button-map-view" href="#"> <i class="item-icon" aria-hidden="true"><\/i><span class="item-text">Map View<\/span><\/a><\/div>');t.$mapResultsList=$('<div class="map-results-list"><\/div>');t.$mapResultsList.insertBefore(t.$mapContainer);$mapTabs.insertBefore(t.$mapResultsList)},InitialiseAddressFilter:function(t,i,r,u,f){var o="lblAddress"+t,e="txtAddress"+t,v=OpenCities.Snippet("Sys Js MyArea Enter street address","Enter Street Address"),s,h,c,l,a;if($addressFilterDiv=$('<div class="col-xs-12 js-element" aria-live="polite" aria-describedby="'+o+'"><\/div>'),$addressFilterTitle=$('<label id="'+o+'" for="'+e+'">'+v+"<\/label>"),$addressFilterTitle.appendTo($addressFilterDiv),$addressTextBox=$('<input name ="'+e+'" type=text id="'+e+'" class="inputBox text-address-js" />'),$addressTextBox.appendTo($addressFilterDiv),f==="CMS"?n.MapsFeature.InitAutoComplete($addressTextBox,{onSelect:i}):n.GoogleMapFeatures.InitAutoCompleteGooglePlaces($addressTextBox[0]),typeof u=="function"){s=function(n){return function(t){t.keyCode===13&&(n(),t.preventDefault())}}(u);$addressTextBox.on("keydown",s)}if(h=location.protocol.replace(/:/g,""),h==="https"){if(c="btnMyLocation"+t,l=OpenCities.Snippet("Sys Js MyArea Use My Location","Use my location"),$myLocationButton=$('<span class="span-or">or<\/span><a id="'+c+'" class="button-my-location styled-button" href="#" aria-controls="'+e+'" role="button" aria-pressed="false"><i aria-hidden="true"><\/i> '+l+' <span class="visuallyhidden">Updates the Enter Street Address field<\/span><\/a>'),typeof r=="function"){a=function(n){return function(t){return t.currentTarget.setAttribute("aria-pressed","true"),n(),t.preventDefault(),!1}}(r);$myLocationButton.on("click",a)}$myLocationButton.appendTo($addressFilterDiv)}return $addressFilterDiv},InitialiseFilterBase:function(t){var i=$.extend({uniqueSeed:"default",hasAddressFilter:!1,hascategoryfilter:!1,layerItems:[],onAutoCompleteSelect:function(){},onFindMyLocationClick:function(){},onSubmit:function(){}},t),c=$('<div class="search-filter full-width-filter my-maps-filter my-meighbourhood-filter" role="search" aria-label="Search filters for map"><div class="search-filter-header"><h2 class="filter-title">Search<\/h2><span class="accordion-trigger search-filter-trigger" data-accordion-body="#searchListBody" data-open="true" data-accordion-all-device="false"><i aria-hidden="true"><\/i><\/span><\/div><\/div>'),l=$('<div id="searchListBody" class="search-filter-body accordion-panel search-neighbourhood clearfix" data-result-highlight-source="true"><\/div>'),a,u=$('<div class="grid">'),v=$('<div class="col-xs-12"><\/div>'),o=$('<input type="button" name="btnSearch_'+i.uniqueSeed+'" value="Search" class="button-search">'),y,f,r,h;if(i.hasAddressFilter&&(y=function(){o.trigger("click")},a=n.MapsFeature.InitialiseAddressFilter(i.uniqueSeed,i.onAutoCompleteSelect,i.onFindMyLocationClick,y,t.addressSource),a.appendTo(u)),i.hasCategoryFilter&&i.layerItems.length>1){if(f=$('<div class="col-xs-12 map-category-filter clearfix"><\/div>'),r=$('<fieldset id="filter-'+i.mapId+'" class="map-category-filter-fieldset"><legend><label>Choose map options<\/label><\/legend><\/fieldset>'),i.hasAddressFilter){var p=OpenCities.Snippet("Sys Js MyArea Hide map options","Hide map options"),s=OpenCities.Snippet("Sys Js MyArea Show map options","Show map options"),e=$('<button class="category-filter-toggle filters-hidden" aria-controls="filter-'+i.mapId+'">'+s+"<\/button>");OpenCities.Plugins.BreakpointChange.onBreakpointChange(function(n,t){t&&(n=="sc-size-1"?(r.attr("aria-expanded",!1).hide(),e.addClass("filters-hidden").text(s)):(r.removeAttr("aria-expanded").show(),e.removeClass("filters-hidden")))});e.appendTo(f);$(e).on("click",function(n){n.preventDefault();var t=$(this).next(".map-category-filter-fieldset");t.slideToggle();$(this).toggleClass("filters-hidden");$(this).hasClass("filters-hidden")?(t.attr("aria-expanded",!1),$(this).text(s)):(t.attr("aria-expanded",!0),$(this).text(p))})}h=$('<ul class="chk-category"><\/ul>');i.layerItems.forEach(function(n){var u=n.Name.replace(/\s/g,"-"),i="chk-"+u+"-"+n.Id,t=$('<li class="clearfix map-category-filter-list-item"><\/li>'),r=$('<input id="'+i+'" type="checkbox" name="'+n.Name+'" checked data-value="'+n.Id+'"/>');r.on("keydown",function(n){if(n.keyCode===13)return event.preventDefault(),!1});t.append(r);t.append('<label class="map-category-filter-list-item-label" for="'+i+'" ><img class="chk-layer-category-label-icon" alt="" src="'+n.IconUrl+'" /><span class="chk-layer-category-label-text map-category-filter-option-text">'+n.Name+"<\/span><\/label>");t.appendTo(h)});h.appendTo(r);r.appendTo(f);f.appendTo(u)}o.on("click",i.onSubmit);return o.appendTo(v),v.appendTo(u),u.appendTo(l),l.appendTo(c),c},InitialiseFilter:function(t,i,r,u){if(r||i&&t.length>1){var f=n.MapsFeature.InitialiseFilterBase({uniqueSeed:u.name.replace(/\s/g,"-"),hasAddressFilter:r,hasCategoryFilter:i,layerItems:t,addressSource:u.addressSource,mapId:u.id,onAutoCompleteSelect:function(t){n.MapsFeature.SetValidResult(t.data,u.containerId)},onFindMyLocationClick:function(){n.MapsFeature.FindMyLocation(u)},onSubmit:function(t){var f=$(this).closest(".custom-map-canvas"),e=f.attr("id"),r,i;if(u=n.MapsFeature.GetMapObject(e),u!==undefined)return u.reorient=!1,u.isSearchClicked=!0,n.MapsFeature.ClearMap(u),r=$(".search-filter input[type=text]",f),i=r.val(),i===undefined||i===null||i===""?(u.searchedLocationLatLng=null,u.searchedLocation="",u.searchedResultObj=null,n.MapsFeature.FilterMapResults(!0,u),n.MapsFeature.onAddressChangeListeners.forEach(function(n){n(u.searchedResultObj)})):i===u.searchedLocation&&u.searchedLocationLatLng==null&&u.searchedLocation!==""?n.MapsFeature.geocoder.geocode({address:i},function(t,r){if(r==google.maps.GeocoderStatus.OK){var f=t[0].geometry.location;u.searchedLocationLatLng=f;u.searchedLocation=i}n.MapsFeature.FilterMapResults(!0,u);n.MapsFeature.onAddressChangeListeners.forEach(function(n){n(u.searchedResultObj)})}):i!==u.searchedLocation?(u.searchedResultObj=null,u.addressSource==="CMS"?$.ajax({url:"/api/v1/myarea/searchfuzzy",type:"GET",dataType:"json",data:{keywords:i,maxresults:1},success:function(t){if(t.Items.length>0){u.searchedResultObj=t.Items[0];r.val(t.Items[0].AddressSingleLine);u.searchedLocation=t.Items[0].AddressSingleLine;var i=new google.maps.LatLng(t.Items[0].LatLon[0],t.Items[0].LatLon[1]);u.searchedLocationLatLng=i;u.searchedLocationLatLng===null||u.searchedLocationLatLng===""?n.MapsFeature.geocoder.geocode({address:t.Items[0].AddressSingleLine},function(t,i){if(i==google.maps.GeocoderStatus.OK){var r=t[0].geometry.location;u.searchedLocationLatLng=r}n.MapsFeature.FilterMapResults(!0,u);n.MapsFeature.onAddressChangeListeners.forEach(function(n){n(u.searchedResultObj)})}):(n.MapsFeature.FilterMapResults(!0,u),n.MapsFeature.onAddressChangeListeners.forEach(function(n){n(u.searchedResultObj)}))}else u.searchedLocationLatLng=null,u.searchedLocation="",u.searchedResultObj=null,n.MapsFeature.FilterMapResults(!0,u),n.MapsFeature.onAddressChangeListeners.forEach(function(n){n(u.searchedResultObj)})}}):n.MapsFeature.geocoder.geocode({address:i},function(t,r){if(r==google.maps.GeocoderStatus.OK){var f=t[0].geometry.location;u.searchedLocationLatLng=f;u.searchedLocation=i}n.MapsFeature.FilterMapResults(!0,u);n.MapsFeature.onAddressChangeListeners.forEach(function(n){n(u.searchedResultObj)})})):(n.MapsFeature.FilterMapResults(!0,u),n.MapsFeature.onAddressChangeListeners.forEach(function(n){n(u.searchedResultObj)})),t.preventDefault(),!1}});f.appendTo(u.$parentContainer)}n.Plugins.Accordion.init()},ConvertLatLongToFloat:function(n){if(n===null)return[];var i=n.split(","),t=[];return i.length!=2?t:(t[0]=parseFloat(i[0]),t[1]=parseFloat(i[1]),t)},InitAutoComplete:function(n,t){var i=$.extend({serviceUrl:"/api/v1/myarea/search",paramName:"keywords",minChars:1,maxHeight:400,zIndex:9999,deferRequestBy:250,lookupLimit:4,triggerSelectOnValidInput:!1,onSelect:function(){},transformResult:function(n){var i={suggestions:[]},t;try{t=JSON.parse(n);t.Items.length>0&&(i.suggestions=$.map(t.Items,function(n){return{value:n.AddressSingleLine,data:n}}))}catch(r){console.error("/api/v1/myarea/search service gave an unexpected response.");console.log(n);console.log(r)}return i},preventBadQueries:!1},t||{});n.autocomplete(i).attr("autocomplete","off")},SetValidResult:function(t,i){var r=n.MapsFeature.GetMapObject(i),u;r.searchedResultObj=t;r.searchedLocation=t.AddressSingleLine;t.LatLon!==null&&t.LatLon.length===2?(u=new google.maps.LatLng(t.LatLon[0],t.LatLon[1]),r.searchedLocationLatLng=u):r.searchedLocationLatLng=null},FindMyLocation:function(t){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(i){n.MapsFeature.PopulateAddress(i,t)},function(i){n.MapsFeature.ShowErrorFindMyLocation(i,t.$parentContainer)}):console.log("Geolocation is not supported by this browser.")},ShowErrorFindMyLocation:function(n,t){var i=OpenCities.Snippet("Sys Js MyArea Error An unknown error occurred","An unknown error occurred.");switch(n.code){case n.PERMISSION_DENIED:i=OpenCities.Snippet("Sys Js MyArea Error User denied the request for","User denied the request for Geolocation.");break;case n.POSITION_UNAVAILABLE:i=OpenCities.Snippet("Sys Js MyArea Error Location information is unavailable","Location information is unavailable.");break;case n.TIMEOUT:i=OpenCities.Snippet("Sys Js MyArea Error The request to get user location timed","The request to get user location timed out.");break;case n.UNKNOWN_ERROR:i=OpenCities.Snippet("Sys Js MyArea Error An unknown error occurred","An unknown error occurred.")}console.log(n);$(".inputBox.text-address-js",t).val(i);$(".button-my-location",t).hide();$(".span-or",t).hide()},PopulateAddress:function(t,i){var r=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);$mapContainer=i.$parentContainer;n.MapsFeature.geocoder.geocode({latLng:r},function(t,u){var e,f;u==google.maps.GeocoderStatus.OK&&(i.addressSource==="Google"?(e=t[0].formatted_address,i.searchedLocationLatLng=t[0].geometry.location,i.searchedLocation=e,$(".inputBox.text-address-js",$mapContainer).val(e)):(f=n.GoogleMapFeatures.GetAddressFromGeocoderResult(t[0]),r=t[0].geometry.location,i.searchedLocation=f,i.searchedLocationLatLng=r,$.ajax({url:"/api/v1/myarea/searchfuzzy",type:"GET",dataType:"json",data:{keywords:f,maxresults:1},success:function(t){t.Items.length>0?(n.Plugins.MyArea.StandaloneResult=t.Items[0],i.searchedResultObj=t.Items[0],$(".inputBox.text-address-js",$mapContainer).val(t.Items[0].AddressSingleLine),i.searchedLocation=t.Items[0].AddressSingleLine,t.Items[0].LatLon!==undefined&&t.Items[0].LatLon!==null&&(i.searchedLocationLatLng=new google.maps.LatLng(t.Items[0].LatLon[0],t.Items[0].LatLon[1]))):($(".inputBox.text-address-js",$mapContainer).val(f),i.searchedLocation=f)}})))})},FilterMapResults:function(t,i){var r=[];$layerList=$(".chk-category input[type=checkbox]",i.$parentContainer);$layerList.length===0?r=i.layerIds:$(".chk-category input[type=checkbox]:checked",i.$parentContainer).each(function(){r.push($(this).data("value"))});t&&(i.skipRebound=!0,i.googleMap.setCenter(i.searchedLocationLatLng==null?i.centrePointLatLng:i.searchedLocationLatLng),i.googleMap.setZoom(i.zoomLevel),i.isSearchClicked&&i.searchedLocationLatLng!=null&&(i.centerMarker=n.MapsFeature.AddCenterMarker(i.mapCenterIconUrl,i)));var u=i.googleMap.getBounds(),f=OpenCities.Settings.Application.LanguageSettings.UserLanguage,e={MapId:i.id,LanguageCode:f,IdList:r,Bounds:u.toUrlValue(4),RefreshResults:t,UniqueId:i.uniqueId};n.MapsFeature.GetMapResults(e,i.containerId)},GetMapResults:function(t,i){$.ajax({url:"/ocmaps/layer",type:"POST",dataType:"json",processData:!1,data:JSON.stringify(t),contentType:"application/json; charset=utf-8",success:function(t){n.MapsFeature.AddMarker(t,i)}})},AddCenterMarker:function(n,t){return new google.maps.Marker({position:t.searchedLocationLatLng,map:t.googleMap,icon:n,animation:google.maps.Animation.DROP,title:OpenCities.Snippet("Sys Js MyArea Your Location","Your Location")})},AddMarker:function(t,i){if(t.success){if(mapObj=n.MapsFeature.GetMapObject(i),mapObj===undefined)return;if(mapObj.skipRebound=!0,mapObj.resultsLeft=t.resultsLeft,mapObj.uniqueId=t.uniqueId,mapObj.bounds=new google.maps.LatLngBounds,t.layerItems.length>0){mapObj.showMore=!1;n.MapsFeature.ShowResults(mapObj);var r=mapObj.centrePointLatLng;mapObj.searchedLocationLatLng!==null&&mapObj.searchedLocationLatLng!==undefined&&(r=mapObj.searchedLocationLatLng);t.layerItems.forEach(function(t){var e,s,u,h;if(t.Type==="KML")e=t.FileUrl,s=/^(http)/,s.test(t.FileUrl.trim())||(e=location.origin+t.FileUrl),u=new google.maps.KmlLayer(e,{map:mapObj.googleMap,preserveViewport:!0,suppressInfoWindows:!1,zIndex:t.ZIndex}),mapObj.kmlLayers.push(u),mapObj.autoFitMarkers&&!mapObj.reorient&&google.maps.event.addListener(u,"defaultviewport_changed",function(){var t=n.MapsFeature.GetMapObjectByGoogleMap(u.map);t!==undefined&&t!==null&&(t.bounds.union(u.getDefaultViewport()),n.MapsFeature.AdjustBoundsAndZoom(t))});else{var f={id:t.ContentId,type:t.Type,mapObj:mapObj,mainContentId:t.MainContentId},c=parseFloat(t.Lat),l=parseFloat(t.Lng),o=new google.maps.LatLng(c,l),a={map:mapObj.googleMap,position:o,title:t.ContentTitle,animation:google.maps.Animation.DROP,icon:t.IconUrl,zIndex:t.ZIndex,markerInfo:f},i=new google.maps.Marker(a);mapObj.markers.push(i);mapObj.markerCluster.addMarker(i);mapObj.bounds.extend(o);$.extend(f,{marker:i,markerId:mapObj.markers.length-1,infoWindowContentId:"iwc_"+f.id+"_"+this.mapObj.id,getInfoWindowContent:function(){return $("#"+this.infoWindowContentId)},getGmInfoWindow:function(){return this.getInfoWindowContent().parent().parent().parent().parent()},listItemId:"item_"+f.contentId,getListItem:function(){return $("#"+this.listItemId)}});mapObj.oms.addMarker(i);i.addListener("spider_click",function(){n.MapsFeature.GetMarkerInfo(this.markerInfo)});t.Type==="Content"&&(h={title:t.ContentTitle,layerId:t.Id,itemId:t.ContentId,type:t.ContenType,marker:i,map:mapObj.googleMap,iconUrl:t.IconUrl,legendLabel:t.Name,distance:google.maps.geometry.spherical.computeDistanceBetween(r,o)},mapObj.contentTypeMarkerDetails.push(h))}});mapObj.autoFitMarkers&&!mapObj.reorient&&n.MapsFeature.AdjustBoundsAndZoom(mapObj)}else mapObj.showMore||mapObj.markers.length===0&&mapObj.resultsLeft>0?(mapObj.showMore=!0,mapObj.skipRebound=!1,mapObj.googleMap.setZoom(mapObj.googleMap.getZoom()-1)):mapObj.reorient||(mapObj.showMore=!1,n.MapsFeature.ShowNoResults(mapObj));mapObj.hasSidePanel&&(mapObj.contentTypeMarkerDetails.sort(n.MapsFeature.SortByDistance),n.MapsFeature.BuildSidePanel(mapObj),n.MapsFeature.InitEventHelpers(mapObj));mapObj.$mapContainer.attr("aria-busy","false").removeClass("loading");google.maps.event.addListener(mapObj.googleMap,"idle",function(){mapObj.skipRebound=!1})}},AdjustBoundsAndZoom:function(n){n.googleMap.fitBounds(n.bounds);var t=n.googleMap.getZoom();t>n.zoomLevel&&n.googleMap.setZoom(n.zoomLevel)},HideMapData:function(n){$map=$(n.$parentContainer).find(".list-js-results");$map.length!==undefined&&$map.length!==0&&$map.hide();n.hasLegend&&($legendContainer=$(n.$parentContainer).find(".map-legend"),$legendContainer.length!==undefined&&$legendContainer.hide())},ShowNoResults:function(t){n.MapsFeature.HideMapData(t);$noResult=$(t.$parentContainer).find(".list-js-no-results");$noResult.length!==undefined&&$noResult.show()},ShowResults:function(n){$map=$(n.$parentContainer).find(".list-js-results");$map.length!==undefined&&$map.length!==0&&$map.show();n.hasLegend&&($legendContainer=$(n.$parentContainer).find(".map-legend"),$legendContainer!==undefined&&$legendContainer.show());$noResult=$(n.$parentContainer).find(".list-js-no-results");$noResult!==undefined&&$noResult.hide()},SortByDistance:function(n,t){return n.distance===undefined?-1:t.distance===undefined?1:n.distance-t.distance},InitEventHelpers:function(n){n.$mapResultsList.on("focusout",function(t){n.$mapResultsList_focusProtection&&jQuery.contains(n.$mapResultsList[0],t.target)&&$(t.target).trigger("focus")})},ProtectFocusOnMapResultsList:function(n){n.$mapResultsList_focusProtection=!0;setTimeout(function(){n.$mapResultsList_focusProtection=!1},50)},MatrixCallbackFactory:function(t){return function(i,r){var f="N/A",e="N/A",o=google.maps.DistanceMatrixStatus.OK,u;r==o&&(i.rows[0].elements.length===1&&i.rows[0].elements[0].status==o&&(u=i.rows[0].elements[0],f=u.distance.text,e=u.duration.text),$.extend(t,{distanceString:f,timeString:e,matrixLoaded:!0}));t.detailsLoaded&&t.mapObj.activeMarker===t&&n.MapsFeature.GetMarkerInfo(t)}},ItemDataCallbackFactory:function(t){return function(i){i.success&&($.extend(t,{details:i.markerInfo,detailsLoaded:!0}),t.mapObj.activeMarker===t&&n.MapsFeature.GetMarkerInfo(t))}},UpdateDrivingDataInfoWindow:function(n){var t=n.getInfoWindowContent();t.find(".map-info-distance > span").html(n.distanceString);t.find(".map-info-time > span").html(n.timeString)},UpdateMarkerInfoDetails:function(t){n.MapsFeature.BuildMarkerInfoWindowText(t);t.loadingMessage||t.getInfoWindowContent().trigger("focus")},GetMarkerInfo:function(t){var e=t.details===undefined||t.mapObj.activeMarker!=t,r,u,f,i;if(t.mapObj.activeMarker=t,t.details===undefined&&($.extend(t,{detailsLoaded:!1,details:{},loadingMessage:!0,matrixLoaded:!1,infoWindowCreated:!1}),r=OpenCities.Settings.Application.LanguageSettings.UserLanguage,t.type==="Content"&&(mapObj.contentTypeMarkerDetails.activeMarker=t.marker),u=n.MapsFeature.ItemDataCallbackFactory(t),$.getJSON("/ocapi/get/markerinfo/"+t.id+"/"+r+"?mainContentId="+t.mainContentId,u,"json"),mapObj.centerMarker!==null)){var o=new google.maps.DistanceMatrixService,s={origins:[t.mapObj.searchedLocationLatLng],destinations:[t.marker.position],travelMode:google.maps.TravelMode.DRIVING,unitSystem:OpenCities.Settings.Application.RegionSettings.Distance==="imperial"?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC,durationInTraffic:!0,avoidHighways:!1,avoidTolls:!1},h=n.MapsFeature.MatrixCallbackFactory(t);o.getDistanceMatrix(s,h)}t.loadingMessage||e?(f=n.MapsFeature.BuildMarkerInfoWindowText(t),t.mapObj.infoWindow.setContent(f),t.mapObj.activemarkerWindow!==null&&t.mapObj.activemarkerWindow.close(),t.mapObj.activemarkerWindow=t.mapObj.infoWindow,t.mapObj.infoWindow.open(t.mapObj.googleMap,t.marker)):t.matrixLoaded&&(i=t.getInfoWindowContent(),i.find(".map-info-distance > span").html(t.distanceString),i.find(".map-info-time > span").html(t.timeString));t.getListItem().trigger("oc-select")},BuildMarkerInfoWindowText:function(n){var u=OpenCities.Snippet("Sys Js Loading dots","Loading..."),c=n.infoWindowContentId,i=$('<div class="iw-container" id="'+c+'">'),f=$('<div class="iw-content">'),t=$('<div class="iw-content-details">'),r,e,o,s,h;if(n.detailsLoaded){if(n.loadingMessage=!1,r="has-image",$("body").hasClass("device-mobile")||n.details.Image===null?r="no-image":i.append('<img src="'+n.details.Image+'?w=300&h=150" alt="'+n.details.AltText+'"/>'),$.extend(n,{imageClass:r}),i.addClass(r),e="",n.details.IsCancelled&&(e='<span class="canceled-tag"><span class="canceled-tag-text">'+OpenCities.Snippet("Sys Js Canceled","Canceled")+"<\/span><\/span>"),i.append('<h2 class="iw-title">'+e+n.details.Title+"<\/h2>"),n.details.Description!==""&&n.details.Description!==null&&t.append("<p>"+n.details.Description+"<\/p>"),n.details.Address.Formatted!==""&&t.append("<p>"+n.details.Address.Formatted+"<\/p>"),n.details.AdditionalInfo.forEach(function(n){var i=OpenCities.Snippet("Sys Js Label Next Event","Next Event");t.append("<p>"+i+": "+n.Value+"<\/p>")}),mapObj.centerMarker!==null){var l=OpenCities.Snippet("Sys Js MyArea Distance","Distance"),a=OpenCities.Snippet("Sys Js MyArea Driving Time","Driving Time"),v=n.distanceString===undefined?u:n.distanceString,y=n.timeString===undefined?u:n.timeString;t.append('<p class="map-info-distance">'+l+": <span>"+v+'<\/span> <\/p><p class="map-info-time">'+a+": <span> "+y+"<\/span> <\/p>")}o=n.marker.getPosition();t.append('<a href="https://www.google.com/maps/dir/?api=1&destination='+o+'" target="_blank">Get directions<span class="visuallyhidden"> to <span class="iw-card-title">'+n.details.Title+"<\/span><\/span><\/a>");s=OpenCities.Snippet("Sys Js Tell me more about","Tell me more about");t.append('<a href="'+n.details.Link+'" target="_blank">'+s+' <span class="iw-card-title">'+n.details.Title+"<\/span><\/a>");f.append(t,'<div class="iw-bottom-gradient">')}else n.loadingMessage=!0,i.append('<h2 class="iw-title">'+n.marker.title+"<\/h2>"),t.append('<p class="loading">'+u+"<\/p>"),f.append(t);return i.append(f),h=$("<div>").append(i),h.html()},InitialiseLegend:function(t,i){var u=n.MapsFeature.GetMapObject(i),r,f,e;u!=null&&u!==undefined&&(r=u.$mapContainer.siblings(".map-legend"),r.remove(),r=$('<section class="map-legend"><p class="visuallyhidden">Map legend<\/p><\/section>'),f=$('<ul class="clearfix"><\/ul>'),e=t.reduce(function(n,t){var i=n.filter(function(n){return t.Id===n.Id});return i.length===0&&n.push(t),n},[]),e.forEach(function(n){$('<li class="clearfix"><img alt="" src='+n.IconUrl+" /><span>"+n.Name+"<\/span><\/li>").appendTo(f)}),f.appendTo(r),r.appendTo(u.$parentContainer))},MapLinkClicked:function(t,i){i.skipRebound=!0;$(i.googleMap.getDiv().childNodes[0]).children("div").last().trigger("click");i.googleMap.setZoom(i.zoomLevel);var r=t.marker.position;return i.googleMap.getBounds().contains(r)||i.googleMap.panTo(r),google.maps.event.trigger(t.marker,"spider_click"),n.MapsFeature.ShowMapView(i),i.skipRebound=!1,!1},ShowListView:function(n){n.$mapContainer.addClass("hidden-tab").removeClass("selected-tab");n.$mapResultsList.removeClass("hidden-tab").addClass("selected-tab");$(n.$parentContainer).find(".button-map-view").attr({"aria-selected":"false",tabindex:"-1"}).removeClass("selected");$(n.$parentContainer).find(".button-list-view").attr({"aria-selected":"true",tabindex:"0"}).addClass("selected")},ShowMapView:function(n){n.$mapContainer.removeClass("hidden-tab").addClass("selected-tab");n.$mapResultsList.addClass("hidden-tab").removeClass("selected-tab");$(n.$parentContainer).find(".button-map-view").attr({"aria-selected":"true",tabindex:"0"}).addClass("selected");$(n.$parentContainer).find(".button-list-view").attr({"aria-selected":"false",tabindex:"-1"}).removeClass("selected");google.maps.event.trigger(n.googleMap,"resize")},ProcessClassName:function(n,t){return"oc_"+n.replace(/ /g,"_").replace(/[^a-zA-Z0-9-_]/g,"").toLowerCase()+t},UnHighlightAllMarkers:function(t){n.MapsFeature.SetAllMarkerStyles({opacity:1},t)},HightlightMarker:function(t,i){if(i.$mapContainer.is(":visible")){n.MapsFeature.SetAllMarkerStyles({opacity:.3,zIndex:1},i);var r=t===t.map.activeMarker?3:2;n.MapsFeature.SetMarkerStyles(t.marker,{opacity:1,zIndex:r});typeof t.map.activeMarker=="object"&&t.map.activeMarker!==null&&t!==t.map.activeMarker&&n.MapsFeature.SetMarkerStyles(t.map.activeMarker.marker,{opacity:1,zIndex:3})}},SetAllMarkerStyles:function(t,i){for(var r=0;r<i.contentTypeMarkerDetails.length;r++)n.MapsFeature.SetMarkerStyles(i.contentTypeMarkerDetails[r].marker,t)},SetMarkerStyles:function(n,t){n!==null&&n!==undefined&&(t.opacity!==undefined&&n.setOpacity(t.opacity),t.zIndex!==undefined&&n.setZIndex(t.zIndex))},BuildSidePanel:function(t){var r,u,f,e;t.$mapResultsList.text("");var c=OpenCities.Snippet("Sys Js MyArea Load more results","Load more results"),l=OpenCities.Snippet("Sys Js MyArea Load more results below","Load more results below"),a=OpenCities.Snippet("Sys Js MyArea Results Instructions","Clicking an item in the list below opens an info window on the map and moves focus to it"),v=OpenCities.Snippet("Sys Js MyArea Location selection with 1 result","Location selection with 1 result"),y=OpenCities.Snippet("Sys Js MyArea Location selection with n0 results","Location selection with {0} results"),o="";for(o=t.contentTypeMarkerDetails===1?v:y.replace(/\{0\}/i,t.contentTypeMarkerDetails.length),$('<div class="visuallyhidden list_help" id="map-results-list-description"><p>'+a+"<\/p><\/div>").appendTo(t.$mapResultsList),r=$("<ul>").attr({role:"tablist","aria-describedby":"map-results-list-description","aria-label":o,"aria-orientation":"vertical"}),u=0;u<t.contentTypeMarkerDetails.length;u++){var i=t.contentTypeMarkerDetails[u],p=i.type,s=$("<li>").attr({role:"presentation"}),h=$("<a>").attr({role:"tab","aria-controls":t.mapApplicationId,"aria-selected":"false",href:"#",id:"item_"+i.itemId}).data("marker",i).addClass(n.MapsFeature.ProcessClassName(i.legendLabel,i.layerId)).on("click",function(i){console.log(i);var r=$(this);n.MapsFeature.MapLinkClicked(r.data("marker"),t);i.preventDefault();r.trigger("oc-select")}).on("oc-select",function(){var n=$(this);n.parent().parent().find(".selected").removeClass("selected").find("[aria-selected]").attr("aria-selected","false");n.attr("aria-selected","true").parent().addClass("selected")}).on("oc-deselect",function(){var n=$(this);n.attr("aria-selected","false").parent().removeClass("selected")}).on("focus",function(){$(this).parent().addClass("has-focus")}).on("blur",function(){$(this).parent().removeClass("has-focus");n.MapsFeature.UnHighlightAllMarkers(t)}).on("mouseenter focus click",function(){n.MapsFeature.HightlightMarker($(this).data("marker"),t)});$('<div class="side-panel">').append($("<span>").addClass("visuallyhidden").html(p)).append('<img src="'+i.iconUrl+'" alt="'+i.title+'" class="item-icon">').append($('<span class="item-name">').html(i.title)).appendTo(h);h.appendTo(s);s.appendTo(r);r.on("mouseleave",function(){n.MapsFeature.UnHighlightAllMarkers(t)})}t.resultsLeft>0&&(f=$("<li>"),$("<a>").attr({role:"button",href:"#","aria-label":l}).addClass("show-more").on("click",function(i){var r=$(this).parent().prev().children().first().attr("id");typeof r=="string"&&t.$mapResultsList.data("prev-focus-id",r);n.MapsFeature.ShowMore();i.preventDefault()}).html('<i aria-hidden="true"><\/i>'+c).appendTo(f),f.appendTo(r));t.$mapResultsList.append(r);t.$mapResultsList.hasClass("scroll-to-bottom")&&t.$mapResultsList.animate({scrollTop:t.$mapResultsList.prop("scrollHeight")},1e3);t.$mapResultsList.removeClass("panel-loading").removeClass("scroll-to-bottom");e=t.$mapResultsList.data("prev-focus-id");typeof e=="string"&&($("#"+e).parent().next().children().first().trigger("focus"),t.$mapResultsList.removeData("prev-focus-id"))},ShowMore:function(){mapObj.showMore=!0;mapObj.googleMap.setZoom(mapObj.googleMap.getZoom()-1);mapObj.$mapResultsList.addClass("scroll-to-bottom").animate({scrollTop:mapObj.$mapResultsList.prop("scrollHeight")},1e3);mapObj.skipRebound=!1}},Plugins:{Pagination:{_options:{pages:10,currentPage:1,displayedPages:3,edges:1,cssStyle:"light-theme",prevText:"Sys Js Label Previous",nextText:"Sys Js Label Next",selectOnClick:!1},init:function(){var t,u;this.init=function(){};var f=this,i="OpenCities.Plugins.Pagination.init",r=n.Tools.ArgsAsOptions(arguments,[{string:"sc_selector"}]);if(r===!1)return console.warn(i+": failed"),!1;if(t=$.extend({},this._options,r||{}),t.prevText=n.Snippet(t.prevText,"Previous"),t.nextText=n.Snippet(t.nextText,"Next"),u={"jQuery Simple Pagination":$.fn.pagination,"selector for pagination":t.sc_selector},!n.Dependencies.Check(u,i))return $(t.sc_selector).find(".seamless-pagination-controls").show(),!1;$(".seamless-pagination-data").removeAttr("role").removeAttr("aria-label");$(t.sc_selector).each(function(){var i=$(this),n=$.extend({},t,{onPageClick:function(n,t){f.SetPage(n,i);t.preventDefault()}});$(".seamless-pagination-data",i).each(function(){n.pages=$("option",this).length;n.currentPage=$("option:selected",this).val()});n.pages>0&&$(".seamless-pagination-pages",i).pagination(n)})},SetPage:function(n,t){$(".seamless-pagination-data select",t).val(n);$(".seamless-pagination-data input",t).trigger("click")}},Accordion:{_options:{accordionHeadElement:".oc-accordion-head",accordionOpened:"accordion-opened",accordionClosed:"accordion-closed",accordionDataAttrBody:"accordion-body",accordionBodySelector:".accordion-body",accordionDataAttrOpen:"open",accordionDataAttrGroup:"accordion-group",accordionDataAttrAllDevices:"accordion-all-device",accordionAllDevices:!0,triggerSelector:".accordion-trigger",accordionListContainer:".accordion-list-container",initialBind:!1,slideToggleSpeed:"fast",accordionDataAttrUseCookies:"accordion-use-cookie"},_accordions:[],init:function(){var s=this,o=n.Tools.ArgsAsOptions(arguments,[{string:"triggerSelector"},{boolean:"initialBind"}]),t,e,i,r,f;if(o===!1)return console.warn("OpenCities.Plugins.Accordion.init: failed"),!1;if(t=$.extend({},this._options,o||{}),e=$(t.triggerSelector),e===undefined||e==null||e.length===0)return!1;var h=n.Snippet("Sys Js Loading dots","Loading..."),c=n.Snippet("Sys Js Search Server Error","Error retrieving results from server"),u={_openAccordion:function(i,r,u){var e,o,f,s;switch(u){case"slide":$(r).slideDown();break;default:$(r).show()}this._setTriggerState(i,"open");$(r).removeClass("rs_skip");n.Tools.RefreshPlugins();e=$(i).data(t.accordionDataAttrUseCookies);e&&(o="accordion-state-"+$(i).data(t.accordionDataAttrBody),f=new Date,f.setTime(f.getTime()+6e4),s="expires="+f.toUTCString(),document.cookie=o+"=open; "+s)},_closeAccordion:function(n,i,r){var f,e,u,o;switch(r){case"slide":$(i).slideUp();break;default:$(i).hide()}this._setTriggerState(n,"close");$(i).addClass("rs_skip");f=$(n).data(t.accordionDataAttrUseCookies);f&&(e="accordion-state-"+$(n).data(t.accordionDataAttrBody),u=new Date,u.setTime(u.getTime()+6e4),o="expires="+u.toUTCString(),document.cookie=e+"=close; "+o)},_switchAccordion:function(n,t,i){switch(i){case"open":this._openAccordion(n,t);break;case"close":this._closeAccordion(n,t)}},_setTriggerState:function(n,i){switch(i){case"open":$(n).addClass(t.accordionOpened).removeClass(t.accordionClosed).attr({"aria-expanded":"true"}).trigger("oc-accordion-open");$(n).data("hidden-text").text("(hide below)");break;case"close":$(n).addClass(t.accordionClosed).removeClass(t.accordionOpened).attr({"aria-expanded":"false"}).trigger("oc-accordion-close");$(n).data("hidden-text").text("(show below)")}},_ajaxOnOpen:function(t,i,r,u,f,e){t.data("has-content")!==!0&&(t.attr("aria-busy","true").addClass("loading").data("has-content",!0),i.html('<span class="visuallyhidden">'+f+"<\/span>").show(),i.nextAll().remove(),$.ajax({url:"/OCServiceHandler.axd?url=ocsvc/"+n.Settings.Application.GroupName+"/meetings/documentrenderer",data:{keywords:r,cvid:u,cachebuster:(new Date).toISOString()},success:function(n){i.slideUp(function(){i.remove()});$html=$(n.html).hide();var r=$html.find(".alt-formats"),u=r.find("a");u.length>1&&(r.attr({role:"list"}),u.attr({role:"listitem"}));t.prepend($html);$html.slideDown();t.attr("aria-busy","false").removeClass("loading");OpenCities.Plugins.ZipAll.initItem($html.find(".zip-all"))},error:function(n,r,u){i.hide();var f="";try{f=n.responseJSON._response_status.messages[0].message}catch(o){f=u}$serverMessage=$("<p>"+e+(f===""?"":"<br /><strong>"+f+"<\/strong><\/p>"));t.append($serverMessage);t.data("has-content",!1).attr("aria-busy","false").removeClass("loading")},dataType:"json",type:"GET"}))},_ajaxOnOpenFactory:function(n,t,i,r,u,f){var e=this;return function(){e._ajaxOnOpen(n,t,i,r,u,f)}}};e.each(function(){var k=this,i=$(this),e,p,w,l,f,a,b;if(i.data("accordion-init")===!0)return!0;i.data("accordion-init",!0);e=$("<span>").addClass("visuallyhidden");i.data("hidden-text",e);var v=n.Tools.ValueOrDefault(i.data(t.accordionDataAttrBody),t.accordionBodySelector),r=$(v),g=i.data(t.accordionDataAttrOpen),y=i.data(t.accordionDataAttrGroup),d=n.Tools.ValueOrDefault(i.data(t.accordionDataAttrAllDevices),t.accordionAllDevices),o=i.closest(t.accordionHeadElement);if(o.length>0){o.on("oc-accordion-open",function(){$(this).removeClass(t.accordionClosed).addClass(t.accordionOpened)});o.on("oc-accordion-close",function(){$(this).removeClass(t.accordionOpened).addClass(t.accordionClosed)})}if(p=i.data("accordionReset"),w=function(n,t,i,r,u){var f=function(){var e,f;if(i._setTriggerState(n,"open"),$(n).css("display")!=="none"&&$(n).css("visibility")!=="hidden"){var l=$(n).data(r.accordionDataAttrOpen),o=l?"open":"close",a=$(n).data(r.accordionDataAttrUseCookies);if(a){var s="accordion-state-"+$(n).data(r.accordionDataAttrBody)+"=",h=document.cookie.split(";"),c="";for(e=0;e<h.length;e++){for(f=h[e];f.charAt(0)==" ";)f=f.substring(1);if(f.indexOf(s)==0){c=f.substring(s.length,f.length);break}}c==="open"&&(o="open")}i._switchAccordion(n,t,o)}else i._openAccordion(n,t);typeof u=="function"&&u()};return f(),d?function(){}:f}(k,r,u,t,p,e),i.data("accordionReset",w),i.hasClass("ajax-trigger")){if(l=i.data("cvid"),typeof l!="undefined"){f=i.closest(t.accordionListContainer).data("search-keywords");f=f!==undefined&&f!==null?f:"";$loader=$('<div class="loader"><\/div>');r.attr({"aria-live":"polite","aria-busy":"false"}).append($loader);i.on("oc-accordion-open",u._ajaxOnOpenFactory(r,$loader,f,l,h,c))}r.addClass("initialised")}i.is("a")&&i.removeAttr("href");i.attr({role:"button"});typeof i.attr("tabindex")=="undefined"&&i.attr("tabindex",0);i.on("keyup",function(n){(n.keyCode==13||n.keyCode==32)&&$(this).trigger("click")}).on("keydown",function(n){(n.keyCode==13||n.keyCode==32)&&n.preventDefault()});i.text().trim()===""&&(a=i.parent(),a.text().trim()!==""&&(b=n.Tools.UniqueId(a),i.attr("aria-labelledby",b)));i.attr("aria-controls",v.substr(1)).append(e);i.on("click",function(n){var i=$(this),f;y?(f="[data-"+t.accordionDataAttrGroup+'="'+y+'"]',$(f).each(function(){var n=$(this),i=n.data(t.accordionDataAttrBody);n.hasClass(t.accordionOpened)?u._closeAccordion(n,i,"slide"):u._openAccordion(n,i,"slide")})):i.hasClass(t.accordionOpened)?u._closeAccordion(i,r,"slide"):u._openAccordion(i,r,"slide");n.preventDefault()});s._accordions.push(this)});r=window.location.hash;r!==""&&(f=$('a[name="'+r.substr(1)+'"], a'+r),i=f.length>0?f.closest(".accordion-list-item-container").find(".accordion-trigger"):$('a[data-accordion-body="'+r+'"]'),i.length>0&&i.hasClass("accordion-closed")&&(i.trigger("click"),$("html, body").animate({scrollTop:i.offset().top-50},400)));$(window).on("hashchange",function(){r=window.location.hash;f=$('a[name="'+r.substr(1)+'"], a'+r);i=f.length>0?f.closest(".accordion-list-item-container").find(".accordion-trigger"):$('a[data-accordion-body="'+r+'"]');i.length>0&&i.hasClass("accordion-closed")&&(i.trigger("click"),$("html, body").animate({scrollTop:i.offset().top-50},400))});$(".rsbtn").length>0&&(n.Tools.PreserveReadSpeaker($(t.accordionListContainer)),$(t.accordionListContainer).find(".visuallyhidden").addClass("rs_skip"))},Reset:function(n){var i=function(n){var t=$(n).data("accordionReset");typeof t=="function"&&t()},t;if(n)$(n).each(function(){i(this)});else for(t=0;t<this._accordions.length;t++)i(this._accordions[t])}},PredictiveSearch:{_options:{searchWrap:".sc-search-panel",searchInput:".sc-search-panel .sc-search-text",searchButton:".sc-search-panel .sc-search-button",searchdlvname:"OC RSS "+n.Settings.Application.GroupName+" Search",resultItem:"a.predictive-search-link-item",outputdiv:"#predictiveResults",moreResultsLocation:n.Settings.Application.SearchSettings.ResultsPage,moreResultsHyperlink:".search-view-more",moreResultsListview:n.Settings.Application.SearchSettings.ResultsQuerystring,includeStaff:$("body").hasClass("website-type-intranet"),searchInnerContainer:".search-inner-container"},init:function(){this.init=function(){};var r=this,t=n.Tools.ArgsAsOptions(arguments),i=$.extend({},this._options,t||{});
/*!
                    * jQuery Predictive Search v1.1
                    *
                    * Copyright 2011, Seamless Solutions
                    *
                    * Date: Wed Dec 14, 2011 04:00PM
                    */
(function(t){var f,o;if(t=$.extend({outputdiv:"#predictiveResults",resultItem:"li",searchInput:"",searchButton:"",searchdlvname:"",textDiv:".searchFeedAbstract",titleDiv:".searchFeedTitle a",textLimit:100,titleLimit:50,moreResultsHyperlink:"",moreResultsLocation:"",moreResultsListview:"",searchInnerContainer:""},t),f=$(t.outputdiv),f===undefined||f==null||f.length===0)return!1;var s="/feed.rss?listname="+t.searchdlvname+"&dlv_"+t.searchdlvname+"=(keyword=",h="/ocapi/"+n.Settings.Application.GroupName+"/search/user/quicksearch?keyword=",e=null,i=this,u=null,r="";try{$(t.searchInput)[0].setAttribute("autocomplete","off")}catch(l){}$(t.searchInput).on("click",function(){this.setAttribute("autocomplete","off")});$(t.outputdiv).on("click",function(){n.Analytics.Record.SiteSearch($(t.searchInput).val());n.Analytics.Record.SearchClick($(t.searchInput).val(),$(this).find(".itemSelected").attr("href"))});$(t.searchButton).on("click",function(){n.Analytics.Record.SiteSearch($(t.searchInput).val())});$(t.searchInnerContainer).on("focusout",n.Tools.Debounce(function(){var n=$(t.searchInnerContainer).get(0).contains(document.activeElement);n||$(t.outputdiv).fadeOut(500,function(){this.innerHTML="";OpenCities.Plugins.PageOverlay.HideOverlay()})},1e3));$(t.searchInput).on("focus",function(){$(t.outputdiv).clearQueue()});$(t.searchInput).on("keypress",function(t){if($("body").hasClass("website-type-intranet")&&n.Plugins.PageOverlay.ShowOverlay(),t.which!=13&&t.which!==0){if(t.which==8)return;u&&clearTimeout(u);r=this.value+String.fromCharCode(t.which);u=setTimeout(function(){i.fetchResults(r)},500)}else navigator.userAgent.indexOf("Firefox")!=-1&&t.which===0||(t.stopPropagation(),t.preventDefault())});$(t.searchInput).on("keydown",function(n){if(n.which==13)return n.stopPropagation(),n.preventDefault(),n.cancelBubble=!0,n.returnValue=!1,!1});$(t.searchInput).on("keyup",function(f){var e;if(f.which==40)i.moveBy(1);else if(f.which==38)i.moveBy(-1);else if(f.which==8||f.which==46)u&&clearTimeout(u),r=this.value,i.fetchResults(r);else if(f.which==37)e=n.Tools.Caret.getPosition($(t.searchInput)[0]),navigator.userAgent.indexOf("Firefox")!=-1&&(e-=1),n.Tools.Caret.setPosition($(t.searchInput)[0],e);else if(f.which==39)e=n.Tools.Caret.getPosition($(t.searchInput)[0]),navigator.userAgent.indexOf("Firefox")!=-1&&(e+=1),n.Tools.Caret.setPosition($(t.searchInput)[0],e);else if(f.which==13)if(f.stopPropagation(),f.preventDefault(),$(t.outputdiv+" "+t.resultItem+".itemSelected").length>0)i.navigateOut();else try{$(t.searchButton).first().trigger("click")}catch(o){}});i.moveBy=function(n){var f=$(t.outputdiv+" "+t.resultItem+".itemSelected"),e=-1,u=$(t.outputdiv+" "+t.resultItem),r;f.length>0&&(e=$(t.outputdiv+" "+t.resultItem).index(f[0]));r=e+n;r+=u.length;r%=u.length;i.moveTo(u[r])};i.moveTo=function(n){$(t.outputdiv+" "+t.resultItem).removeClass("itemSelected");n&&(n.className+=" itemSelected")};i.navigateOut=function(){var n=$(t.outputdiv+" "+t.resultItem+".itemSelected");document.location=$(n[0]).attr("href")};i.processResults=function(u,f){var o="",e="",c,s,h;if(f!==""&&(f.listItems.forEach(function(n){var i=n.JobTitle,r=n.Department,t="";i!==""&&(t=i);r!==""&&(t!==""&&(t+='<span class="sub-title-seperator"> <\/span>'),t+=r);e+='<li><a href="'+n.StaffProfilePage+'" class="predictive-search-link-item"><h2>'+n.FullName+"<\/h2><p>"+t+"<\/p><\/a><\/li>"}),e!==""&&(e="<ul>"+e+"<\/ul>")),u!==""&&(c=$.parseHTML(u),$(c[0]).find("a").each(function(){var n=$(this),t=n.attr("target");t==="_blank"&&(n.attr("aria-describedby","new-window-0"),n.addClass("opens-in-new-tab"))}),u=c[0].outerHTML),$(t.outputdiv).removeClass("wider-results"),u!==""&&e!==""?(s="",h="",n.Settings.Application.SearchSettings.ResultsStaffTitle!==""&&(s="<h2>"+n.Settings.Application.SearchSettings.ResultsStaffTitle+"<\/h2>"),n.Settings.Application.SearchSettings.ResultsContentTitle!==""&&(h="<h2>"+n.Settings.Application.SearchSettings.ResultsContentTitle+"<\/h2>"),n.Settings.Application.SearchSettings.ResultsStaffFirst?(o+='<div class="nested-results">'+s+e+"<\/div>",o+='<div class="nested-results">'+h+u+"<\/div>"):(o+='<div class="nested-results">'+h+u+"<\/div>",o+='<div class="nested-results">'+s+e+"<\/div>"),o=i.AppendMoreResultsCombined(o),$(t.outputdiv).addClass("wider-results")):u!==""?(u=i.AppendMoreResults(u),o=u):e!==""&&(e=i.AppendMoreResults(e),o=e),$(t.outputdiv).html(o),o===""){$(t.outputdiv).html("<p>"+n.Snippet("Sys Js Search No results found","No results found.")+"<\/p>");return}$(t.outputdiv+" "+t.resultItem).on("mouseover",function(){i.moveTo(this)});$(t.outputdiv+" "+t.textDiv).each(function(n,i){i.innerHTML=i.innerHTML.length>t.textLimit?i.innerHTML.substring(0,t.textLimit)+"...":i.innerHTML});$(t.outputdiv+" "+t.titleDiv).each(function(n,i){i.innerHTML=i.innerHTML.length>t.titleLimit?i.innerHTML.substring(0,t.titleLimit)+"...":i.innerHTML});OpenCities.Plugins.HighlightText.HighlightText(t.outputdiv+" .predictive-search-link-item h2",r);OpenCities.Plugins.HighlightText.HighlightText(t.outputdiv+" .predictive-search-link-item p",r)};o=n.Snippet("Sys Js Search View More results","View More results");i.AppendMoreResults=function(n){var i=t.moreResultsLocation+t.moreResultsListview.replace(/\{0\}/g,encodeURIComponent(r));return n.replace("<\/ul>",'<li><a href="'+i+'" class="predictive-search-link-item search-view-more">'+o+"<\/a><\/li><\/ul>")};i.AppendMoreResultsCombined=function(n){var i=t.moreResultsLocation+t.moreResultsListview.replace(/\{0\}/g,encodeURIComponent(r));return n+'<div class="results-full-results"><a href="'+i+'" class="predictive-search-link-item search-view-more">'+o+"<\/a><\/div>"};i.fetchResults=function(r){var o=n.Snippet("Sys Js Loading dots","Loading..."),u=n.Snippet("Sys Js Search Server Error","Error retrieving results from server"),f=n.Snippet("Sys Js Search No Access","Your session has expired. Please refresh the page and try again.");if(e!==null&&e.abort(),r.length<3){$(t.outputdiv).html("");$(t.outputdiv).hide();return}$(t.outputdiv).show();$(t.outputdiv).html('<div class="search-loading">'+o+"<\/div>");i.currentIndex=0;e=$.ajax({url:s+r+")",type:"GET",dataType:"html",context:document.body,success:function(n){$contentData=n;t.includeStaff?e=$.ajax({url:h+r,type:"GET",dataType:"json",context:document.body,success:function(n){$userData=n;i.processResults($contentData,$userData)},error:function(n){var i=n.status===403?f:u;$(t.outputdiv).html("<p>"+i+"<\/p>")}}):i.processResults($contentData,"")},error:function(n){var i=n.status===403?f:u;$(t.outputdiv).html("<p>"+i+"<\/p>")}})}})(i)}},LightboxSearch:{init:function(){var t=$(".website-type-intranet #header-search");if(t===undefined||t==null||t.length===0)return!1;t.on("focusout",function(t){t.relatedTarget!=null&&($parents=$(t.relatedTarget).parents("#header-search"),$parents.length>0)||($(".background-container").removeClass("search-focused"),n.Plugins.PageOverlay.HideOverlay())});t.on("focusin",function(){$(".background-container").hasClass("search-focused")||($(".background-container").addClass("search-focused"),n.Plugins.PageOverlay.ShowOverlay())})}},PageOverlay:{ShowOverlay:function(){$overlayDiv=$(".overlay-container");$overlayDiv.css("display","block");$overlayDiv.animate({opacity:1},500)},HideOverlay:function(){$overlayDiv=$(".overlay-container");$overlayDiv.animate({opacity:0},500,function(){$overlayDiv.css("display","");$overlayDiv.css("opacity","")})}},BreakpointChange:{_options:{},_sizes:[],_breakpointChangeListeners:{},_globalChangeListeners:[],_lastIn:!1,_fireBreakpointChange:function(n,t,i){var r=function(r){for(var f,u=0;u<r.length;u++)f=r[u],typeof f=="function"&&f(n,t,i)};r(this._globalChangeListeners);this._breakpointChangeListeners[n]&&r(this._breakpointChangeListeners[n])},onBreakpointChange:function(){var t=n.Tools.ArgsAsOptions(arguments,[{"function":"func",string:"listenForSize"},{"function":"func"}]),u,f,r,i;if(t.func&&(t.listenForSize?(this._breakpointChangeListeners[t.listenForSize]||(this._breakpointChangeListeners[t.listenForSize]=[]),this._breakpointChangeListeners[t.listenForSize].push(t.func)):this._globalChangeListeners.push(t.func),this._lastIn!==!1))if(t.listenForSize)u=t.listenForSize===this._lastIn,f=u?!1:this._lastIn,t.func(t.listenForSize,u,f);else{for(r=[],i=0;i<this._sizes.length;i++)this._lastIn===this._sizes[i]?t.func(this._sizes[i],!0,!1):r.push(this._sizes[i]);for(i=0;i<r.length;i++)t.func(r[i],!1,this._lastIn)}},init:function(){var t,i,r;if(this.init=function(){},t=this,window.__oc_flags_ImprovedBreakpointEventHandling){ocSizePoint.onSizeChange(function(n,i){t._fireBreakpointChange(n,!0,i);i!==null&&t._fireBreakpointChange(i,!1,i);t._lastIn=n});for(i=0;i<window.__ocSizePoints.length;i++)t._sizes.push(window.__ocSizePoints[i].name)}else{var u=n.Tools.ArgsAsOptions(arguments),e=$.extend({},this._options,u||{}),f={metaQuery:metaQuery};if(!n.Dependencies.Check(f,"OpenCities.Plugins.BreakpointChange.init"))return!1;r=function(n){var i="sc-size-"+n;t._sizes.push(i);metaQuery.onBreakpointChange(i,function(n){t._fireBreakpointChange(i,n,t._lastIn);n&&(t._lastIn=i)})};$(function(){for(var n=1;n<=4;n++)r(n)})}this.onBreakpointChange(function(n,t){if(t)switch(n){case"sc-size-1":OpenCities.Plugins.PredictiveSearch.init();break;case"sc-size-2":OpenCities.Plugins.PredictiveSearch.init()}n=="sc-size-1"&&OpenCities.Plugins.Accordion.Reset()})}},Menu:{init:function(){this.init=function(){};$(".navigation-container").data("menu-type")==="offscreen"?OpenCities.Plugins.Menu.OffScreenMenu.init():OpenCities.Plugins.Menu.HorizontalMenu.init()},HorizontalMenu:{_options:{selector:"#sc-main-menu",mobileNavButton:"#btn-mob-nav",mobileSubArrow:".mobnav-subarrow",mobileSubArrowChild:".mobnav-subarrow-child",mobileChildOpenClass:"xpopdrop",animationSpeed:"fast",menuOpen:"side-menu-open",activeMenuClass:"offscreen-active-menu",activeMenu:".offscreen-active-menu",activeSubMenuClass:"active-sub-menu",activeSubMenu:".navigation-outer-container ul.active-sub-menu"},init:function(){function a(t,r,u){if($(t.mobileSubArrow).off("click.desktopMenu"),$(t.mobileSubArrow).off("focus.desktopMenu"),$(t.mobileSubArrowChild).off("click.desktopMenu"),$(t.mobileSubArrowChild).off("focus.desktopMenu"),$(document).off("keyup.desktopMenu"),$(document).off("keyup.mobileMenu"),$(".main-menu-last-link").off("blur.mobileMenu"),$(t.mobileSubArrow).off("click.mobileMenu"),$(t.mobileSubArrowChild).off("click.mobileMenu"),$(".navigation-outer-container ul.level-1 > li:last > a").off("keydown.mobileMenu"),$(".navigation-outer-container ul.level-1 > li:last >"+t.mobileSubArrow+":button").off("keydown.mobileMenu"),u=="sc-size-1"){$(t.mobileSubArrow).on("click.desktopMenu",function(n){$(this).next("ul").show();$(this).attr("aria-expanded",!0);$(this).next("ul").find("a:first").trigger("focus");n.preventDefault()});$(t.mobileSubArrow).on("focus.desktopMenu",function(n){$(this).attr("aria-expanded",!1);$(this).next("ul").hide();n.preventDefault()});$(t.mobileSubArrowChild).on("click.desktopMenu",function(n){$(this).next("ul").show();$(this).attr("aria-expanded",!0);$(this).next("ul").find("a:first").trigger("focus");n.preventDefault()});$(t.mobileSubArrowChild).on("focus.desktopMenu",function(n){$(this).attr("aria-expanded",!1);$(this).next("ul").hide();n.preventDefault()});$(document).on("keyup.desktopMenu",function(n){if(n.keyCode===f.TAB&&$(".sf-menu .sfHover").length>0){var t=$(document.activeElement);t.siblings("ul").not(".mega-menu .third-level-container").hide();t.attr("aria-expanded",!1);n.preventDefault()}})}else if(n.Plugins.SiteSearch.IsAlwaysDisplay()||$(".header-container").hasClass("header-layout-3")||$(".header-container").hasClass("header-layout-4")){$(document).on("keyup.mobileMenu",function(n){n.keyCode===f.ESC&&$("body").hasClass("side-menu-open")&&r.closeMenuEscape(t,i,r)});$(".main-menu-last-link").on("blur.mobileMenu",function(){setTimeout(function(){$(document.activeElement).is(".main-menu-link, .mobnav-subarrow, .mobnav-subarrow-child")||$("#btn-mob-nav").trigger("focus")},0)});$(t.mobileSubArrow).on("click.mobileMenu",function(n){n.preventDefault();$(this).attr("aria-expanded",!0);r.clickedArrow(this,$(".navigation-outer-container").innerWidth(),t)});$(t.mobileSubArrowChild).on("click.mobileMenu",function(n){n.preventDefault();$(this).attr("aria-expanded",!0);r.clickedArrow(this,$(".navigation-outer-container").innerWidth(),t)});$(".navigation-outer-container ul.level-1 > li:last > a").on("keydown.mobileMenu",function(n){if(n.keyCode===f.TAB&&!n.shiftKey){n.preventDefault();var u=$(this).next(t.mobileSubArrow+":button");u!==null&&u!==undefined&&u.length>0?u.trigger("focus"):r.closeMenuEscape(t,i,r)}});$(".navigation-outer-container ul.level-1 > li:last >"+t.mobileSubArrow+":button").on("keydown.mobileMenu",function(n){n.keyCode!==f.TAB||n.shiftKey||(n.preventDefault(),r.closeMenuEscape(t,i,r))});$(".navigation-outer-container ul.level-1 > li:first > a").on("keydown.mobileMenu",function(n){n.keyCode===f.TAB&&n.shiftKey&&(n.preventDefault(),r.closeMenuEscape(t,i,r))})}else{$(t.mobileSubArrow).on("click",function(n){$(this).parent().toggleClass(t.mobileChildOpenClass);n.preventDefault()});$(t.mobileSubArrowChild).on("click",function(n){$(this).parent().toggleClass(t.mobileChildOpenClass);n.preventDefault()})}}function v(){var r,f;if(!i.hasClass("sf-mobile")){if(i.hide().addClass("sf-mobile").removeClass("sf-desktop").attr("aria-describedby","").superfish("destroy"),n.Plugins.SiteSearch.IsAlwaysDisplay()||$(".header-container").hasClass("header-layout-3")||$(".header-container").hasClass("header-layout-4")){$("body").addClass("side-menu");$("body").addClass("side-menu-right");i.removeClass("sf-menu").addClass("nav-offscreen-menu "+t.activeMenuClass);u.attr({"aria-expanded":"false","aria-label":"Menu"}).addClass("not-pressed").removeClass("pressed");$(".side-menu-btn-text",u).text("Menu");i.addClass("sf-mobile");$("body").removeClass(t.menuOpen);r=$("ul:not(.navigation-top-tasks-list)",i);r.each(function(){var t=$("> a",$(this).parent()).text(),i=n.Snippet("Sys Js Menu Back to n0","Back to {0}"),r=i.replace(/\{0\}/i,t);$(this).prepend('<li><a href="#" class="prev-link">'+r+"<\/a><\/li>")});($(".header-container").hasClass("header-layout-3")||$(".header-container").hasClass("header-layout-4"))&&$(".header-outer-container").after($(".navigation-outer-container"));$(".prev-link").on("click",function(n){var r;n.preventDefault();$(t.activeSubMenu).last().removeClass(t.activeSubMenuClass);r=$(t.activeMenu).last();r.parent().parent().addClass(t.activeMenuClass);r.removeClass(t.activeMenuClass);var u=parseInt(i.data("level")),e="level-"+u,f="level-"+(u-1);i.addClass(f).removeClass(e).data("level",u-1);f==="level-1"?i.css("left",0):i.css("left","-"+$(".navigation-outer-container").innerWidth()+"px");$(this).closest("ul").parent("li").find("a").first().trigger("focus");$(this).closest("ul").prev("button.mobnav-subarrow").attr("aria-expanded","false")})}else if(f=$(t.mobileSubArrow+", "+t.mobileSubArrowChild).attr("aria-expanded","false"),i.data("expand-event-added")===undefined){i.data("expand-event-added",!0);f.on("click",function(){$(this).attr("aria-expanded")!==undefined&&($(this).attr("aria-expanded")==="false"?$(this).attr("aria-expanded","true"):$(this).attr("aria-expanded","false"))})}$(t.mobileSubArrowChild).removeAttr("tabindex")}}function y(){if(!i.hasClass("sf-desktop")){u.parent().removeAttr("role");u.addClass("not-pressed").removeClass("pressed");(n.Plugins.SiteSearch.IsAlwaysDisplay()||$(".header-container").hasClass("header-layout-3")||$(".header-container").hasClass("header-layout-4"))&&(r.closeMenu($(".navigation-outer-container").innerWidth(),t),$(".side-menu .navigation-outer-container ul").css("width",""),$("ul",i).css("left",""),$(".side-menu-right .navigation-outer-container").css("right",""),$(".side-menu-right .background-container").css("left",""),$("body").removeClass("side-menu"),$("body").removeClass("side-menu-right"),$("body").removeClass(t.menuOpen),$(".side-menu .navigation-outer-container ul").css("display",""),$("a.prev-link",i).parent().remove(),i.addClass("sf-menu").removeClass("nav-offscreen-menu "+t.activeMenuClass),($(".header-container").hasClass("header-layout-3")||$(".header-container").hasClass("header-layout-4"))&&$(".header-website-settings").after($(".navigation-outer-container")));var f=i.superfish({speed:t.animationSpeed,autoArrows:!1,popUpSelector:"ul:not(.third-level-container),.sf-mega"});i.show().addClass("sf-desktop").removeClass("sf-mobile").attr("aria-describedby","horizontal-menu-description").superfish()}}var r=this,o="OpenCities.Plugins.Menu.HorizontalMenu.init",s=n.Tools.ArgsAsOptions(arguments,[{string:"selector"}]),t,h;if(s===!1)return console.warn(o+": failed"),!1;if(t=$.extend({},this._options,s||{}),h={Superfish:$.fn.superfish},$("#sc-main-menu button").next("ul").each(function(){$(this).attr("aria-label",$(this).prevAll("a:first").text()+" "+$(this).attr("aria-label"))}),!n.Dependencies.Check(h,o))return!1;var u=$(t.mobileNavButton),e=u.find(".side-menu-btn-text"),c=e.text();e.html('<span class="visuallyhidden open-menu-text">Open <\/span>'+c);n.Plugins.SiteSearch.IsAlwaysDisplay()||e.append('<span class="visuallyhidden"> below search  button<\/span>');$(t.mobileSubArrow).attr("aria-expanded",!1);$(t.mobileSubArrowChild).attr("aria-expanded",!1);var i=$(t.selector),p=i.superfish({speed:t.animationSpeed,autoArrows:!1,popUpSelector:"ul:not(.third-level-container),.sf-mega"}),f={ESC:27,TAB:9},l=$('<div class="visuallyhidden list_help" id="horizontal-menu-description"><p>Select the Escape key to close the menu. Focus will then be set to the first menu item.<\/p><\/div>');l.insertAfter(i);u.each(function(){var n=$(this);n.attr({"aria-controls":"nav","aria-expanded":"false"}).addClass("not-pressed").removeClass("pressed");n.text().trim()===""?n.attr({"aria-label":"Main Menu"}):n.attr({"aria-label":n.text().trim()})}).on("click",function(f){var e=$(this),s,o,h;$("body").hasClass("side-menu")&&$("body").toggleClass(t.menuOpen);s=$(".navigation-outer-container").innerWidth();e.hasClass("not-pressed")?(e.attr({"aria-expanded":"true","aria-label":"Close"}).addClass("pressed").removeClass("not-pressed"),o=e.find(".side-menu-btn-text"),o.find(".open-menu-text").remove(),o.html('Close<span class="visuallyhidden"> menu<\/span>'),i.addClass("sf-mobile"),n.Plugins.SiteSearch.IsAlwaysDisplay()||$(".header-container").hasClass("header-layout-3")||$(".header-container").hasClass("header-layout-4")?(r.openMenu(s,t),$(".page-container").swipe({tap:function(n,u){var f=$(".side-menu-open .navigation-outer-container, #btn-mob-nav");f.is(u)||f.has(u).length!==0||u==$("html").get(0)||($("body").removeClass(t.menuOpen),e.attr({"aria-expanded":"false","aria-label":"Menu"}).addClass("not-pressed").removeClass("pressed"),$(".side-menu-btn-text",e).text("Menu"),i.addClass("sf-mobile"),r.closeMenu(s,t))},swipe:function(n,u){var f=!1;u==="right"&&$("body").hasClass("side-menu-right")&&(f=!0);f&&(e.attr({"aria-expanded":"false","aria-label":"Menu"}).addClass("not-pressed").removeClass("pressed"),$(".side-menu-btn-text",e).text("Menu"),i.addClass("sf-mobile"),$("body").removeClass(t.menuOpen),r.closeMenu(s,t))},allowPageScroll:"vertical"})):(i.slideDown(t.animationSpeed),n.Plugins.SiteSearch.Open(t.animationSpeed))):(e.attr({"aria-expanded":"false","aria-label":"Menu"}).addClass("not-pressed").removeClass("pressed"),o=u.find(".side-menu-btn-text"),h='<span class="visuallyhidden open-menu-text">Open <\/span>',o.html(h+"Menu"),n.Plugins.SiteSearch.IsAlwaysDisplay()||o.append('<span class="visuallyhidden"> below search  button<\/span>'),i.addClass("sf-mobile"),n.Plugins.SiteSearch.IsAlwaysDisplay()||$(".header-container").hasClass("header-layout-3")||$(".header-container").hasClass("header-layout-4")?r.closeMenu(s,t):(i.slideUp(t.animationSpeed),n.Plugins.SiteSearch.Close(t.animationSpeed)));f.preventDefault()});if(n.Plugins.SiteSearch.IsAlwaysDisplay()||$(".header-container").hasClass("header-layout-3")||$(".header-container").hasClass("header-layout-4")){i.addClass("level-1").data("level","1");$(window).on("resize",function(){var n=$(".navigation-outer-container").innerWidth();if($("body").hasClass("side-menu-open")){$(".side-menu .navigation-outer-container ul:not(.navigation-top-tasks-list)").css("width",n+"px");$("ul:not(.navigation-top-tasks-list)",i).css("left",n+"px");switch(i.data("level")){case 1:i.css("left","0");break;case 2:i.css("left","-"+n+"px");break;case 3:i.css("left","-"+n*2+"px")}$(".side-menu-right .background-container").css("left","-"+n+"px");$(".side-menu-right .navigation-outer-container").css("right","-"+n+"px")}else $("body").hasClass("side-menu-right")&&$(".side-menu-right .navigation-outer-container").css("right","auto")})}OpenCities.Plugins.BreakpointChange.onBreakpointChange(function(n,i){i&&a(t,r,n)});OpenCities.Plugins.BreakpointChange.onBreakpointChange(function(n,u,e){if(u)if(n==="sc-size-1"){r.closeMenuEscape(t,i,r);$(t.activeSubMenu).removeClass(t.activeSubMenuClass);$(t.activeMenu).removeClass(t.activeMenuClass);i.removeClass("level-2").addClass("level-1").data("level","1");y();$(document).on("keyup",function(n){n.keyCode===f.ESC&&($(".sf-menu .sfHover").length>0||$(document.activeElement).closest(".sf-menu").length>0)&&($("#sc-main-menu > li > a:first ").trigger("focus"),$("#sc-main-menu > li:first > ul ").hide(),$("#sc-main-menu > li:first > ul > li > ul").hide())})}else e==="sc-size-1"&&$(document.activeElement).closest(".sf-menu").length>0&&$("#sc-main-menu > li > a:first ").trigger("focus"),v()})},openMenu:function(n,t){var r=$.extend({},this._options,t||{}),i=$(r.selector);$(".side-menu .navigation-outer-container ul:not(.navigation-top-tasks-list)").css("width",n+"px");$("ul:not(.navigation-top-tasks-list)",i).css("left",n+"px");$(".side-menu .navigation-outer-container ul:not(.navigation-top-tasks-list)").css("display","");switch(i.data("level")){case 1:case"1":i.css("left","0");break;case 2:case"2":i.css("left","-"+n+"px");break;case 3:case"3":i.css("left","-"+n*2+"px")}$(".side-menu-right .navigation-outer-container").css("right","-"+n+"px");$(".side-menu-right .background-container").css("left","-"+n+"px");setTimeout(function(){$(".offscreen-active-menu li a:first").trigger("focus")},500)},closeMenuEscape:function(n,t,i){var r=$("#btn-mob-nav");$("body").removeClass(n.menuOpen);r.attr({"aria-expanded":"false","aria-label":"Menu"}).addClass("not-pressed").removeClass("pressed");$(".side-menu-btn-text",r).text("Menu");t.addClass("sf-mobile");i.closeMenu($(".navigation-outer-container").innerWidth(),n);r.trigger("focus")},closeMenu:function(n,t){var i=$.extend({},this._options,t||{});$(".side-menu-right .background-container").css("left",0);$(".side-menu-right .navigation-outer-container").css("right","auto");$(".page-container").swipe("destroy")},clickedArrow:function(t,i,r){var u=$.extend({},this._options,r||{}),f=$(u.selector);$(t).parent().parent().removeClass(u.activeMenuClass);$("> ul",$(t).parent()).addClass(u.activeSubMenuClass+" "+u.activeMenuClass);var e=parseInt(f.data("level")),s="level-"+e,o="level-"+(e+1);f.addClass(o).removeClass(s).data("level",e+1);o==="level-2"?f.css("left","-"+i+"px"):f.css("left","-"+i*2+"px");$(u.activeSubMenu+" > li:first-child > a").off("keydown.returnPreviousMenu").on("keydown.returnPreviousMenu",function(t){var i;if(t.keyCode===9&&t.shiftKey&&!n.Plugins.Menu.HorizontalMenu.isDesktopSize()){t.preventDefault();$(u.activeSubMenu).last().removeClass(u.activeSubMenuClass);i=$(u.activeMenu).last();i.parent().parent().addClass(u.activeMenuClass);i.removeClass(u.activeMenuClass);var r=parseInt(f.data("level")),o="level-"+r,e="level-"+(r-1);f.addClass(e).removeClass(o).data("level",r-1);e==="level-1"?f.css("left",0):f.css("left","-"+$(".navigation-outer-container").innerWidth()+"px");$(this).closest("ul").attr("aria-expanded",!1).parent("li").find("a").first().trigger("focus");$(this).closest("ul").closest("ul").attr("aria-expanded",!0)}});$(u.activeSubMenu+" > li:last-child > a").off("keydown.moveTop").on("keydown.moveTop",function(t){var i,r;t.keyCode!==9||t.shiftKey||n.Plugins.Menu.HorizontalMenu.isDesktopSize()||(t.preventDefault(),i=$(this).next(u.mobileSubArrowChild+":button"),i!==null&&i!==undefined&&i.length>0?i.trigger("focus"):(r=$(this).closest("ul"),r.find("li:first-child a").first().trigger("focus")))});$(u.activeSubMenu+" > li:last-child > "+u.mobileSubArrowChild+":button").off("keydown.moveTop").on("keydown.moveTop",function(t){if(t.keyCode===9&&!t.shiftKey&&!n.Plugins.Menu.HorizontalMenu.isDesktopSize()){t.preventDefault();var i=$(this).closest("li").closest("ul");i.find("li:first-child a").first().trigger("focus")}});$(t).next("ul").find("li:first-child a").first().trigger("focus")},isDesktopSize:function(){return $("html").hasClass("breakpoint-sc-size-1")}},OffScreenMenu:{_options:{selector:"#sc-main-menu",menuButton:".side-menu-btn > button",subArrow:".mobnav-subarrow",subArrowChild:".mobnav-subarrow-child",menuOpen:"side-menu-open",activeMenuClass:"offscreen-active-menu",activeMenu:".offscreen-active-menu",activeSubMenuClass:"active-sub-menu",activeSubMenu:".navigation-outer-container ul.active-sub-menu",closedMenuButtonText:"Sys Js Menu Open side Menu",openedMenuButtonText:"Sys Js Menu Close side menu"},init:function(){var r=this,e=n.Tools.ArgsAsOptions(arguments,[{string:"selector"}]),t,o,i,f,s,u,h;if(e===!1)return console.warn("OpenCities.Plugins.Menu.OffScreenMenu.init: failed"),!1;t=$.extend({},this._options,e||{});t.closedMenuButtonText=n.Snippet(t.closedMenuButtonText,'<span class="visuallyhidden">Open side <\/span>Menu');t.openedMenuButtonText=n.Snippet(t.openedMenuButtonText,'Close<span class="visuallyhidden"> side menu<\/span>');o={ESC:27,TAB:9};$("#sc-main-menu button").next("ul").each(function(){$(this).attr("aria-label",$(this).prevAll("a:first").text()+" "+$(this).attr("aria-label"))});i=$(t.selector);$("body").addClass("side-menu");i.removeClass("sf-menu").addClass("nav-offscreen-menu "+t.activeMenuClass);$(".navigation-container").data("offscreen-position")==="left"?$("body").addClass("side-menu-left"):$("body").addClass("side-menu-right");f=$("<div><\/div>");f.append(t.closedMenuButtonText);f.find(".visuallyhidden").remove();s=f.text();u=$(t.menuButton);u.attr({"aria-controls":"nav","aria-expanded":"false","aria-label":s}).addClass("not-pressed").removeClass("pressed");u.on("click",function(n){var i=$(".navigation-outer-container").innerWidth();$("body").toggleClass(t.menuOpen);$("body").hasClass(t.menuOpen)?(r.openMenu(i,t),$(".page-container").swipe({tap:function(n,i){r.closeMenuOnFocusOut(i,t)},swipe:function(n,u){var f=!1;u==="left"&&$("body").hasClass("side-menu-left")?f=!0:u==="right"&&$("body").hasClass("side-menu-right")&&(f=!0);f&&($("body").removeClass(t.menuOpen),r.closeMenu(i,t))},allowPageScroll:"vertical"})):(r.closeMenu(i,t),u.trigger("focus"));n.preventDefault()});u.on("keydown",function(n){if(u.hasClass("pressed")){var t=n.keyCode||n.which;t==9&&(n.shiftKey||($(".side-menu-open .navigation-outer-container").find("a:visible:first").trigger("focus"),n.preventDefault()))}});$(".navigation-outer-container").on("focusout",function(n){r.closeMenuOnFocusOut(n.target,t)});i.addClass("level-1").data("level","1");h=$("ul:not(.navigation-top-tasks-list)",i);h.each(function(){$(this).attr("aria-hidden",!0);var t=$("> a",$(this).parent()).text(),i=n.Snippet("Sys Js Menu Back to n0","Back to {0}"),r=i.replace(/\{0\}/i,t);$(this).prepend('<li><a href="#" class="prev-link">'+r+"<\/a><\/li>")});$(t.subArrow).on("click",function(n){n.preventDefault();$(this).attr("aria-expanded",!0);r.clickedArrow(this,$(".navigation-outer-container").innerWidth(),t)});$(t.subArrowChild).on("click",function(n){n.preventDefault();$(this).attr("aria-expanded",!0);r.clickedArrow(this,$(".navigation-outer-container").innerWidth(),t)});$(".prev-link").on("click",function(n){var r;n.preventDefault();$(t.activeSubMenu).last().removeClass(t.activeSubMenuClass);r=$(t.activeMenu).last();r.parent().parent().addClass(t.activeMenuClass);r.removeClass(t.activeMenuClass);var u=parseInt(i.data("level")),e="level-"+u,f="level-"+(u-1);i.addClass(f).removeClass(e).data("level",u-1);f==="level-1"?i.css("left",0):i.css("left","-"+$(".navigation-outer-container").innerWidth()+"px");$(this).closest("ul").attr({"aria-hidden":!0}).parent("li").find("a").first().trigger("focus");$(this).closest("ul").prev("button.mobnav-subarrow").attr("aria-expanded","false")});$(document).on("keyup",function(n){var i=r._options.menuOpen;n.keyCode===o.ESC&&$("body").hasClass(i)&&($("body").removeClass(i),r.closeMenu($(".navigation-outer-container").innerWidth(),t),u.trigger("focus"))});$(".main-menu-last-link").on("blur",function(){setTimeout(function(){$(document.activeElement).is(".main-menu-link, .mobnav-subarrow, .mobnav-subarrow-child")||u.trigger("focus")},0)});$(window).on("resize",function(){var n=$(".navigation-outer-container").innerWidth(),t=r._options.menuOpen;if($("body").hasClass(t)){$(".side-menu .navigation-outer-container ul:not(.navigation-top-tasks-list)").css("width",n+"px");$("ul:not(.navigation-top-tasks-list)",i).css("left",n+"px");switch(i.data("level")){case 1:i.css("left","0");break;case 2:i.css("left","-"+n+"px");break;case 3:i.css("left","-"+n*2+"px")}$("body").hasClass("side-menu-left")?($(".side-menu-left .background-container").css("left",n+"px"),$(".side-menu-left .navigation-outer-container").css("left","-"+n+"px")):($(".side-menu-right .background-container").css("left","-"+n+"px"),$(".side-menu-right .navigation-outer-container").css("right","-"+n+"px"))}else $("body").hasClass("side-menu-right")&&$(".side-menu-right .navigation-outer-container").css("right","auto")})},openMenu:function(n,t){var r=$.extend({},this._options,t||{}),i=$(r.selector);$(".side-menu .navigation-outer-container ul:not(.navigation-top-tasks-list)").css("width",n+"px");$("ul:not(.navigation-top-tasks-list)",i).css("left",n+"px");switch(i.data("level")){case 1:i.css("left","0");break;case 2:i.css("left","-"+n+"px");break;case 3:i.css("left","-"+n*2+"px")}$("body").hasClass("side-menu-left")?($(".side-menu-left .navigation-outer-container").css("left","-"+n+"px"),$(".side-menu-left .background-container").css("left","+"+n+"px")):($(".side-menu-right .navigation-outer-container").css("right","-"+n+"px"),$(".side-menu-right .background-container").css("left","-"+n+"px"));$(r.menuButton).attr({"aria-expanded":"true","aria-label":"Close"}).addClass("pressed").removeClass("not-pressed");$(r.menuButton+" .side-menu-btn-text").html(r.openedMenuButtonText);setTimeout(function(){$(".offscreen-active-menu li a:first").trigger("focus")},500)},closeMenuOnFocusOut:function(n,t){var i=$(".side-menu-open .navigation-outer-container, .side-menu-btn");i.is(n)||i.has(n).length!==0||n==$("html").get(0)||($("body").removeClass(t.menuOpen),this.closeMenu($(".navigation-outer-container").innerWidth(),t))},closeMenu:function(n,t){var i=$.extend({},this._options,t||{});$("body").hasClass("side-menu-left")?$(".side-menu-left .background-container").css("left",0):($(".side-menu-right .background-container").css("left",0),$(".side-menu-right .navigation-outer-container").css("right","auto"));$(i.menuButton).attr({"aria-expanded":"false","aria-label":"Menu"}).addClass("not-pressed").removeClass("pressed");$(i.menuButton+" .side-menu-btn-text").html(i.closedMenuButtonText);$(".page-container").swipe("destroy")},clickedArrow:function(n,t,i){var r=$.extend({},this._options,i||{}),u=$(r.selector);$(n).parent().parent().removeClass(r.activeMenuClass);$("> ul",$(n).parent()).addClass(r.activeSubMenuClass+" "+r.activeMenuClass);$("> ul",$(n).parent()).attr("aria-hidden","false");var f=parseInt(u.data("level")),o="level-"+f,e="level-"+(f+1);u.addClass(e).removeClass(o).data("level",f+1);e==="level-2"?u.css("left","-"+t+"px"):u.css("left","-"+t*2+"px");$("."+r.activeSubMenuClass+r.activeMenu+" > li:last-child > a").off("keydown.moveTop").on("keydown.moveTop",function(n){var t,i;n.keyCode!==9||n.shiftKey||(n.preventDefault(),t=$(this).next(r.subArrowChild+":button"),t!==null&&t!==undefined&&t.length>0?t.trigger("focus"):(i=$(this).closest("ul"),i.find("li:first-child a").first().trigger("focus")))});$("."+r.activeSubMenuClass+r.activeMenu+" > li:first-child > a").off("keydown.moveTop").on("keydown.moveTop",function(n){var t;if(n.keyCode===9&&n.shiftKey){n.preventDefault();$(r.activeSubMenu).last().removeClass(r.activeSubMenuClass);t=$(r.activeMenu).last();t.parent().parent().addClass(r.activeMenuClass);t.removeClass(r.activeMenuClass);var i=parseInt(u.data("level")),e="level-"+i,f="level-"+(i-1);u.addClass(f).removeClass(e).data("level",i-1);f==="level-1"?u.css("left",0):u.css("left","-"+$(".navigation-outer-container").innerWidth()+"px");$(this).closest("ul").attr({"aria-expanded":!1,"aria-hidden":!0}).parent("li").find("a").first().trigger("focus")}});$("."+r.activeSubMenuClass+r.activeMenu+" > li:last-child > "+r.subArrowChild+":button").off("keydown.moveTop").on("keydown.moveTop",function(n){if(n.keyCode===9&&!n.shiftKey){n.preventDefault();var t=$(this).closest("li").closest("ul");t.find("li:first-child a").first().trigger("focus")}});$(n).attr("aria-expanded",!0);$(".offscreen-active-menu li a:first").trigger("focus")}}},ContentCarousel:{containerWidthS1:992,containerWidthS2:768,containerWidthS3:480,containerWidthS4:320,noOfItemsS1:3,noOfItemsS2:2,noOfItemsS3:2,noOfItemsS4:1,screenSize:"",init:function(){this.init=function(){};var t=$(".row-content-container .display-as-carousel");if(t===undefined||t==null||t.length===0)return!1;n.Plugins.ContentCarousel.InitCarousels(t);OpenCities.Plugins.BreakpointChange.onBreakpointChange(function(i,r){r&&(n.Plugins.ContentCarousel.screenSize=i,n.Plugins.ContentCarousel.InitCarousels(t))});t.on("click",".carousel-controls a",function(t){n.Plugins.ContentCarousel.ControlClick($(this));t.preventDefault()});t.on("focus",".grid a",function(){n.Plugins.ContentCarousel.TabFocusMove($(this))})},InitCarousels:function(t){t.each(function(){n.Plugins.ContentCarousel.InitCarousel($(this))})},InitCarousel:function(t){var i=n.Plugins.ContentCarousel.TotalItems(t),r=n.Plugins.ContentCarousel.ItemsToDisplay(),f;if(i<=r){n.Plugins.ContentCarousel.ClearCarousel(t);return}var e=n.Plugins.ContentCarousel.GetContainerWidth(t),u=n.Plugins.ContentCarousel.ItemWidth(t),o=n.Plugins.ContentCarousel.GetCurrentItem(t);t.addClass("display-as-carousel-on");$(".grid",t).swipe({swipe:function(i,r,u,f){var o="",s=!1,e,h;r==="left"?(o="next",s=!0):r==="right"&&(o="prev",s=!0);s&&(e=1,h=n.Plugins.ContentCarousel.ItemWidth(t),e=Math.ceil(u/h),f<120&&(e+=e),u<40&&(e=0),n.Plugins.ContentCarousel.MoveCarousel(t,o,e))},allowPageScroll:"vertical",threshold:5,swipeStatus:function(i,r,u,f){var s="",e=!1,o=0;u==="left"?(s="next",o=f*-1,e=!0):u==="right"&&(s="prev",o=f,e=!0);e&&n.Plugins.ContentCarousel.TempMoveCarousel(t,o)}});f=u*i;$(".grid",t).css("width",f+"px");$(".grid",t).css("margin-left","0px");$(".grid",t).css("margin-right","0px");$(".grid > div",t).css("width",u+"px");$(".grid > div",t).each(function(){this.style.setProperty("clear","none","important")});$carouselProgress=$(".carousel-progress",t);($carouselProgress===undefined||$carouselProgress.length===0)&&($carouselProgress=$('<div class="carousel-progress noSwipe">'),$carouselProgress.append('<div class="carousel-progress-bar"><\/div>'),$(".grid",t).after($carouselProgress));$(".carousel-progress-bar",$carouselProgress).css("width",r/i*100+"%");$carouselControls=$(".carousel-controls",t);($carouselControls===undefined||$carouselControls.length===0)&&($carouselControls=$('<div class="carousel-controls noSwipe" aria-hidden="true">'),$carouselControls.append('<a href="#" role="button" class="carousel-control-prev" tabindex="-1"><i aria-hidden="true"><\/i><span class="visuallyhidden">Previous Page<\/span><\/a>'),$carouselControls.append('<a href="#" role="button" class="carousel-control-next" tabindex="-1"><i aria-hidden="true"><\/i><span class="visuallyhidden">Next Page<\/span><\/a>'),$(".grid",t).before($carouselControls));n.Plugins.ContentCarousel.MoveCarousel(t,"","page");$(".grid > div > a",t).matchHeight({property:"min-height"})},ClearCarousel:function(t){t.removeClass("display-as-carousel-on");$(".grid",t).css("width","");$(".grid",t).css("margin-left","");$(".grid",t).css("margin-right","");$(".grid > div",t).css("width","");$(".grid > div",t).css("padding-right","");$(".grid > div",t).css("padding-left","");$(".grid > div",t).css("clear","");$(".carousel-progress",t).remove();$(".carousel-controls",t).remove();$(".carousel-limit",t).remove();n.Plugins.ContentCarousel.SetCurrentItem(t,"");$(".grid",t).css("transform","");$(".grid",t).swipe("destroy")},TotalItems:function(n){return $(".grid > div",n).length},ItemWidth:function(t){var i=n.Plugins.ContentCarousel.GetContainerWidth(t);return i-=40,i/n.Plugins.ContentCarousel.ItemsToDisplay()},ItemsToDisplay:function(){switch(n.Plugins.ContentCarousel.screenSize){case"sc-size-2":return n.Plugins.ContentCarousel.noOfItemsS2;case"sc-size-3":return n.Plugins.ContentCarousel.noOfItemsS3;case"sc-size-4":return n.Plugins.ContentCarousel.noOfItemsS4;case"sc-size-1":default:return n.Plugins.ContentCarousel.noOfItemsS1}},GetContainerWidth:function(n){return n.outerWidth(!0)},ControlClick:function(t){$carousel=t.closest(".display-as-carousel");var i=t.hasClass("carousel-control-next")?"next":"prev";n.Plugins.ContentCarousel.MoveCarousel($carousel,i,"page")},GetCurrentItem:function(t){var i=t.data("current-item");return(i===undefined||i==="")&&(i=1,n.Plugins.ContentCarousel.SetCurrentItem(t,i)),i},SetCurrentItem:function(n,t){n.data("current-item",t)},TempMoveCarousel:function(t,i){var u=$(".grid",t).data("current-transform"),h;(u===undefined||u===null)&&(u=0);var v=n.Plugins.ContentCarousel.GetCurrentItem(t),l=n.Plugins.ContentCarousel.ItemWidth(t),a=n.Plugins.ContentCarousel.TotalItems(t),f=a*l,e=n.Plugins.ContentCarousel.GetContainerWidth(t),r=u*-1+i,y=n.Plugins.ContentCarousel.ItemsToDisplay(),o=50,c=o,s=(f-e+o)*-1;r>c?r=c:r<s&&(r=s);r>0&&r<=o?($(".carousel-limit.carousel-limit-next",t).remove(),$carouselLimitDiv=$(".carousel-limit.carousel-limit-prev",t),($carouselLimitDiv===undefined||$carouselLimitDiv.length==0)&&($carouselLimitDiv=$('<div class="carousel-limit carousel-limit-prev">'),$(".grid",t).before($carouselLimitDiv)),$carouselLimitDiv.css("width",r+"px"),$carouselLimitDiv.css("left",r/-2+"px"),$carouselLimitDiv.css("height",$(".grid",t).css("height"))):r<(f-e)*-1&&r>=s?($(".carousel-limit.carousel-limit-prev",t).remove(),$carouselLimitDiv=$(".carousel-limit.carousel-limit-next",t),($carouselLimitDiv===undefined||$carouselLimitDiv.length==0)&&($carouselLimitDiv=$('<div class="carousel-limit carousel-limit-next">'),$(".grid",t).after($carouselLimitDiv)),h=r-(f-e)*-1,$carouselLimitDiv.css("width",h*-1+"px"),$carouselLimitDiv.css("right",h/2+"px"),$carouselLimitDiv.css("height",$(".grid",t).css("height"))):($(".carousel-limit.carousel-limit-next",t).remove(),$(".carousel-limit.carousel-limit-prev",t).remove());$(".grid",t).css("transition","none");$(".grid",t).css("transform","translateX("+r+"px)");n.Plugins.ContentCarousel.UpdateProgressBar(t,!1,i)},MoveCarousel:function(t,i,r){var h,v,c;$(".carousel-limit",t).remove();var f=n.Plugins.ContentCarousel.GetCurrentItem(t),y=n.Plugins.ContentCarousel.ItemWidth(t),l=n.Plugins.ContentCarousel.TotalItems(t),e=n.Plugins.ContentCarousel.ItemsToDisplay(),s=Math.ceil(f/e),o=Math.ceil(l/e),u=0,a=0;a=r==="page"?e:r;h=!1;i==="next"?(u=f+a,h=!0):i==="prev"&&(u=f-a,h=!0);h&&(v=Math.ceil(u/e),v>o&&(v=(o-1)*e+1),u>=l?u=(o-1)*e+1:u<1&&(u=1),f=u);n.Plugins.ContentCarousel.SetCurrentItem(t,f);s=Math.ceil(f/e);c=0;c=s===o?y*l-t.outerWidth(!0):y*(f-1);s===1?($(".carousel-controls .carousel-control-prev",t).addClass("carousel-control-disabled"),$(".carousel-controls .carousel-control-next",t).removeClass("carousel-control-disabled")):s===o?($(".carousel-controls .carousel-control-next",t).addClass("carousel-control-disabled"),$(".carousel-controls .carousel-control-prev",t).removeClass("carousel-control-disabled")):($(".carousel-controls .carousel-control-prev",t).removeClass("carousel-control-disabled"),$(".carousel-controls .carousel-control-next",t).removeClass("carousel-control-disabled"));$(".grid",t).css("transition","");$(".grid",t).css("transform","translateX(-"+c+"px)");$(".grid",t).data("current-transform",c);n.Plugins.ContentCarousel.UpdateProgressBar(t,!0,0)},TabFocusMove:function(t){var e;$carousel=t.closest(".display-as-carousel");$gridItem=t.closest('[class*=" col-"], [class^="col-"]');var i=$gridItem.index()+1,r=n.Plugins.ContentCarousel.GetCurrentItem($carousel),o=n.Plugins.ContentCarousel.ItemsToDisplay(),u="",f=!1;r>i?(u="prev",f=!0):r<i&&(e=i-r,e>=o&&(u="next",f=!0));f&&n.Plugins.ContentCarousel.MoveCarousel($carousel,u,"page")},UpdateProgressBar:function(t,i,r){var f=$(".carousel-progress .carousel-progress-bar",t),s=n.Plugins.ContentCarousel.GetContainerWidth(t),h=n.Plugins.ContentCarousel.ItemWidth(t),c=n.Plugins.ContentCarousel.TotalItems(t),v=n.Plugins.ContentCarousel.ItemsToDisplay(),o=c*h,e=s/o*100,l=$(".grid",t).data("current-transform"),a=l-r,u=a/o*100;u<0?u=0:e+u>=99&&(u=100-e);i?f.css("transition",""):f.css("transition","none");f.css("width",e+"%");f.css("left",u+"%")}},HomepageListingTemplates:{init:function(){var t,i;if(this.init=function(){},t=$('.profile-listing-container*[class*="profile-news-listing-option-"]'),t!=undefined&&t.length>0)OpenCities.Plugins.BreakpointChange.onBreakpointChange(function(t,i){i&&n.Plugins.HomepageListingTemplates.NewsListing.RenderOptions(t)});if(i=$('.profile-listing-container*[class*="profile-events-listing-option-"]'),i!=undefined&&i.length>0)OpenCities.Plugins.BreakpointChange.onBreakpointChange(function(t,i){i&&n.Plugins.HomepageListingTemplates.EventsListing.RenderOptions(t)})},NewsListing:{RenderOptions:function(t){$(".profile-listing-container.profile-news-listing-option-5").each(function(){var i=$(this);n.Plugins.HomepageListingTemplates.Templates.TwoCardsWithList(i,t)});$(".profile-listing-container.profile-news-listing-option-6").each(function(){var i=$(this);n.Plugins.HomepageListingTemplates.Templates.OneCardWithList(i,t)});$(".profile-listing-container.profile-news-listing-option-7").each(function(){var i=$(this);n.Plugins.HomepageListingTemplates.Templates.TwoColumnCardWithList(i,t)});$(".profile-listing-container.profile-news-listing-option-8").each(function(){var i=$(this);n.Plugins.HomepageListingTemplates.Templates.WideCardWithList(i,t)});$(".profile-listing-container.profile-news-listing-option-9").each(function(){var i=$(this);n.Plugins.HomepageListingTemplates.Templates.WideCardWithGrid(i,t)})}},EventsListing:{RenderOptions:function(t){$(".profile-listing-container.profile-events-listing-option-5").each(function(){var i=$(this);n.Plugins.HomepageListingTemplates.Templates.TwoCardsWithList(i,t)});$(".profile-listing-container.profile-events-listing-option-6").each(function(){var i=$(this);n.Plugins.HomepageListingTemplates.Templates.OneCardWithList(i,t)});$(".profile-listing-container.profile-events-listing-option-7").each(function(){var i=$(this);n.Plugins.HomepageListingTemplates.Templates.TwoColumnCardWithList(i,t)});$(".profile-listing-container.profile-events-listing-option-8").each(function(){var i=$(this);n.Plugins.HomepageListingTemplates.Templates.WideCardWithList(i,t)});$(".profile-listing-container.profile-events-listing-option-9").each(function(){var i=$(this);n.Plugins.HomepageListingTemplates.Templates.WideCardWithGrid(i,t)})}},Templates:{TwoCardsWithList:function(n,t){var f;$(".profile-list",n).matchHeight({remove:!0,property:"min-height"});var r=$(".grid",n),i=$(".list-group",r),u=0;t==="sc-size-1"?(i&&i.length>0&&(r.append($("> div",i)),i.remove()),f=$("> div",r),u=0,i=$('<div class="list-group list-group-size-1"><\/div>'),f.each(function(){u>1&&i.append($(this));u++}),i&&r.append(i),$(".grid > .col-xs-12 .profile-list",n).matchHeight({property:"min-height"})):t==="sc-size-2"?(i&&i.length>0&&(r.append($("> div",i)),i.remove()),f=$("> div",r),u=0,i=$('<div class="list-group list-group-size-2"><\/div>'),f.each(function(){u>0&&i.append($(this));u++}),i&&r.append(i),$(".grid > .col-xs-12 .profile-list",n).matchHeight({property:"min-height"})):(t==="sc-size-4"||t==="sc-size-3")&&i&&i.length>0&&(r.append($("> div",i)),i.remove())},OneCardWithList:function(n,t){var f;$(".profile-list",n).matchHeight({remove:!0,property:"min-height"});var r=$(".grid",n),i=$(".list-group",r),u=0;t==="sc-size-1"?(i&&i.length>0&&(r.append($("> div",i)),i.remove()),f=$("> div",r),u=0,i=$('<div class="list-group list-group-size-1"><\/div>'),f.each(function(){u>0&&i.append($(this));u++}),i&&r.append(i),$(".grid > .col-xs-12 .profile-list",n).matchHeight({property:"min-height"})):t==="sc-size-2"?(i&&i.length>0&&(r.append($("> div",i)),i.remove()),f=$("> div",r),u=0,i=$('<div class="list-group list-group-size-2"><\/div>'),f.each(function(){u>0&&i.append($(this));u++}),i&&r.append(i),$(".grid > .col-xs-12 .profile-list",n).matchHeight({property:"min-height"})):(t==="sc-size-4"||t==="sc-size-3")&&i&&i.length>0&&(r.append($("> div",i)),i.remove())},TwoColumnCardWithList:function(n,t){var f;$(".profile-list",n).matchHeight({remove:!0,property:"min-height"});var r=$(".grid",n),i=$(".list-group",r),u=0;t==="sc-size-1"?(i&&i.length>0&&(r.append($("> div",i)),i.remove()),f=$("> div",r),u=0,i=$('<div class="list-group list-group-size-1"><\/div>'),f.each(function(){u>0&&i.append($(this));u++}),i&&r.append(i),$(".grid > .col-xs-12 .profile-list",n).matchHeight({property:"min-height"})):t==="sc-size-2"?(i&&i.length>0&&(r.append($("> div",i)),i.remove()),f=$("> div",r),u=0,i=$('<div class="list-group list-group-size-2"><\/div>'),f.each(function(){u>0&&i.append($(this));u++}),i&&r.append(i),$(".grid > .col-xs-12 .profile-list",n).matchHeight({property:"min-height"})):(t==="sc-size-4"||t==="sc-size-3")&&i&&i.length>0&&(r.append($("> div",i)),i.remove())},WideCardWithList:function(n,t){var f;$(".profile-list",n).matchHeight({remove:!0,property:"min-height"});var r=$(".grid",n),i=$(".list-group",r),u=0;t==="sc-size-1"?(i&&i.length>0&&(r.append($("> div",i)),i.remove()),f=$("> div",r),u=0,i=$('<div class="list-group list-group-size-1"><\/div>'),f.each(function(){u>0&&i.append($(this));u++}),i&&r.append(i),$(".grid > .col-xs-12 .profile-list",n).matchHeight({property:"min-height"})):t==="sc-size-2"?(i&&i.length>0&&(r.append($("> div",i)),i.remove()),f=$("> div",r),u=0,i=$('<div class="list-group list-group-size-2"><\/div>'),f.each(function(){u>0&&i.append($(this));u++}),i&&r.append(i),$(".grid > .col-xs-12 .profile-list",n).matchHeight({property:"min-height"})):(t==="sc-size-4"||t==="sc-size-3")&&i&&i.length>0&&(r.append($("> div",i)),i.remove())},WideCardWithGrid:function(n,t){var r,i,u,f;$(".profile-list",n).matchHeight({remove:!0,property:"min-height"});r=$(".grid",n);i=$(".list-group",r);$(".profile-list",i).matchHeight({remove:!0,property:"min-height"});u=0;t==="sc-size-1"?(i&&i.length>0&&(r.append($("> div",i)),i.remove()),f=$("> div",r),u=0,i=$('<div class="list-group list-group-grid list-group-size-1"><\/div>'),f.each(function(){u>0&&i.append($(this));u++}),i&&r.append(i),$(".grid > .col-xs-12 .profile-list",n).matchHeight({property:"min-height"}),$(".profile-list",i).matchHeight({property:"min-height"})):t==="sc-size-2"?(i&&i.length>0&&(r.append($("> div",i)),i.remove()),f=$("> div",r),u=0,i=$('<div class="list-group list-group-grid list-group-size-2"><\/div>'),f.each(function(){u>0&&i.append($(this));u++}),i&&r.append(i),$(".grid > .col-xs-12 .profile-list",n).matchHeight({property:"min-height"}),$(".profile-list",i).matchHeight({property:"min-height"})):(t==="sc-size-4"||t==="sc-size-3")&&i&&i.length>0&&(r.append($("> div",i)),i.remove())}}},SiteSearch:{isOffscreenMenu:!1,alwaysDisplay:!1,searchControlContainer:".header-search-control-container",searchButton:".mobile-search-btn > button",closedSearchButtonText:"Sys Js Search Open search",openedSearchttonText:"Sys Js Search Close search",animationSpeed:"fast",init:function(){var t,r,u,i,e;if(this.init=function(){},t=$(n.Plugins.SiteSearch.searchControlContainer),t===undefined||t==null||t.length===0)return!1;t.attr("role","search");t.attr("aria-label","Sitewide search");n.Plugins.SiteSearch.alwaysDisplay=$("body").hasClass("site-search-always-visble");n.Plugins.SiteSearch.isOffscreenMenu=$(".navigation-container").data("menu-type")==="offscreen"||$(".header-container").hasClass("header-layout-3")||$(".header-container").hasClass("header-layout-4");n.Plugins.SiteSearch.isOffscreenMenu&&n.Plugins.SiteSearch.alwaysDisplay;$(".search-list-container > .list-item-container a").on("click",function(){var t=$(".search-filter input").val();n.Analytics.Record.SearchClick(t,$(this).attr("href"))});if(n.Plugins.SiteSearch.isOffscreenMenu)if(r=$(n.Plugins.SiteSearch.searchControlContainer),u=$(n.Plugins.SiteSearch.searchButton),n.Plugins.SiteSearch.alwaysDisplay)u.parent().hide();else{n.Plugins.SiteSearch.closedSearchButtonText=n.Snippet(n.Plugins.SiteSearch.closedSearchButtonText,'<span class="visuallyhidden">Open <\/span>Search');n.Plugins.SiteSearch.openedSearchttonText=n.Snippet(n.Plugins.SiteSearch.openedSearchttonText,'<span class="visuallyhidden">Close <\/span>Search');u.each(function(){var n=$(this);n.attr({"aria-controls":"nav","aria-expanded":"false"}).addClass("not-pressed").removeClass("pressed");n.text().trim()===""?n.attr({"aria-label":"Search"}):n.attr({"aria-label":n.text().trim()})}).on("click",function(n){var t=$(this);t.hasClass("not-pressed")?(t.attr({"aria-expanded":"true"}).addClass("pressed").removeClass("not-pressed"),r.slideDown("fast")):(t.attr({"aria-expanded":"false"}).addClass("not-pressed").removeClass("pressed"),r.slideUp("fast"));n.preventDefault()})}OpenCities.Plugins.BreakpointChange.onBreakpointChange(function(t,i){i&&(t==="sc-size-1"?(n.Plugins.SiteSearch.ShowDesktopView(),n.Plugins.SiteSearch.isOffscreenMenu&&$(n.Plugins.SiteSearch.searchButton).each(function(){$(this).attr({"aria-expanded":"false"}).addClass("not-pressed").removeClass("pressed")})):n.Plugins.SiteSearch.ShowMobileView())});var f=t.find(".sc-search-panel .sc-search-text"),o=t.find(".sc-search-panel .sc-search-button"),s=f.attr("data-search-url"),h=f.attr("data-search-page");if(s){i=$('<form style="display:none !important;" method="POST" action="'+h+'"><input type="hidden" name="keyword"/><input type="submit" /><\/form>');e=i.find("input[name=keyword]");$(document.body).append(i);o.on("click",function(n){n.preventDefault();n.stopPropagation();e.val(f.val());i.submit()})}},IsAlwaysDisplay:function(){return n.Plugins.SiteSearch.init(),n.Plugins.SiteSearch.alwaysDisplay},ShowMobileView:function(){if(n.Plugins.SiteSearch.alwaysDisplay){$(n.Plugins.SiteSearch.searchControlContainer).show();return}$(n.Plugins.SiteSearch.searchControlContainer).hide();n.Plugins.SiteSearch.isOffscreenMenu},ShowDesktopView:function(){if(n.Plugins.SiteSearch.alwaysDisplay){$(n.Plugins.SiteSearch.searchControlContainer).show();return}$(n.Plugins.SiteSearch.searchControlContainer).show();n.Plugins.SiteSearch.isOffscreenMenu},Open:function(t){if(n.Plugins.SiteSearch.alwaysDisplay){$(n.Plugins.SiteSearch.searchControlContainer).show();return}var i=n.Plugins.SiteSearch.animationSpeed;t!==undefined&&t!==""&&t!==0&&(i=t);$(n.Plugins.SiteSearch.searchControlContainer).slideDown(i)},Close:function(t){if(n.Plugins.SiteSearch.alwaysDisplay){$(n.Plugins.SiteSearch.searchControlContainer).show();return}var i=n.Plugins.SiteSearch.animationSpeed;t!==undefined&&t!==""&&t!==0&&(i=t);$(n.Plugins.SiteSearch.searchControlContainer).slideUp(i)}},BackToTop:{_options:{selector:"#back-to-top",scrollSpeed:800,threshold:200,position:"right",openPositionValue:"10px",closedPositionValue:"-50px",autoHideTimeOut:0},init:function(){function u(){i.css(t.position,t.closedPositionValue)}function e(){i.css(t.position,t.openPositionValue)}var t,i,r;this.init=function(){};var o=this,f=n.Tools.ArgsAsOptions(arguments,[{string:"selector"}]);if(f===!1)return console.warn("OpenCities.Plugins.BackToTop.init: failed"),!1;t=$.extend({},this._options,f||{});i=$(t.selector);u();$(window).on("scroll",n.Tools.Debounce(function(){r&&(window.clearTimeout(r),r=null);$(this).scrollTop()>t.threshold?(e(),t.autoHideTimeOut&&(r=window.setTimeout(function(){u()},t.autoHideTimeOut))):u()},50));i.on("click",function(){return $("body,html").animate({scrollTop:0},t.scrollSpeed),!1})}},HighlightText:{_options:{rhDataAttrHighlight:"[data-result-highlight]",rhDataAttrSource:"[data-result-highlight-source]",rhDataAttrElement:"[data-result-highlight-element]",highlightTagName:"span",highlightClass:"result-text"},init:function(){var t;this.init=function(){};var r=this,i=n.Tools.ArgsAsOptions(arguments);if(i===!1)return console.warn("OpenCities.Plugins.BackToTop.init: failed"),!1;t=$.extend({},this._options,i||{});$(t.rhDataAttrHighlight).each(function(){var n=$(this).find(t.rhDataAttrSource+' input[type="text"]').val();n!==""&&r.HighlightText(t.rhDataAttrHighlight+" "+t.rhDataAttrElement,n,t)})},HighlightText:function(n,t,i){function u(n){return"<"+r.highlightTagName+' class="'+r.highlightClass+'">'+n+"<\/"+r._highlightTagNameClose+">"}var r=$.extend({},this._options,i||{});r._highlightTagNameClose=r.highlightTagName.replace(/ .*/g,"");$(n).each(function(){var n=$(this).text(),r=new DOMParser,f=r.parseFromString("<!doctype html><body>"+n,"text/html"),i,e;n=f.body.textContent;i=new RegExp(t,"gi");e=n.match(i);$(this).html(n.replace(i,u))})}},Tabs:{_options:{removeEmptyBodies:!1},tabsTotalWidths:null,init:function(){var i,t,r;this.init=function(){};var e=this,u="OpenCities.Plugins.Tabs.init",f=n.Tools.ArgsAsOptions(arguments,[{string:"body"},{string:"header"}]);if(f===!1)return console.warn(u+": failed"),!1;if(i=$.extend({},this._options,f||{}),("body"in i||"header"in i)&&console.warn(u+": header and body are no longer usable arguments of this function. You should remove them from your function call which is probably in plugins.js. ( example: OpenCities.Plugins.Tabs.init() )"),t=$("div.tab-group"),t===undefined||t==null||t.length===0)return!1;if(r=0,t.each(function(){var s=$(this),h=s.data("oc-tabs-name"),e=$(".tab-group-body",s),f,a;if(e.length){if(s.attr({role:"region","aria-label":"Tabbed content"}),f=$(" > div.tabs-panel",e),i.removeEmptyBodies&&(f.each(function(){var n=$(this);n.children().first().data("total-results")===0&&n.remove()}),f=$(" > div.tabs-panel",e),!f.length)){e.parent().addClass("no-panels");e.remove();return}r++;var u=$(".tab-group-header",s),c=h+"-header-"+r,y=n.Snippet("Sys Js Tabs Instructions","Press left and right keys to move between tabs. Press down to focus tab content.");u.length||(u=$('<div id="'+c+'" class="js-element clearfix tab-group-header"><\/div>'),$('<div class="visuallyhidden list_help" id="'+c+'-description" aria-hidden="true"><p>'+y+"<\/p><\/div>").appendTo(s),u.attr({role:"tablist","aria-label":"Tab selection with "+f.length+" tabs","aria-describedby":c+"-description","aria-orientation":"horizontal"}),f.each(function(n){var i=$(this),e=i.children().first().data("total-results"),h,t,y,f,o,s,a,w,v;e=typeof e=="undefined"||e===null?"unknown":e;h="total-results-"+e;t=i.attr("id");(t==undefined||t==="")&&(t="panel-"+r+"-"+(n+1),i.attr("id",t));y=t+"-controller";i.addClass(h).attr({role:"tabpanel","aria-hidden":"true"});f="";o=1;do f=i.prev(".no-js-element").find("h"+o+".item-text"),o++;while(f.length==0&&o<=6);if(t!==undefined&&f.length>0){var c=f.text(),l=f.attr("lang"),p="";l&&l.length!==0&&(p="lang="+l);s=$('<a href="#'+t+'" class="tab-header-title for-'+t+" item-"+(n+1)+" "+h+' notranslate" '+p+'><i class="item-icon" aria-hidden="true"><\/i><span class="item-text translate">'+c+"<\/span><\/a>");i.attr({"aria-label":c+" Tab Panel"});a=f.parent().attr("class").split(/\s+/);for(w in a){v=a[w];switch(v){case"":case"no-js-element":case"clearfix":continue;default:s.addClass(v)}}s.attr({role:"tab","aria-label":c,"aria-selected":"false",tabindex:"-1",id:y,"aria-controls":t}).data("page-index",n);u.append(s)}$(".profile-tabbed-listing",i).each(function(){var n=$(this);n.data("total-results")>0&&(n.attr("role","list"),$(".grid",n).attr("role","presentation").children().attr("role","listitem"),n.data("total-results")>3&&n.addClass("more-than-3-items"))})}),e.before(u));var o=$("a.tab-header-title",s),t=window.location.hash,l=!1,v=$('a[name="'+t.substr(1)+'"]');v.length>0&&(t="#"+v.attr("id"));(t===""||$(t,e).length===0)&&(l=!0);a=!1;o.removeClass("selected").attr({"aria-selected":"false",tabindex:"-1"});f.each(function(){var n=$(this).attr("id");l&&!a&&n!==undefined?($(this).addClass("selected").removeClass("disabled rs_skip").attr("aria-hidden","false"),o.first().addClass("selected").attr({"aria-selected":"true",tabindex:"0"}),a=!0):"#"+n==t?($(this).addClass("selected").removeClass("disabled rs_skip").attr("aria-hidden","false"),o.filter("a.for-"+t.substr(1)).addClass("selected").attr({"aria-selected":"true",tabindex:"0"}),$(window).scrollTop(0)):!l&&$(this).find("a"+t).length>0?($(this).addClass("selected").removeClass("disabled rs_skip").attr("aria-hidden","false"),o.filter("a.for-"+n).addClass("selected").attr({"aria-selected":"true",tabindex:"0"})):$(this).addClass("disabled rs_skip").removeClass("selected").attr("aria-hidden","true")});o.on("click",function(){var t=$(this),i,r;return t.hasClass("selected")?!1:(o.removeClass("selected").attr({"aria-selected":"false",tabindex:"-1"}),f.addClass("disabled rs_skip").removeClass("selected").attr("aria-hidden","true"),t.addClass("selected").attr({"aria-selected":"true",tabindex:"0"}),i=t.attr("href"),r=t.find(".item-text").text().trim(),$(i).addClass("selected").removeClass("disabled rs_skip").attr("aria-hidden","false"),n.Tools.RefreshPlugins(),n.Analytics.Record.TabSelection(r,h),t.trigger("oc-tab-selected",{tabname:r,targetElementSelector:i,source:this}),t.parent(".tab-stacked").length===1&&$("html, body").animate({scrollTop:t.parent(".tab-stacked").next(".tab-group-body").offset().top-20},500),!1)});u.on("keyup",function(n){var t=n.keyCode,i,o,s,r,f,c=$(this),h;t==37||t==39?(i=$(":focus",u),i.length>0&&i.is(".tabs-header")&&(o=i.data("page-index"),f=u.children().length,s=t<=38?-1:1,r=(o+s)%f,r<0&&(r+=f),u.children().eq(r).trigger("focus").trigger("click"),n.preventDefault())):(t===13||t===27||t===32||t===40)&&$(":focus",u).length>0&&(h=$(".tabs-panel.selected",e),h.attr("tabindex","0").trigger("focus").attr("tabindex","-1"),n.preventDefault())}).on("keydown",function(n){var t=n.keyCode;(t===32||t===40)&&n.preventDefault()});$(window).on("hashchange",function(){var u,i,e,c;t=window.location.hash;var l=$(".tabs-panel.selected"),a=l.attr("id"),r,s=$('a[name="'+t.substr(1)+'"], a'+t);s.length>0&&(u=s.closest(".tabs-panel"),u.length>0&&u.attr("id")!==a&&(r=$("#"+u.attr("id"))));$(t).hasClass("tabs-panel")&&(r=$(t));r&&(i=$('.tab-group-header a[href="#'+r.attr("id")+'"]'),o.removeClass("selected").attr({"aria-selected":"false",tabindex:"-1"}),f.addClass("disabled rs_skip").removeClass("selected").attr("aria-hidden","true"),r.addClass("selected").removeClass("disabled rs_skip").attr("aria-hidden","false"),i.addClass("selected").attr({"aria-selected":"true",tabindex:"0"}),e=i.find(".item-text").text().trim(),n.Tools.RefreshPlugins(),n.Analytics.Record.TabSelection(e,h),c=i.attr("href"),i.trigger("oc-tab-selected",{tabname:e,targetElementSelector:c,source:i[0]}),i.parent(".tab-stacked").length===1&&$("html, body").animate({scrollTop:i.parent(".tab-stacked").next(".tab-group-body").offset().top-20},500))})}}),$("#main-content").has(".tab-group-inner-page")){n.Plugins.Tabs.Refresh();$(window).on("resize",n.Tools.Debounce(function(){n.Plugins.Tabs.stackTabs()},50))}$(".rsbtn").length>0&&(n.Tools.PreserveReadSpeaker($(".tab-group")),$(".tab-group").find(".visuallyhidden").addClass("rs_skip"))},getTabsTotalWidth:function(){var n=[];return $(".tab-group.tab-group-inner-page").each(function(){var t=$(".tab-group-header",$(this)).attr("id"),i=0;$("#"+t+" .tab-header-title").each(function(){i+=$(this).outerWidth(!0)});n.push({Id:t,Width:i})}),n},stackTabs:function(){$(".tab-group.tab-group-inner-page").each(function(){for(var u=$(".tab-group-body",$(this)).outerWidth(),r=0,i=n.Plugins.Tabs.tabsTotalWidths||[],t=0;t<i.length;t++)i[t].Id===$(".tab-group-header",$(this)).attr("id")&&(r=i[t].Width);r+1>=u?$(".tab-group-header",$(this)).addClass("tab-stacked"):$(".tab-group-header",$(this)).removeClass("tab-stacked")})},removeTabStacks:function(){$(".tab-group.tab-group-inner-page .tab-group-header").removeClass("tab-stacked")},Refresh:function(){n.Plugins.Tabs.removeTabStacks();n.Plugins.Tabs.tabsTotalWidths=n.Plugins.Tabs.getTabsTotalWidth();n.Plugins.Tabs.stackTabs()}},StickySideBar:{_options:{selector:"#sub-navigation-container",contentSelector:".main-container",sidebarTopMargin:"auto",mainContainer:".main-inner-container"},init:function(){var t,f,i;this.init=function(){};var e=this,r="OpenCities.Plugins.StickySideBar.init",u=n.Tools.ArgsAsOptions(arguments,[{string:"selector"}]);if(u===!1)return console.warn(r+": failed"),!1;if((t=$.extend({},this._options,u||{}),f={"Sticky Sidebar jQuery Plugin":$.fn.stickySidebar},!n.Dependencies.Check(f,r))||(i=$(t.selector),i===undefined||i==null||i.length===0))return!1;OpenCities.Plugins.BreakpointChange.onBreakpointChange(function(n,i){i&&n=="sc-size-1"&&$(t.selector).stickySidebar(t)})}},AddToCalendar:{_options:{selector:"#addToCalendarBody",slideToggleSpeed:"fast"},init:function(){function e(){var r=$(t.selector),i=$(".occurence-panel .occurence-type",r),n=$(".multi-date-panel",r),u=function(r){var u=i.length===0||i.find("input[value=select]:checked").length;u?r?n.slideDown(t.slideToggleSpeed):n.show():r?n.slideUp(t.slideToggleSpeed):n.hide()};$("input[type=radio]",i).on("click",function(){u(!0)});u(!1)}var t,f,i;this.init=function(){};var o=this,r="OpenCities.Plugins.AddToCalendar.init",u=n.Tools.ArgsAsOptions(arguments,[{string:"selector"}]);if(u===!1)return console.warn(r+": failed"),!1;if((t=$.extend({},this._options,u||{}),!$(t.selector).length)||(f={".NET PageRequestManager":Sys.WebForms.PageRequestManager},!n.Dependencies.Check(f,r))||(i=$(t.selector),i===undefined||i==null||i.length===0))return!1;e();Sys.WebForms.PageRequestManager.getInstance().add_endRequest(e)}},ResponsiveTables:{_options:{},init:function(){var n,t;if(this.init=function(){},n=$(".sc-responsive-table"),n===undefined||n==null||n.length===0)return!1;$("table.sc-responsive-table").each(function(){var n=$(this);n.find("thead").length>0&&(n.addClass("tablesaw-swipe tablesaw"),n.attr({"data-tablesaw-mode":"swipe","data-tablesaw-minimap":""}),n.find("thead th:not([scope=row])").attr({"data-tablesaw-sortable-col":"",scope:"col"}),n.find("th:first").attr({"data-tablesaw-priority":"persist"}))});t=this;OpenCities.Plugins.BreakpointChange.onBreakpointChange(function(n,i){i&&$("table.tablesaw").each(function(){var n="#"+$(this).attr("id");t.TablesawChangeMode(n,"swipe",!0);$(document).trigger("enhance.tablesaw")})})},TablesawChangeMode:function(n,t,i){var r=$(n).closest(".tablesaw-modeswitch");r.remove();$(n).data("table")!=null&&$(n).data("table").destroy();t!="remove"&&($(n).attr("data-tablesaw-mode",t),i&&$(n).attr("data-tablesaw-minimap",""),$(n).tablesaw())},Refresh:function(){$("table.sc-responsive-table").removeData();$(".tablesaw-mode-swipe").remove();OpenCities.Plugins.ResponsiveTables.TablesawChangeMode(".tablesaw","swipe",!0);$(document).trigger("enhance.tablesaw")}},Gallery:{_paths:{masonry:OpenCities.Paths.SiteTemplate+"masonry.imagesloaded.min.js",magnificPopupJs:OpenCities.Paths.SiteTemplate+"magnific-popup.min.js",magnificPopupCss:OpenCities.Paths.SiteTemplate+"magnific-popup.css"},_options:{selector:".image-gallery-container",itemSelector:".image-gallery-item",loadingMessage:"Loading Images",magnificOptions:{delegate:".image-gallery-item > a",type:"image",mainClass:"mfp-with-zoom",cursor:null,zoom:{enabled:!0},gallery:{enabled:!0},image:{titleSrc:function(n){return n.el.find("p.caption").html()}}}},refresh:function(){$(".image-gallery-container.masonry-theme > .grid").each(function(){$(this).data("masonry")!==undefined&&$(this).data("masonry").layout()})},init:function(){this.init=function(){};var i=this,r=n.Tools.ArgsAsOptions(arguments,[{string:"selector"}]);if(r===!1)return console.warn("OpenCities.Plugins.Gallery.init: failed"),!1;var t=$.extend({},this._options,r||{}),u=$(t.selector);u.each(function(){var r=$(this),s=r.data("theme"),u,f,e,o;if(s=="masonry"){u=r.find("> .grid");r.addClass("images-loading");f=$('<div class="loading-message">'+t.loadingMessage+"<\/div>");r.prepend(f);e=0;$(t.itemSelector,u).each(function(){var t=$(this),i;$("i",t).remove();i=n.Snippet("Sys Js Gallery Open image in slideshow","Open image in slideshow");$("figcaption",t).append($(".file-info",t)).append('<span class="visuallyhidden">'+i+"<\/span>");e++});o=function(n,i,r){return{masonry:function(){var u=window.location.hash,f=u&&u.length>1;n.imagesLoaded(function(){i.removeClass("images-loading").addClass("images-loaded");r.remove();OpenCities.Plugins.BreakpointChange.onBreakpointChange(function(t,i,r){if(i){var u=s(e);switch(!0){case t=="sc-size-3"&&r=="sc-size-2":case(t=="sc-size-3"||t=="sc-size-4")&&r==!1:n.children().removeClass("col-xs-12").addClass(u);break;case t=="sc-size-2"&&r=="sc-size-3":n.children().removeClass(u).addClass("col-xs-12")}}});var o=n.masonry({itemSelector:t.itemSelector,isInitLayout:!1});o.one("layoutComplete",function(){if(f){var n=$(u);n.length&&requestAnimationFrame(function(){$("html, body").animate({scrollTop:n.offset().top-50},200)})}});o.masonry("layout")})},magnific:function(){i.magnificPopup(t.magnificOptions)}}}(u,r,f);n.Dependencies.GetScript(i._paths.masonry,o.masonry);n.Dependencies.GetScript(i._paths.magnificPopupJs,o.magnific);n.Dependencies.GetStylesheet(i._paths.magnificPopupCss);function s(n){return n>=4&&n<=10?"col-xs-6":n>=11?"col-xs-4":"col-xs-12"}}})}},SocialFeed:{_paths:{masonry:OpenCities.Paths.SiteTemplate+"masonry.imagesloaded.min.js"},init:function(){this.init=function(){};var t=$(".social-feed");if(t===undefined||t==null||t.length===0)return!1;$(".social-feed.social-feed-style-matchheight .social-feed-item").matchHeight({property:"min-height"});$(".social-feed.social-feed-style-masonary").each(function(){var t=$(this),i=function(n){return{masonry:function(){n.imagesLoaded(function(){n.masonry({itemSelector:".grid > div"})})}}}(t);n.Dependencies.GetScript(OpenCities.Plugins.SocialFeed._paths.masonry,i.masonry)})},refresh:function(){$(".social-feed.social-feed-style-masonary").each(function(){$(this).data("masonry")!==undefined&&$(this).data("masonry").layout()})}},Slider:{_options:{selector:".slideshow-widget"},init:function(){var i,r;this.init=function(){};var u=this,t=n.Tools.ArgsAsOptions(arguments,[{string:"selector"}]);if(t===!1)return console.warn("OpenCities.Plugins.Slider.init: failed"),!1;i=$.extend({},this._options,t||{});r=$(i.selector);r.each(function(){"use strict";var t=$(this),u=t.attr("id"),y=u+"_oc_flex_viewport",i=$(".controls",t),o=$(".slides > .slide",t),s,e,f,r,h=function(n){var i=n.animatingTo+1,r=$("#"+u+"_oc_flex_slide_"+i),f=$("#"+u+"_oc_flex_page_"+i),e=$(".ocflex-control-paging a",t),o=e.filter(":focus");$(".anchor-or-span",t).attr("tabindex","-1");$(".anchor-or-span",r).attr("tabindex","0");$("article",t).attr("aria-hidden","true");r.attr("aria-hidden","false");e.attr({"aria-selected":"false",tabindex:"-1"});f.attr({"aria-selected":"true",tabindex:"0"});o.length&&o.attr("aria-selected")==="false"&&f.trigger("focus")},p=function(n,t){var i=$(".controls .ocflex-pauseplay a",n);t==="play"?i.attr({"aria-pressed":"true","aria-label":"Pause"}):i.attr({"aria-pressed":"false","aria-label":"Play"})},w=function(n,t){var e=!0,i=t.keyCode,r,o,s,u,f;return i==37||i==39?(r=$(":focus",n),r.length>0?r.is(".ocflex-control-paging a")&&(o=r.data("page-index"),s=i<=38?-1:1,u=(o+s)%n.count,u<0&&(u+=n.count),$(n.controlNav[u]).trigger("focus"),t.preventDefault()):e=!1):i===27?$(":focus",n).length>0&&n.pausePlay.trigger("focus"):(i===13||i===32||i===40)&&$(":focus").is(".ocflex-control-paging .ocflex-active")&&(f=$(n.slides[n.currentSlide]).children(".anchor-or-span"),f.is("a")?f.trigger("focus"):f.attr("tabindex","0").trigger("focus").attr("tabindex","-1"),t.preventDefault()),e},c,a,v;if(!(o.length<=1)){t.on("keydown",function(n){var i=n.keyCode;(i===32||i===40)&&$(":focus",t).is(".ocflex-control-paging a")&&n.preventDefault()});c=$(this).data("animation-style");t.flexslider({namespace:"ocflex-",animation:c,selector:".slides > .slide",pausePlay:!0,pauseOnHover:!0,controlsContainer:i,before:h,start:h,oc_onPausePlay:p,oc_onKeyboard:w,oc_pauseOnFocus:!0,fadeFirstSlide:!1});s=$(".ocflex-pauseplay a",i);e=$(".ocflex-direction-nav",i).appendTo(i);f=$(".ocflex-control-paging",i).appendTo(i);r=$("li > a",f);t.on("keydown",function(n){n.which===32&&n.preventDefault()});t.attr({role:"region","aria-label":"Slide carousel"});i.attr({"aria-controls":y,"aria-label":"Carousel controls"});s.attr({role:"button","aria-pressed":"true"});e.attr({role:"presentation"});$("li",e).attr({role:"presentation"});$("a",e).attr({role:"button"});var l=n.Tools.GenerateUniqueId(),b=n.Snippet("Sys Js Carousel Instructions","Press left and right keys to move between slides."),k=$('<div class="visuallyhidden list_help" id="'+l+'"><p>'+b+"<\/p><\/div>");f.before(k);a=n.Snippet("Sys Js Carousel ARIA Description","Slide selection with {0} tabs");v=a.replace(/\{0\}/i,r.length);f.attr({role:"tablist","aria-label":v,"aria-describedby":l,"aria-orientation":"horizontal"});$("li",f).attr({role:"presentation"});r.attr({role:"tab"}).removeAttr("href").on("keyup keydown",function(n){n.keyCode===13&&n.preventDefault()});$("article",t).attr({role:"tabpanel"});r.length===o.length&&function(){for(var i,f,t,e,s,h,c,n=0;n<r.length;n=n+1)i=r.eq(n),f=o.eq(n),t=f.find("h2").text(),f.length===1&&i.length===1&&(e=n+1,s=u+"_oc_flex_slide_"+e,h=u+"_oc_flex_page_"+e,f.attr({id:s,"aria-labelledby":h}),c=t===""?"Slide "+e+" of "+r.length:t,i.attr({id:h,"aria-controls":s,"aria-label":c,"data-page-index":n}),t!==""&&i.html(t))}()}});$innerPageSlideshows=$(".inner-slideshow");$innerPageSlideshows.each(function(){var t=$(this),i=n.Plugins.Slider.GetSlideshowSize(t.outerWidth());t.addClass(i);$(window).on("resize",OpenCities.Tools.Debounce(function(){i=n.Plugins.Slider.GetSlideshowSize(t.outerWidth());t.removeClass("narrow-slideshow medium-slideshow wide-slideshow");t.addClass(i)},50))})},Refresh:function(){$innerPageSlideshows=$(".inner-slideshow");$innerPageSlideshows.each(function(){var t=$(this),i=n.Plugins.Slider.GetSlideshowSize(t.outerWidth());t.addClass(i)})},GetSlideshowSize:function(n){return n<600?"narrow-slideshow":n<850?"medium-slideshow":"wide-slideshow"}},FeaturedLinks:{init:function(){this.init=function(){};var t=$(".featured-links");if(t.length!==0){t.each(function(){var t=$(this),i=n.Plugins.FeaturedLinks.GetSize(t.outerWidth());t.addClass(i)});$(window).on("resize",OpenCities.Tools.Debounce(function(){n.Plugins.FeaturedLinks.Refresh()},100))}},Refresh:function(){var t=$(".featured-links");t.each(function(){var t=$(this),i=n.Plugins.FeaturedLinks.GetSize(t.outerWidth());t.removeClass("narrow-layout medium-layout wide-layout");t.addClass(i)});$.fn.matchHeight._update()},GetSize:function(n){return n<400?"narrow-layout":n<600?"medium-layout":"wide-layout"}},GoogleMaps:{_options:{mapContainer:".gmap",marker:".gmap-marker",target:".gmap-target",latlong:".gmap-latlong",address:".gmap-address",info:".gmap-info",defaultLat:-37.818157,defaultLon:144.960393,supportAjaxContentMaps:!1,title:".gmap-title"},init:function(){function l(i){var f=$(i).data(),e=$(i).find(t.marker),u=$(i).find(t.target)[0],r;$(u).find("img").remove();r={container:i,markers:[],markerSourceElements:e,isMultiple:e.length>1,params:f.params,targetDiv:u,googleMap:a(u,f.params),infoWindow:new google.maps.InfoWindow};r.infoWindow.setOptions({maxWidth:275});y(r);(r.params.fitBounds===!0||r.params.autoBounds===!0)&&c(r);n.Tools.AccessibleGoogleMap(r.googleMap);n.Tools.AccessibleGoogleMapInfoWindow(r.infoWindow)}function a(n,t){var r=v(t),i={zoom:t.zoom,center:r,mapTypeId:google.maps.MapTypeId.ROADMAP};return i.disableDefaultUI=t.hideControls===!0||!1,i.minZoom=t.minZoom!==undefined?t.minZoom:0,i.maxZoom=t.maxZoom!==undefined?t.maxZoom:21,new google.maps.Map(n,i)}function v(n){if(n.centerPoint===undefined)return new google.maps.LatLng(t.defaultLat,t.defaultLon);var i=s(n.centerPoint);return i.length==2?new google.maps.LatLng(i[0],i[1]):new google.maps.LatLng(t.defaultLat,t.defaultLon)}function y(n){$(n.markerSourceElements).each(function(){var i=$(this).find(t.latlong).first().html(),r=$(this).find(t.address).first().html(),u=$(this).find(t.info).first().html(),f=s(i),e=$(this).find(t.title).first().html(),o={latLong:f,address:r,info:u,title:e};p(o,n)})}function s(n){var i=n.split(","),t=[];return i.length!=2?t:(t[0]=parseFloat(i[0]),t[1]=parseFloat(i[1]),t)}function p(n,t){n.latLong.length==2?h(new google.maps.LatLng(n.latLong[0],n.latLong[1]),n,t):b(n,t)}function h(n,t,i){var u=t.title?t.title.trim():"",r=new google.maps.Marker({position:n,map:i.googleMap,title:u});google.maps.event.addListener(r,"click",function(){i.infoWindow.setContent(t.info);i.infoWindow.open(i.googleMap,r)});w(t,i);i.markers.push(r)}function w(n,t){t.params.autoOpenInfoWindow===!0&&t.isMultiple===!1&&window.addEventListener("load",function(){t.infoWindow.setContent(n.info);t.markers.length==1&&t.infoWindow.open(t.googleMap,t.markers[0])})}function b(n,t){var i=new google.maps.Geocoder;i.geocode({address:n.address},function(i,r){if(r==google.maps.GeocoderStatus.OK){var u=i[0].geometry.location;h(u,n,t);(t.params.fitBounds===!0||t.params.autoBounds===!0)&&c(t)}else console.log("Geocode was not successful for the following reason: "+r)})}function c(n){var i,t,r;if(n.markers.length>0)if(n.markers.length>1){for(i=new google.maps.LatLngBounds,t=0;t<n.markers.length;t++)r=n.markers[t].position,i.extend(r);n.googleMap.fitBounds(i)}else n.googleMap.panTo(n.markers[0].position)}var t,e,i,o;this.init=function(){};var r=this,u="OpenCities.Plugins.GoogleMaps.init",f=n.Tools.ArgsAsOptions(arguments,[{string:"mapContainer"}]);if(f===!1)return console.warn(u+": failed"),!1;if((t=$.extend({},this._options,f||{}),e={"Google Maps API":function(){try{return google.maps}catch(n){return!1}}()},!n.Dependencies.Check(e,u))||(i=$(t.mapContainer),!t.supportAjaxContentMaps&&!i.length))return!1;o=r.Reset;r.Reset=function(){o();i=t.supportAjaxContentMaps?$(t.mapContainer):i;$(i).each(function(){l(this)})};OpenCities.Plugins.BreakpointChange.onBreakpointChange(function(n,t){t&&(n=="sc-size-1"||n=="sc-size-2"||n=="sc-size-3")&&r.Reset()})},Reset:function(){}},IOSMultiSelectFix:{init:function(){console.warn("Obsolete: OpenCities.Plugins.IOSMultiSelectFix moved to OpenCities.Fixes and will be run automatically.")}},PageSections:{init:function(){var t,i;if(this.init=function(){},t=$(".page-section"),t===undefined||t==null||t.length===0)return!1;t.each(function(){var u=$(this),i=[],f=$(),g={},o=$(),nt={},s=window.location.hash.toLowerCase(),tt=s!=="",it,l,a,v,t,y,rt,k,h,d,ut;$(".page-section-container",this).each(function(n){var t=$(this),r="#"+$(".page-section-header",t).attr("id"),u=r.toLowerCase(),o,e;i.push(r);g[u]=t;t.addClass("rs_skip");t.find(".table-of-content").attr("role","navigation");tt&&(o=$('a[name="'+window.location.hash.substr(1)+'"], a'+window.location.hash,t),o.length>0&&(s=u));e=tt&&u===s;(e||n===0)&&(f=t,e&&$(function(){setTimeout(function(){$("html, body").animate({scrollTop:$("#main-content").offset().top-100},0)},1)}),$(".table-of-content-container .table-of-content a").parent().removeClass("active-toc-item"),$('.table-of-content-container .table-of-content a[href="'+r+'"]').parent().addClass("active-toc-item"))});f.length===1&&(f.addClass("page-section-container-active").removeClass("rs_skip").trigger("oc-section-open"),it=f.data("section-index")!=1?"none":"block",$(".main-page-image").css("display",it));var ft=n.Snippet("Sys Js ARIA Page TOC Section Links description","Page section previous next links description"),h=n.Snippet("Sys Js Next","Next"),et=n.Snippet("Sys Js Previous","Previous"),ot=n.CreateElement("div",{"class":"page-section-pagination-item"}),c=n.CreateElement("div",{"class":"col-xs-12 col-lg-6"});if(n.CreateElement("span",{"class":"visuallyhidden"}).text(ft).appendTo(c),l=n.CreateElement("a",{"class":"item-navigation prev-item"}),n.CreateElement("span",{"class":"item-navigation-label"}).text(et).appendTo(l),a=n.CreateElement("a",{"class":"item-navigation next-item"}),n.CreateElement("span",{"class":"item-navigation-label"}).text(h).appendTo(a),v=n.CreateElement("span",{"class":"item-navigation-title"}),!u.hasClass("page-section-type-0")&&i.length>0){for(y=n.CreateElement("div",{"class":"grid"}),t=0;t<i.length;++t){var p=i[t],st=p.toLowerCase(),w=t!==0?i[t-1]:null,b=t<i.length-1?i[t+1]:null,e=ot.clone().data("page-index",p),r=c.clone();w===null?r.html("&nbsp;"):(rt=$(w).html(),k=l.clone().attr({href:w}),v.clone().html(rt).appendTo(k),r.append(k));r.appendTo(e);r=c.clone();b===null?r.html("&nbsp;"):(h=$(b).html(),d=a.clone().attr({href:b}),v.clone().html(h).appendTo(d),r.append(d));r.appendTo(e);e.appendTo(y);nt[p.toLowerCase()]=e;(t===0||s==st)&&(o=e)}ut=$(".page-section-pagination",this).append(y);ut.attr("role","navigation").attr("aria-label","page section links");o.length===1&&o.addClass("page-section-pagination-item-active")}u.data("sections",g);u.data("activeSection",f);u.data("paginationGroups",nt);u.data("activePaginationGroup",o)});i=function(){var t=window.location.hash,u=t!=="",r,i;u&&(i=$(".page-section-container").find('a[name="'+t.substr(1)+'"]'),i.length>0?(r=i.closest(".page-section-container").find(".page-section-header").attr("id"),t="#"+r):(i=$(".page-section-container").find("a"+t),i.length>0&&(r=i.closest(".page-section-container").find(".page-section-header").attr("id"),t="#"+r)));t=t.toLowerCase();$(".page-section").each(function(){var n=$(this),i=n.data("sections"),f=n.data("activeSection"),r=n.data("paginationGroups"),e=n.data("activePaginationGroup"),u;r.hasOwnProperty(t)&&(e.removeClass("page-section-pagination-item-active"),newActivePaginationGroup=r[t],newActivePaginationGroup.addClass("page-section-pagination-item-active"),n.data("activePaginationGroup",newActivePaginationGroup));i.hasOwnProperty(t)&&(f.removeClass("page-section-container-active").addClass("rs_skip").trigger("oc-section-close"),newActiveSection=i[t],newActiveSection.addClass("page-section-container-active").removeClass("rs_skip").trigger("oc-section-open"),n.data("activeSection",newActiveSection),u=newActiveSection.data("section-index")!=1?"none":"block",$(".main-page-image").css("display",u),$("html, body").animate({scrollTop:$(".page-section").offset().top-50},400))});n.Tools.RefreshPlugins()};$(".table-of-content-container").each(function(){var n=$(this),t=n.children(".table-of-content");if(t.length===1)n.on("click",".table-of-content a",function(){if($(this).attr("href")==window.location.hash)return i(),!1;$("li",n).removeClass("active-toc-item");$(this).parent().addClass("active-toc-item")})});$(".rsbtn").length>0&&(n.Tools.PreserveReadSpeaker($(".table-of-content")),n.Tools.PreserveReadSpeaker($(".page-section")),$(".page-section").find(".visuallyhidden").addClass("rs_skip"));$(window).on("hashchange",i)}},MultiDateEvent:{init:function(){this.init=function(){};var i=5,r=n.Snippet("Sys Js Dates Show all dates","Show all dates"),f=n.Snippet("Sys Js Dates Show fewer dates","Show fewer dates"),e=n.Snippet("Sys Js Dates Past event dates","Past event dates"),u=1,t=3;$(".multi-date-list-container").each(function(){var w=!1,l=[],h=$(this).prev(".sub-title"),o,p;h&&(h.is("h2")?t=3:h.is("h3")?t=4:h.is("h4")&&(t=5));o=$(this);o.attr({id:"multi-date-container-"+u,"aria-live":"polite",role:"region"});u++;var a=$(".multi-date-item",o),k=a.length,c=a.length,s=$('<a href="#" class="multi-date-toggle" aria-controls="multi-date-container">'+r+"<\/a>");s.data("has-been-clicked",!1);var v=$('<div class="past-events-container"><h'+t+">"+e+"<\/h"+t+"><\/div>"),b=$('<ul class="multi-date-list past-events-list"><\/ul>'),y=new Date;a.each(function(t){var i;if($(this).data("end-year")&&$(this).data("end-year")!=null&&$(this).data("end-year")!==""&&$(this).data("end-hour")!==undefined&&$(this).data("end-mins")!==undefined?i=n.Plugins.MultiDateEvent.formatDateTime($(this).data("end-year"),$(this).data("end-month"),$(this).data("end-day"),$(this).data("end-hour"),$(this).data("end-mins")):$(this).data("end-year")&&$(this).data("end-year")!=null&&$(this).data("end-year")!==""?(y.setHours(0,0,0,0),i=n.Plugins.MultiDateEvent.formatDate($(this).data("end-year"),$(this).data("end-month"),$(this).data("end-day"))):$(this).data("start-hour")!==undefined&&$(this).data("start-mins")!==undefined?i=n.Plugins.MultiDateEvent.formatDateTime($(this).data("start-year"),$(this).data("start-month"),$(this).data("start-day"),$(this).data("start-hour"),$(this).data("start-mins")):(y.setHours(0,0,0,0),i=n.Plugins.MultiDateEvent.formatDate($(this).data("start-year"),$(this).data("start-month"),$(this).data("start-day"))),i<y)c--,t===0&&(w=!0),$(this).appendTo(b);else return!1});p=c===0;p?v.addClass("show"):c>i?($(".future-events-list li",o).each(function(n){n>=i&&(l.push($(this).addClass("surplus")),$(this).remove())}),s.insertAfter(o)):c<k&&s.insertAfter(o);w&&(b.appendTo(v),v.insertAfter($(".future-events-list",o)));p&&$(".future-events-list",o).remove();o.addClass("show");s.on("click",function(n){var t=$(this),i;if(!s.data("has-been-clicked")){if(i=l.length,i>0)for(x=0;x<i;x++)$(".future-events-list",o).append(l.shift());s.data("has-been-clicked",!0)}t.hasClass("toggled")?(t.text(r),$(".future-events-list .surplus",o).hide(300),$(".past-events-container",o).hide(300)):(t.text(f),$(".future-events-list .surplus",o).hide().show(300),$(".past-events-container",o).show(300));t.toggleClass("toggled");n.preventDefault()})})},formatDate:function(n,t,i){return new Date(n,t-1,i)},formatDateTime:function(n,t,i,r,u){return new Date(n,t-1,i,r,u)}},Glossary:{init:function(){this.init=function(){};var s=$("#oc-aria-status"),r="OC Title",u="OC Short Description",i=n.Snippet("Sys Js Tooltip Show info","Show info"),f=n.Snippet("Sys Js Tooltip Hide info","Hide info"),e=n.Snippet("Sys Js Tooltip Loading info","Loading info."),o=n.Snippet("Sys Js Tooltip Here is the definition for n0 n1","Here is the definition for {0}: {1}"),t={has:function(n){return this.__items.hasOwnProperty(n)},get:function(n,t){if(typeof t!="function"&&(t=function(){}),this.has(n))return t(this.__items[n]),!0;if(this.__callbackQueue.hasOwnProperty(n))this.__callbackQueue[n].push(t);else{this.__callbackQueue[n]=[t];var i=this.__callbackQueue[n],f=this.__items;$.ajax({type:"GET",url:"/webservice/SeamlessGetCMSObjectWS.asmx/GetSeamlessObject?objectid="+n,success:function(t){var o=$(t).find("objectName").text(),s=$(t).find("objectName").text(),e,h;for($(t).find("fieldData").each(function(){var n=$(this).find("fieldName").text();n===u?s=$(this).find("fieldValues").find("value").text():n===r&&(o=$(this).find("fieldValues").find("value").text())}),e={title:o,description:s},f[n]=e;i.length;)h=i.shift(),h(e)}})}return!1},__items:{},__callbackQueue:{}};$("a.pop_glossary").tooltipster({contentAsHTML:!0,onlyOne:!0,position:"bottom",content:"Loading...",theme:"tooltipster-glossary tooltipster-default",maxWidth:300,functionBefore:function(n,i){if(i(),n.data("ajax")!=="cached"){var r=$(this).data("content-id");t.get(r,function(t){var i="<h4>"+t.title+"<\/h4><p>"+t.description+"<\/p>";n.tooltipster("content",i).data("ajax","cached")})}}}).on("focus",function(){var n=$(this),i=n.data("content-id");t.get(i)}).on("blur",function(){$(this).attr({"data-pressed":"false","aria-expanded":"false"}).tooltipster("hide");var n=$(this).data("accessible-tooltip");n.attr("aria-hidden","true").html("").hide()}).on("keydown",function(n){if(n.key!==undefined&&n.key==="Escape"||n.keyCode!==undefined&&n.keyCode===27){var t=$(this).data("accessible-tooltip");t.attr("aria-hidden","true").html("").hide();$(this).attr({"data-pressed":"false","aria-expanded":"false"}).tooltipster("hide");n.preventDefault()}}).on("click",function(n){var r=$(this),h=r.data("toggle-info"),u=r.data("accessible-tooltip"),l=r.data("tooltip-id"),s,c;r.attr("data-pressed")==="true"?(r.attr("data-pressed","false").tooltipster("hide"),u.attr("aria-hidden","true").html("").hide(),h.html(" ("+i+")")):(s=r.data("content-id"),c=t.has(s),c||(u.show(),setTimeout(function(){t.has(s)||u.html(e).show()},150)),t.get(s,function(n){u.show();setTimeout(function(){var t=o.replace(/\{0\}/i,n.title).replace(/\{1\}/i,n.description);u.html(t).show()},150)}),r.attr({"data-pressed":"true"}).tooltipster("show"),u.attr("aria-hidden","false"),h.html(" ("+f+")"));n.preventDefault()}).attr({role:"button","data-pressed":"false","aria-controls":"oc-aria-status"}).each(function(){var r=$(this),t=n.Tools.GenerateUniqueId(),u=$('<span class="visuallyhidden"> ('+i+")<\/span>"),f=$('<span class="visuallyhidden" role="tooltip" aria-hidden="true" aria-live="polite" id="'+t+'"><\/span>');r.attr("aria-describedby",t).data({"toggle-info":u,"accessible-tooltip":f,"tooltip-id":t}).append(u);r.after(f)})}},Tooltip:{init:function(){this.init=function(){};$(".tooltip").tooltipster({contentAsHTML:!0,interactive:!0,onlyOne:!0,position:"bottom",functionInit:function(n,t){if(t===null||t===""){var i=n.parent().find(".tooltip-content");return i.attr({"aria-hidden":"true"}),i.hide(),i.html()}}});$(".tooltip").attr({role:"button","data-pressed":"false","aria-controls":"oc-aria-status","aria-expanded":"false"}).on("blur",function(){var t=$(this),n;$(this).attr({"aria-expanded":"false","data-pressed":"false"}).tooltipster("hide");n=t.data("accessible-tooltip");n.attr("aria-hidden","true").html("").hide()}).on("click",function(n){var t=$(this),i=t.data("accessible-tooltip"),r;t.attr("data-pressed")==="true"?(i.attr("aria-hidden","true").html("").hide(),t.attr({"data-pressed":"false","aria-expanded":"false"}).tooltipster("hide")):(r=t.parent().find(".tooltip-content"),i.attr("aria-hidden","false"),i.html(r.html()).show(),t.attr({"data-pressed":"true","aria-expanded":"true"}).tooltipster("show"));n.preventDefault()}).on("keydown",function(n){if(n.key!==undefined&&n.key==="Escape"||n.keyCode!==undefined&&n.keyCode===27){var t=$(this).data("accessible-tooltip");t.attr("aria-hidden","true").html("").hide();$(this).attr({"data-pressed":"false","aria-expanded":"false"}).tooltipster("hide");n.preventDefault()}}).each(function(){var i=$(this),t=n.Tools.GenerateUniqueId(),r=$('<span class="visuallyhidden" role="tooltip" aria-hidden="true" aria-live="polite" id="'+t+'"><\/span>');i.attr("aria-describedby",t).data({"accessible-tooltip":r,"tooltip-id":t});i.after(r)})}},MatchHeight:{init:function(){this.init=function(){};var n={property:"min-height"};$.each([".landing-page-nav .list-item-container a",".profile-featured-panels .profile-featured-panel",".mycouncil-panels .list-item-container a","a.item-navigation",".landing-page-list-container .small-panel a",".elected-official-list-container article",".department-list-container article",".staff-list-results-container .list-item-container-2",".search-list-container-combined .list-item-container a",".message-board-item .message-board-item-title",".message-board-item .message-board-item-info a",".row-content-container > .profile-listing-container .profile-list",".row-content-container > .top-task-homepage .profile-list",".oc-quick-list.oc-quick-list-grid .grid a",".list-container.list-container-grid  .small-panel a",".featured-links .featured-links-body a"],function(t,i){$(i).matchHeight(n)});OpenCities.Plugins.BreakpointChange.onBreakpointChange(function(n,t){t&&(n=="sc-size-1"?($(".profile-tabbed-listing.top-task-homepage a").matchHeight({remove:!0,property:"min-height"}),$(".profile-tabbed-listing.profile-elected-officials-listing a").matchHeight({remove:!0,property:"min-height"}),$(".profile-tabbed-listing a").matchHeight({property:"min-height"})):n=="sc-size-2"?($(".profile-tabbed-listing a").matchHeight({remove:!0,property:"min-height"}),$(".profile-tabbed-listing.top-task-homepage a").matchHeight({property:"min-height"}),$(".profile-tabbed-listing.profile-elected-officials-listing a").matchHeight({property:"min-height"})):n=="sc-size-3"?($(".profile-tabbed-listing a").matchHeight({remove:!0,property:"min-height"}),$(".profile-tabbed-listing.top-task-homepage a").matchHeight({remove:!0,property:"min-height"}),$(".profile-tabbed-listing.profile-elected-officials-listing a").matchHeight({property:"min-height"})):($(".profile-tabbed-listing a").matchHeight({remove:!0,property:"min-height"}),$(".profile-tabbed-listing.top-task-homepage a").matchHeight({remove:!0,property:"min-height"}),$(".profile-tabbed-listing.profile-elected-officials-listing a").matchHeight({remove:!0,property:"min-height"})))})}},SocialMediaIcons:{init:function(){this.init=function(){};OpenCities.Hookups.Add(function(n){var t=$(n);$("li.social-media[data-href]",t).each(function(){var n=$(this),i=n.data("href"),t=OpenCities.Tools.SocialWebsiteMatch.GetWebsiteByURL(i);t!==!1&&n.addClass(t.IconClass)})})}},HideSingleOptionSelectBox:{init:function(){this.init=function(){};$(".search-filter select").each(function(){var n=$(this),t=n.children().filter(function(){return $(this).val()!==""});t.length<2&&(n.prev("label").addClass("hidden"),n.addClass("hidden"))})}},SearchFilterMultiSelect:{_paths:{autocomplete:OpenCities.Paths.SiteTemplate+"jquery.autocomplete.min.js"},init:function(){function t(n,t){return $btn=$('<button class="btn-tag"><span class="tag-text">'+t.text+'<\/span><span id="value" style="display:none">'+t.value+'<\/span><span class="visuallyhidden"> '+u+'<\/span><i aria-hidden="true"><\/i><\/button>').attr("data-element-id",n),$btn[0].tagOption=t,$btn}function i(n){var i,t,r,u,f;n.tagOption&&(n.tagOption.checked=!1);i=$("#value",n).text();t=$("#"+$(n).data("element-id"));$('option[value="'+i+'"]',t).prop("selected",!1);$(n).remove();r=i.replace(/[^a-zA-Z0-9]/g,"_");u=$("#"+t.attr("id")+"_"+r);u.remove();$("option:checked",t).length==0&&(f=$("#"+t.attr("id")+"_msCurrentSelectedSection"),f.attr("tabindex","-1"))}function r(n,t,i){var r=i.replace(/[^a-zA-Z0-9]/g,"_");return $('<span id="'+n+"_"+r+'" class="visuallyhidden">'+t+"<\/span>")}this.init=function(){};var u=n.Snippet("Sys Js Search Click to remove","Click to remove");if($("body").hasClass("device-desktop")){$(".search-filter-body","#main-content").each(function(){var u=this,f;$(u).hasClass("landing-page-search")||(f=$(u).closest(".grid"),$($("select[multiple]",u),f).each(function(){var u=this,f;$(u).hasClass("hidden")||(f=function(n){return{autocomplete:function(){var s=[],f,e,b,v,k;s.length=0;$(n).children().each(function(){s.push({text:$(this).text(),value:$(this)[0].value,checked:$(this).is(":selected")})});var d=n.id+"_msInputHelpText",g=$('<div class="visuallyhidden" id='+d+' class="ms-input-help-text"><p>Type to filter available options. Press up and down arrow keys to move between options. Press Enter key to select or unselect an option. Multiple options may be selected. Selected options are placed above the input field.<\/p><\/div>'),y=n.id+"_msOptionTagsHelpText",nt=$('<span class="visuallyhidden" id='+y+' class="ms-option-tags-help-text">Currently selected options<\/span>'),p=n.id+"_msWrap",o="#"+p,l=n.id+"_msTextInput",tt="#"+l,w=n.id+"_msCurrentSelectedSection",h=$("<input id="+l+' class="multi-select-text-input prevent-submit" aria-describedby="'+w+'">').data("select-id",n.id),u=$('<section id="'+w+'" aria-describedby="'+y+'">'),a=$("<section>"),c=$('<div class="multi-select-options">').data("select-id",n.id);if(a.append(g,u),u.append(nt),f=s.filter(n=>n.checked),f.length>0)for(u.attr("tabindex","0"),e=0;e<f.length;e++)f[e].text!==""&&(b=t(n.id,f[e]),c.append(b),u.append(r(n.id,f[e].text,f[e].value)));else u.attr("tabindex","-1");$(n).after(a.append(c),$('<div id="'+p+'" class="multi-select-wrapper">').append(h));v=$("label[for='"+n.id+"']");v.attr({id:n.id+"_msTextLabel","for":l});a.attr("aria-labelledby",v.attr("id"));k=function(n,t){if(!t)return n.text;var i="("+t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")+")";return n.text.replace(new RegExp(i,"gi"),"<strong>$1<\/strong>").replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/&lt; (\/?strong)&gt;/g,"<$1>")};$(tt).autocomplete({lookup:s,afterKeyboardMove:function(t){var f=$('option[value="'+t+'"]',n),u=$('.autocomplete-suggestion-with-checkbox input[type="checkbox"][value="'+t+'"]',o);if(h.removeAttr("aria-label"),u.length>0){var e=f.is(":selected")?" checked":" unchecked",s=u.parent("label").text(),r=n.id+"_liveAnnounce",i=$("#"+r);i.length===0&&(i=$('<div id="'+r+'" class="visuallyhidden" aria-live="polite"><\/div>'),$(o).append(i));i.remove();i=$('<div id="'+r+'" class="visuallyhidden" aria-live="polite"><\/div>');$(o).append(i);setTimeout(function(){i.text(s+e)},100)}},onSelect:function(f){var a,e,s,l;h.removeAttr("aria-label");a=f.text;e=f.value;f.checked=!f.checked;s=$('option[value="'+e+'"]',n);l=$('.autocomplete-suggestion-with-checkbox input[type="checkbox"][value="'+e+'"]',o);s.is(":selected")?(l.prop("checked",!1),s.prop("selected",!1),$selectedTagSpan=$("span.tag-text",c).filter(function(){return $(this).text()===e}),i($selectedTagSpan.closest(".btn-tag"))):(l.prop("checked",!0),s.prop("selected",!0),u.append(r(n.id,a,e)),c.append(t(n.id,f)));u.attr("tabindex")=="-1"&&u.attr("tabindex","0");$(this).val("").trigger("focus")},lookupFilter:function(n,t,i){return n.text.toLowerCase().indexOf(i)!==-1},formatResult:function(t,i,r){var c=k(t,i),u,f;i!==t.text&&h.removeAttr("aria-label");var e=n.id+"_cbx_"+r,l=n.id+"_lbl_"+r,o=$("<div />").addClass("autocomplete-suggestion-with-checkbox"),s=$('<input type="checkbox" class="with-checkbox" />').attr({value:t.value,id:e});return t.checked&&s.attr("checked","checked"),u=$("<label />").attr({"for":e,id:l}),f=$("<span />"),f.html(c),u.append(s),u.append(f),o.append(u),o[0].outerHTML},showNoSuggestionNotice:!0,noSuggestionNotice:"No options match this filter",minChars:0,triggerSelectOnValidInput:!1,appendTo:$(o),forceFixPosition:!0,noCache:!0})}}}(u),n.Dependencies.GetScript(n.Plugins.SearchFilterMultiSelect._paths.autocomplete,f.autocomplete))}))});$("#main-content").on("click",".multi-select-options .btn-tag",function(n){n.preventDefault();var t=this;$(".multi-select-options button").length>1&&($(t).next().length>0?$(t).next().trigger("focus"):$(t).prev().trigger("focus"));i(t)});$("#main-content").on("focus",".multi-select-text-input",function(){$(this).attr("aria-expanded","true")});$("#main-content").on("blur",".multi-select-text-input",function(){$(this).attr("aria-expanded","false")})}}},SearchFilterCriteriaTags:{init:function(){function i(n,t){return $('<button class="btn-tag"><span class="tag-text">'+t+'<\/span><span class="visuallyhidden"> '+r+'<\/span><i aria-hidden="true"><\/i><\/button>').attr("data-element-id",n)}function l(n){var t,i,r,u;n.preventDefault();$tag=$(this);t=$("#"+$tag.data("element-id"));t.is("input.inputBox")||t.is(".sys-gen-raddatepicker input.riTextBox")?t.val(""):t.is("select")?(i=$(".tag-text",$tag).text(),r=$('option[value="'+i+'"]',t),r.prop("selected",!1)):t.is('input[type="checkbox"]')&&t.prop("checked",!1);u=$(this).closest(".grid");$('.search-filter-body input[type="submit"]',u).trigger("click")}var t;if(this.init=function(){},t=$(".search-filter-body",".website-type-intranet #main-content"),t===undefined||t==null||t.length===0)return!1;var r=n.Snippet("Sys Js Search Click to remove","Click to remove"),u=n.Snippet("Sys Js Search Showing n0 results for","Showing {0} results for"),f=n.Snippet("Sys Js Search Showing 1 result for","Showing 1 result for"),e=n.Snippet("Sys Js Search Showing n0 results","Showing {0} results"),o=n.Snippet("Sys Js Search Showing 1 result","Showing 1 result"),s=n.Snippet("Sys Js Search No results found for","No results found for"),h=n.Snippet("Sys Js Search No results found","No results found."),c=n.Snippet("Sys Js Search Check your spelling","Check your spelling or try a broader search.");t.each(function(){var w,a,p,r;if(!$(this).hasClass("landing-page-search")){var t=$(this).closest(".grid"),v=$(".no-item-text",t),y=$(".listing-results",t),n=$('<div class="search-criteria"><\/div>'),l;v.hide();y.hide();$(".search-filter-body input.inputBox",t).each(function(){this.value&&n.append(i(this.id,this.value))});$(".search-filter-body .sys-gen-raddatepicker input.riTextBox",t).each(function(){if($(this).val()!==""){var t=$(this).closest(".sys-gen-raddatepicker").prevAll("label")[0].innerText;n.append(i(this.id,t+": "+$(this).val()))}});$(".search-filter-body select",t).each(function(){var r=$(this).children().filter(":selected"),t,u;if(r.length>0)for(t=0;t<r.length;t++)$(r[t]).text()!==""&&(u=i(this.id,$(r[t]).text()),n.append(u))});$('.search-filter-body input[type="checkbox"]:checked',t).each(function(){var t=i(this.id,$(this).next("label").text());n.append(t)});w=$(n).children("button");a=w.length>0;v.length>0?(l=a?$('<span class="no-item-text">'+s+" <\/span>"):$('<span class="no-item-text">'+h+"<\/span>"),n.prepend(l).append($('<p class="no-item-text">'+c+"<\/p>")).addClass("no-results"),n.insertBefore(v)):(p=y.text().trim().split(" ")[0],r="",p==="1"?r=a?f:o:(r=a?u:e,r=r.replace(/\{0\}/i,p)),l=$(r),n.prepend(l),n.insertBefore(y))}});$("#main-content").on("click",".search-criteria .btn-tag",l)}},PageFeedbackForm:{init:function(){this.init=function(){};var n=0;$(".sc-feedback-form").each(function(){var t,r,i;n++;t=$(this);t.append("<div class='sc-feedback-body rs_skip'><\/div>");r=$(".sc-feedback-body",t);i=$(".sc-radio-button:first",t).addClass("sc-radio-question");t.attr("id","feedbackForm_"+n);r.attr("id",t.attr("id")+"_body");t.children("div").each(function(){if($(this).hasClass("sc-form-errors"))return $(".sc-form-errors > ul > li > a").each(function(){var t=OpenCities.Tools.UniqueId($(this),"err"),i=$(this).attr("href"),n=$(i);n.length&&($(n).attr("aria-invalid","true"),$(n).attr("aria-describedby",t))}),!0;if($(this).hasClass("sc-radio-question")){$radioControlsDiv=$(".sc-form-control",$(this)).hide().addClass("rs_skip");var n=$(".sc-label > span",$(this)).clone().children().remove().end().text();return $("fieldset",$(this)).append("<div class='sc-form-control sc-feedback-buttons notranslate'><\/div>"),$buttonControlsDiv=$(".sc-feedback-buttons",$(this)),$("table tr td",$radioControlsDiv).each(function(){var t="";$('input[type="radio"]:checked',$(this)).length!==0&&(t="selected-button");$buttonControlsDiv.append('<div class="translate left"><input type="button" aria-pressed="false" class="styled-button sc-feedback-button '+t+'" value="'+$("label",$(this)).text()+'" data-$(this)="'+$("input",$(this)).attr("id")+'" title="'+n+'"/><\/div>')}),!0}$(this).appendTo(r)});$("table",i).attr("tabindex","-1");$('input[type="radio"]',i).addClass("visuallyhidden").attr("aria-expanded","false").attr("aria-controls",r.attr("id"));$("label",i).addClass("styled-button");$('input[type="radio"]:checked',i).length!==0&&(r.show(),r.removeClass("rs_skip"),$('input[type="radio"]',i).attr("aria-expanded","true"),i.addClass("sc-expanded"));$('input[type="button"]',i).on("click",function(){if($(".sc-element-container",r).length===0)return $("#"+$(this).data("$(this)")).trigger("click"),$('input[type="submit"]',r).trigger("click"),!0;r.show("slide");r.removeClass("rs_skip");$('input[type="radio"]',i).attr("aria-expanded","true");i.addClass("sc-expanded");$('input[type="button"]',i).removeClass("selected-button").attr("aria-pressed","false");$(this).addClass("selected-button").attr("aria-pressed","true");$("#"+$(this).data("$(this)")).trigger("click")});t.find('input[type="reset"]').on("click",function(){return $("input:text, input:password, input:file, select, textarea",t).val(""),$("input:radio, input:checkbox",t).removeAttr("checked").removeAttr("selected"),r.hide("slide"),r.addClass("rs_skip"),t.removeClass("sc-has-errors"),$(".sc-form-errors ul",t).empty(),$('input[type="radio"]',i).attr("aria-expanded","false"),$('input[type="button"]',i).first().trigger("focus"),i.removeClass("sc-expanded"),$('input[type="button"]',i).removeClass("selected-button"),!0});var u=OpenCities.Snippet("Sys Js Feedback form yes button title text","Yes, this page was helpful"),f=OpenCities.Snippet("Sys Js Feedback form yes button text","Yes"),e=OpenCities.Snippet("Sys Js Feedback form maybe button title text","I found some information, but not everything I was looking for"),o=OpenCities.Snippet("Sys Js Feedback form maybe button text","Maybe"),s=OpenCities.Snippet("Sys Js Feedback form no button title text","No, this page was not helpful"),h=OpenCities.Snippet("Sys Js Feedback form no button text","No");$(".sc-feedback-button[value='Yes']",t).attr("title",u);$(".sc-feedback-button[value='Yes']",t).attr("value",f);$(".sc-feedback-button[value='Maybe']",t).attr("title",e);$(".sc-feedback-button[value='Maybe']",t).attr("value",o);$(".sc-feedback-button[value='No']",t).attr("title",s);$(".sc-feedback-button[value='No']",t).attr("value",h);$(".sc-element-container legend .se-form-required-asterisk",t).first().addClass("rs_skip");$(".sc-element-container legend .se-form-required-text",t).first().addClass("rs_skip")})}},MultiContentAccordion:{init:function(){this.init=function(){};var t="multiAccordionBody",n=1;$(".multi-accrodion").each(function(){var u,i,f,r,e;$parent=$(this);u=t+n;i=$("> .accordion-item-header > .accordion-trigger",$parent);i!==undefined&&(f=i.attr("data-accordion-body"),(f===undefined||f==="")&&i.attr("data-accordion-body","#"+u));r=$("> .multi-accordion-body",$parent);r!==undefined&&(e=r.attr("id"),(e===undefined||e==="")&&r.attr("id",u));n++})}},QRCode:{init:function(){this.init=function(){};var n=$('<div class="qr-code" id="qr-code">');$(".print-header-outer-container").append(n);$(".qr-code").qrcode({render:"image",size:250,color:"#000",ecLevel:"H",text:window.location.href});$("img",n).attr("alt","QR code to access this page")}},ContentBlocks:{init:function(){this.init=function(){};var t=1;$("div.oc-wysiwyg-container").each(function(){var i=$(this),r=i.data("type");switch(r){case 1:case"1":n.Plugins.ContentBlocks.ConfigureTabs(i,t);default:n.Plugins.ContentBlocks.ConfigureAccordion(i,t)}t++})},ConfigureTabs:function(n,t){var u=n.data("title-level"),r=$('<div data-oc-tabs-name="tabs" class="tab-group tab-group-inner-page"><\/div>'),i=$('<div id="tabs-body-'+t+'" class="tab-group-body"><\/div>');r.append(i);$("> .oc-wysiwyg-container-panel",n).each(function(){var f=$(this),n=$("> h"+u,f),t,e,r;n&&n.length!==0&&(t=$('<div class="no-js-element clearfix tabs-header"><\/div>'),n.addClass("item-text"),t.append(n),i.append(t),e=$("> .oc-wysiwyg-container-panel-content",f),r=$('<div class="tabs-panel clearfix">'),i.append(r),r.append(e))});n.append(r)},ConfigureAccordion:function(n,t){var e=n.data("title-level"),u=$('<div class="accordion-list-container"><\/div>'),i,r,f=1;$("> .oc-wysiwyg-container-panel",n).each(function(){var c=$(this),n=$("> h"+e,c),o,h,s,l;n&&n.length!==0&&(o="accord-"+t+"-"+f,f++,i=$('<div class="accordion-list-item-container multi-accrodion"><\/div>'),h=$('<div class="accordion-item-header"><\/div>'),s=$('<a data-accordion-all-device="true" data-open="false" class="accordion-trigger contains-heading " role="button" data-accordion-use-cookie="true" data-accordion-body="#'+o+'" aria-controls="'+o+'">'),s.append('<i aria-hidden="true"><\/i>'),n.addClass("item-text"),h.append(s),s.append(n),i.append(h),r=$('<div class="accordion-item-body multi-accordion-body clearfix" id="'+o+'">'),i.append(r),l=$("> .oc-wysiwyg-container-panel-content",c),r.append(l),u.append(i))});n.append(u)}},CommentForum:{init:function(){var r,i,f;if(this.init=function(){},r=$("section.comment-forum"),r.length!==0){var h=n.Snippet("Sys Js Comments Expand Thread","Expand Thread"),e=n.Snippet("Sys Js Comments Collapse Thread","Collapse Thread"),c=n.Snippet("Sys Js Comments Showing the last n0 of n1 replies","Showing the last {0} of {1} replies below. Show all {1}?"),l=n.Snippet("Sys Js Comments Showing the last n0 of n1 threads","Showing the last {0} of {1} threads below. Expand all {1} threads?"),a=n.Snippet("Sys Js Comments n0 of n1","{0} of {1}"),v=n.Snippet("Sys Js Comments View previous replies","View previous replies"),y=n.Snippet("Sys Js Comments Expand all threads","Expand all threads"),p=n.Snippet("Sys Js Comments Skip to final comment","Skip to final comment"),w=n.Snippet("Sys Js Comments Close this message","Close this message"),u=function(n,t){n.canThreadToggle&&(n.thread.hasClass("thread-open")?(n.threadToggleButton.text(h),n.thread.addClass("thread-closed").removeClass("thread-open"),t===!0?(n.commentBody.hide(),n.replyContainer.hide()):(n.commentBody.slideUp(),n.replyContainer.slideUp())):(n.threadToggleButton.text(e),n.thread.addClass("thread-open").removeClass("thread-closed"),t===!0?(n.commentBody.show(),n.replyContainer.show()):(n.commentBody.slideDown(),n.replyContainer.slideDown())))},o=function(n){for(var t=n.data("commentNode");typeof t=="object"&&t!==null&&t.protectedFromAutoClose===!1;)t.protectedFromAutoClose=!0,t=t.parentNode},b=function(n,t){var h=OpenCities.QueryString.comment_id,f,e,r;for(typeof h=="string"&&o(n.rootNode.commentResponses.find("#c_"+h)),typeof document.location.hash=="string"&&document.location.hash.length===39&&o(n.rootNode.commentResponses.find(document.location.hash)),f=0;f<n.childNodes.length;f++){var i=n.childNodes[f],p=i.childNodes.length-t,w=0;if(p>0){for(e=0;e<p;e++)r=i.childNodes[e],r.protectedFromAutoClose===!1?r.canThreadToggle?u(r,!0):r.rootNode.replyStyle==="flat"&&r.thread.hide():w++;i.commentRepliesControls.empty();var s=r.rootNode.replyStyle==="flat",k=s?c:l,d=s?v:y;if(s){var b=t+w,g=a.replace(/\{0\}/i,b).replace(/\{1\}/i,i.childNodes.length),nt=k.replace(/\{0\}/i,b).replace(/\{1\}/i,i.childNodes.length);$("<a>").attr({href:"#",role:"button","aria-label":nt}).addClass("view-replies").text(d).data("commentNode",i).appendTo(i.commentRepliesControls);i.commentRepliesControls.append(" ");$("<span>").attr({role:"presentation"}).addClass("visible-count").text(g).appendTo(i.commentRepliesControls)}}}},k=function(n){n.commentRepliesControls.empty();for(var t=0;t<n.childNodes.length;t++)n.rootNode.replyStyle==="flat"?n.childNodes[t].thread.show():n.thread.hasClass("thread-closed")&&u(n,!0)},s=function(n,t){var i=[];return n.each(function(){var n={parentNode:t,rootNode:t.rootNode},r;i.push(n);r=$(this).addClass("thread-open").data("commentNode",n);n.isRoot=!1;n.thread=r;n.protectedFromAutoClose=!1;n.article=n.thread.children("article");n.commentContainer=n.article.children(".comment-container");n.commentReportContainer=n.article.children(".comment-report-container");n.replyContainer=n.article.children(".comment-list-container");n.commentReplies=n.replyContainer.children(".comment-replies");n.commentRepliesControls=$("<div>").addClass("comment-replies-controls").insertBefore(n.commentReplies);n.header=n.commentContainer.children("header").data("commentNode",n);n.commentBody=n.commentContainer.children(".comment-body");n.headerActions=n.header.children(".actions");n.childNodes=s(n.commentReplies.children(".comment-thread"),n);n.canThreadToggle=!1;(n.rootNode.replyStyle==="nested"||n.parentNode.isRoot===!0)&&(n.threadToggleButton=$("<a>").attr({href:"#",role:"button"}).addClass("toggle-thread").text(e).data("commentNode",n),n.canThreadToggle=!0,n.headerActions.append(n.threadToggleButton));$timeago=n.header.find(".oc-timeago").add(n.commentReportContainer.find(".oc-timeago"));$timeago.each(function(){$this=$(this);var n=$this.text(),t=jQuery.timeago(n);$this.text(t).attr("title",n)})}),i},d=function(n){var t={};return t.isRoot=!0,t.rootNode=t,t.forum=n,t.replyStyle=n.data("reply-style"),t.commentPost=n.children(".comment-post"),t.commentPostMoreInfo=t.commentPost.find(".more-info"),t.responseContainer=n.children(".comment-list-container"),t.commentListActions=t.responseContainer.find(".comment-list-actions .aleft"),t.commentListActions.length===0&&(t.commentListActions=$("<div>").addClass("comment-list-actions").prependTo(t.responseContainer)),t.commentResponses=t.responseContainer.children(".comment-responses"),t.childNodes=s(t.commentResponses.children(".comment-thread"),t),t},g=r.OCDetachTemp(),t=d(r);b(t,3);t.commentResponses.on("click",".comment-container > header",function(n){var i=$(n.target),t=$(this).data("commentNode");t.canThreadToggle&&(i.is(".toggle-thread")||t.thread.hasClass("thread-closed"))&&(u(t),n.preventDefault())});t.commentResponses.on("click",".view-replies",function(n){var t=$(this).data("commentNode");n.preventDefault();k(t)});if(t.forum.find(".not-you-button-container input").each(function(){var n=$(this).hide(),t=n.val(),i=$("<a>").attr({href:"#",role:"button"}).text(t).on("click",function(t){t.preventDefault();n.trigger("click")});n.before(i)}),t.forum.find(".message-box-container .message-box").each(function(){var n=$(this),t=$("<a>").attr({href:"#",role:"button"}).addClass("item-dismiss").text(w).on("click",function(t){t.preventDefault();n.slideUp()});n.append(t)}),g.OCReattach(),t.commentPost.hasClass("sc-has-errors"))t.commentPostMoreInfo.show();else{t.commentPostMoreInfo.hide();t.commentPost.addClass("minimised");t.commentPost.children(".sc-form").find("textarea").on("focus",function(){t.commentPostMoreInfo.hasClass("open")||(t.commentPostMoreInfo.slideDown().addClass("open"),t.commentPost.removeClass("minimised"))})}t.childNodes.length>1&&t.commentResponses.outerHeight()>$(window).height()&&(i=t.childNodes[t.childNodes.length-1],$("<a>").attr({href:"#"+i.thread.attr("id")}).text(p).addClass("skip-to-last").on("click",function(){i.thread.hasClass("thread-closed")&&u(i,!0);i.thread.addClass("highlighted");$("html, body").animate({scrollTop:i.thread.offset().top-100},800)}).prependTo(t.commentListActions));$(function(){var n=0,t;document.location.hash=="#comments-top"?n=50:document.location.hash.length==39&&document.location.hash.substr(0,3)=="#c_"&&(n=25);n>0&&(t=$(document.location.hash).offset().top-n,$("html, body").animate({scrollTop:t}))});f=document.querySelector(".sc-form-errors a");f!=null&&f.focus();$("#comments-top .sc-form-errors a").each(function(){var n=$(this).attr("href"),r;if(n&&n.startsWith("#")){var t="[for="+n.substring(1)+"]",u=$(t),i=n;u.length>0&&(i=t);r="$('html, body').animate({scrollTop: $('"+i+" ').offset().top}, 500);$('"+n+"').focus();return false;";$(this).attr("onclick",r)}})}}},PhoneNumber:{init:function(){this.init=function(){};var n=/[A-Z]+/ig,t=/[^\+\d]/g,i=$("div.contact-phone, li.contact-phone .field-value,div.contact-phone-alternate, li.contact-phone-alternate .field-value");$(i).each(function(){var i=$(this),r=$(this).text();i.parents("a").length!==0||i.find("*").length!==0||n.test(r)||i.html($('<a href="tel:'+r.replace(t,"")+'">'+r+"<\/a>"))})}},ZipAll:{_options:{sc_selector:".drop-button.zip-all",pollingDelay:5e3,ajaxDelay:1e3,animationSpeed:"fast",messageLoading:"Sys Js ZipAll Packaging your file",messageSuccess:"Sys Js ZipAll File is ready to download",messageError:"Sys Js ZipAll There was a problem packaging file",headerSelector:".drop-button-header",bodySelector:".drop-button-body",bodyTemplate:'<div class="drop-button-body"><div class="message"><\/div><div class="loader"><\/div><div class="download"><\/div><\/div>',fileSizeAndTypeTemplate:' <span class="file-info">(ZIP, {fileSize})<\/span>',fileLinkTemplate:'<ul class="related-information-list"><li><a href="{href}" title="{fileName}" target="_self" class="document ext-zip"><i aria-hidden="true"><\/i>{fileName}{fileSizeAndType}<\/a><\/li><\/ul>'},init:function(){var t,f,i;this.init=function(){};var r=this,u=n.Tools.ArgsAsOptions(arguments,[{string:"sc_selector"}]);if(u===!1)return console.warn("OpenCities.Plugins.ZipAll.init: failed"),!1;t=$.extend({},this._options,u||{});f=$(t.sc_selector);t.messageLoading="<p>"+n.Snippet(t.messageLoading,"Packaging your file...")+"<\/p>";t.messageSuccess="<p>"+n.Snippet(t.messageSuccess,"File is ready to download")+"<\/p>";t.messageError="<p>"+n.Snippet(t.messageError,"There was a problem packaging your file. Please try again later.")+"<\/p>";i={_canRunDeferred:!1,_deferred:[],_defer:function(n){typeof n=="function"&&(this._canRunDeferred?n():this._deferred.push(n))},_runDeferred:function(){if(this._canRunDeferred)while(this._deferred.length>0){var n=this._deferred.pop();typeof n=="function"&&n()}},_fileGetInfo:function(n){i._canRunDeferred=!1;setTimeout(function(){i._canRunDeferred=!0;i._runDeferred()},t.ajaxDelay);$.ajax({url:n.jsonEndpoint,success:function(r){switch(r.FileStatus){case"Available":i._defer(function(){i._fileSuccess(n,r)});break;case"Building":setTimeout(function(){i._fileGetInfo(n)},t.pollingDelay);break;default:i._defer(function(){i._fileError(n,r)})}},error:function(){i._fileError(n)},dataType:"json",type:"GET"})},_fileError:function(n){n.dropButton.removeClass("loading").addClass("error");n.message.html(t.messageError)},_fileSuccess:function(i,r){i.dropButton.removeClass("loading").addClass("loaded");i.message.html(t.messageSuccess);var u=n.Tools.BytesToSize(r.FileSize),f=n.Tools.FormatTemplate(t.fileSizeAndTypeTemplate,{fileSize:u}),e=n.Tools.FormatTemplate(t.fileLinkTemplate,{href:i.href,fileName:r.FileName,fileSizeAndType:f});i.download.html(e)}};r.initItem=function(r){if(r.length!==0&&!r.hasClass("initialised")){r.append(t.bodyTemplate);var f=n.Tools.GenerateUniqueId(),u={};if(u.showBelow=$('<span class="visuallyhidden">(show below)<\/span>'),u.dropButton=r,u.head=$(t.headerSelector,u.dropButton),u.body=$(t.bodySelector,u.dropButton),u.message=$(".message",u.body),u.loader=$(".loader",u.body),u.download=$(".download",u.body),u.link=$("> a",u.head),u.href=u.link.attr("href"),u.jsonEndpoint=u.href.replace(/(\/ocapi\/.+?\/files\/zipall\/.{36}\/)file/g,"$1status"),u.body.hide().attr({id:f,"aria-live":"polite"}),u.jsonEndpoint!==u.href)u.link.append(u.showBelow).attr({"aria-expanded":"false","aria-controls":f,role:"button"}).on("click",function(n){u.dropButton.hasClass("loading")||u.dropButton.hasClass("loaded")||(u.dropButton.removeClass("error"),u.dropButton.addClass("loading open"),u.showBelow.html("(see below)"),u.link.attr({"aria-expanded":"true"}),t.animationSpeed!==0?u.body.slideDown(t.animationSpeed):u.body.show(),u.message.html(t.messageLoading),i._fileGetInfo(u));n.preventDefault()})}};f.each(function(){r.initItem($(this))})}},SharePage:{init:function(){this.init=function(){};$(".share-page-links .share-page-link").on("click",function(t){var i,r,u,f;if($link=$(this),i=$link.data("channel"),r=$link.data("channel-id"),i!=="print"&&(u=location.protocol+"//"+location.host+location.pathname,n.Analytics.Record.SocialShare(i,"share",u)),f=$link.closest(".share-page-container").data("item-id"),$.ajax({url:"/ocanalytics/sharepage/track",type:"POST",data:{channelId:r,pageId:f,key:n.Settings.Application.AnalyticsSettings.Key},success:function(){},error:function(){}}),i==="print"){window.print();t.preventDefault();return}})}},ImageFade:{init:function(){var f,i;if(this.init=function(){},OpenCities.BackgroundSettings.Application.EnableFade){var s=/url\s*\(\s*(['"])(.*)\1\s*\)/,e=100,t=OpenCities.BackgroundSettings.Application.CSSSelector,h=$(t).css("background-image").match(s);if(h===null)return;f=h[2];i=$('<div class="image-fade">');i.append('<img src="'+f+'" alt="Image fade background image"/>');var c="linear-gradient(to top, "+$(t).css("background-color")+" 0, transparent "+e+"px)",r=$("body").outerHeight(),u=$(t).outerHeight()+e,o=(r<=u?r:u)+"px";i.css({"background-image":c,"max-height":o});$(t).prepend(i);n.Tools.HasElementHeightChanged(document.body,function(){r=$("body").outerHeight();u=$(t).outerHeight()+e;o=(r<=u?r:u)+"px";i.css("max-height",o);f=$(t).css("background-image").match(s)[2];$("img",i).attr("src",f)})}}},SiteSearchTracking:{init:function(){if(this.init=function(){},n.Settings.Application.SearchSettings.ResultsPage.toLowerCase().endsWith(window.location.pathname.toLowerCase()))$('.search-filter .search-filter-body input[type="submit"]').on("click",function(){var t=$('.search-filter .search-filter-body .sc-search-box input[type="text"]').val();n.Analytics.Record.SiteSearch(t)})}},EmergencyAnnouncements:{ealId:"PublicEmergencyAnnouncementList",animationSpeed:"fast",serviceUrl:"/ocapi/"+OpenCities.Settings.Application.GroupName+"/announcements/",dismissUrl:"dismiss",getTextUrl:"gettext",dismissAndGetTextUrl:"dismissandgettext",init:function(){this.init=function(){};var t=$("#"+n.Plugins.EmergencyAnnouncements.ealId);if(t.length!==0){n.Plugins.EmergencyAnnouncements.InitClose($(".emergency-announcement-item-dismiss"));n.Plugins.EmergencyAnnouncements.InitClose($(".announcement-dismiss-button"));$("#skip-to-content-container").on("click",".skip-to-emergency-announcements",function(){$(".oc-emergency-undismissed > .emergency-message-box",t).length===0&&$(".oc-emergency-dismissed .accordion-trigger.accordion-closed",t).trigger("click")})}},InitClose:function(t){t.on("click",function(t){var u=$(this),r=u.closest(".message-box"),i,f;r.hasClass("oc-announcement-sticky")&&r.is(":first-child")?r.fadeOut(n.Plugins.EmergencyAnnouncements.animationSpeed):r.slideUp(n.Plugins.EmergencyAnnouncements.animationSpeed);i={};i.announcementId=u.data("cvid");i.lang=OpenCities.Settings.Application.LanguageSettings.PageLanguage;i.currentUrl=document.location.href;f=$("#"+n.Plugins.EmergencyAnnouncements.ealId).parent();i.className=f.attr("class").replace("emergency-container","").trim();$.ajax({url:n.Plugins.EmergencyAnnouncements.serviceUrl+n.Plugins.EmergencyAnnouncements.dismissAndGetTextUrl,data:i,success:n.Plugins.EmergencyAnnouncements.UpdateControlTextSuccess,dataType:"json",type:"POST"});t.preventDefault()})},UpdateControlTextSuccess:function(t){var r=t.controlText,i,u;$ealContainer=$("#"+n.Plugins.EmergencyAnnouncements.ealId).parent();/^\s*$/.test(r)?($ealContainer.slideUp({duration:n.Plugins.EmergencyAnnouncements.animationSpeed,always:function(){$ealContainer.remove()}}),$("#skip-to-PublicEmergencyAnnouncementList-link").remove()):(i={},i.content=$(r),i.existingAccorion=$(".oc-emergency-dismissed > .oc-accordion",$ealContainer),i.newAccordion=$(".oc-emergency-dismissed > .oc-accordion",i.content),i.existingAccorion.length>0?(u=i.newAccordion.length>0?$(".oc-accordion-body",i.existingAccorion):i.existingAccorion,u.slideUp({duration:n.Plugins.EmergencyAnnouncements.animationSpeed,always:function(){n.Plugins.EmergencyAnnouncements.InjectContent(i)}})):n.Plugins.EmergencyAnnouncements.InjectContent(i))},InjectContent:function(t){t.newAccordion.length&&($(".oc-accordion-body",t.newAccordion).hide(),!t.existingAccorion.length>0&&t.newAccordion.hide());$ealContainer=$("#"+n.Plugins.EmergencyAnnouncements.ealId);var i=function(t){return function(){$ealContainer.replaceWith(t.content);$ealContainer=$("#"+n.Plugins.EmergencyAnnouncements.ealId);t.newAccordion.length===1&&(t.newAccordion.slideDown(n.Plugins.EmergencyAnnouncements.animationSpeed),OpenCities.Plugins.Accordion.init("#"+n.Plugins.EmergencyAnnouncements.ealId+" .accordion-trigger"));n.Plugins.EmergencyAnnouncements.InitClose($(".emergency-announcement-item-dismiss",$ealContainer));n.Plugins.EmergencyAnnouncements.InitClose($(".announcement-dismiss-button",$ealContainer))}}(t);$(":animated",$ealContainer).promise().done(i)}},MyArea:{init:function(){this.init=function(){};n.MapsFeature.OnAddressChange(n.Plugins.MyArea.OnAddressChange);var t=$(".spatial-widget-standalone");t.length>0&&(n.MapsFeature.geocoder=new google.maps.Geocoder,this.InitStandalone(t))},StandaloneResult:null,InitStandalone:function(t){n.MapsFeature.InitialiseFilterBase({uniqueSeed:"spatial-widget-standalone",hasAddressFilter:!0,addressSource:"CMS",onAutoCompleteSelect:function(t){n.Plugins.MyArea.StandaloneResult=t.data},onFindMyLocationClick:function(){n.Plugins.MyArea.FindMyLocation(t)},onSubmit:function(t){var u=$(this).closest(".spatial-widget-standalone"),r=$(".search-filter input[type=text]",u),i=r.val();i===undefined||i===null||i===""?n.Plugins.MyArea.StandaloneResult=null:n.Plugins.MyArea.StandaloneResult===null||i!==n.Plugins.MyArea.StandaloneResult.AddressSingleLine?$.ajax({url:"/api/v1/myarea/searchfuzzy",type:"GET",dataType:"json",data:{keywords:i,maxresults:1},success:function(t){t.Items.length>0?(n.Plugins.MyArea.StandaloneResult=t.Items[0],r.val(t.Items[0].AddressSingleLine)):n.Plugins.MyArea.StandaloneResult=null;n.Plugins.MyArea.OnAddressChange(n.Plugins.MyArea.StandaloneResult)}}):n.Plugins.MyArea.OnAddressChange(n.Plugins.MyArea.StandaloneResult);t.preventDefault()}}).appendTo(t)},FindMyLocation:function(t){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(i){n.MapsFeature.PopulateAddress(i,t)},function(i){n.MapsFeature.ShowErrorFindMyLocation(i,t)}):console.log("Geolocation is not supported by this browser.")},PopulateAddress:function(t,i){var r=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);n.MapsFeature.geocoder.geocode({latLng:r},function(t,r){if(r==google.maps.GeocoderStatus.OK){var u=n.GoogleMapFeatures.GetAddressFromGeocoderResult(t[0]);$(".inputBox.text-address-js",i).val(u)}})},OnAddressChange:function(t){$councillorDiv=$(".councillors-widget");$councillorDiv!==undefined&&$councillorDiv.length>0&&(t!==null&&t!==undefined&&t.MunicipalSubdivision!==""?n.Plugins.MyArea.SetElectedOfficial(t.MunicipalSubdivision,$councillorDiv):n.Plugins.MyArea.SetElectedOfficial("__noResults",$councillorDiv));$wasteServicesDiv=$(".waste-services-widget");$wasteServicesDiv!==undefined&&$wasteServicesDiv.length>0&&(t!==null&&t!==undefined&&t.Id!==""?n.Plugins.MyArea.SetWasteServices(t.Id,$wasteServicesDiv):n.Plugins.MyArea.SetWasteServices("__noResults",$wasteServicesDiv))},SetElectedOfficial:function(t,i){var r="/ocapi/"+OpenCities.Settings.Application.GroupName+"/myarea/electedofficials?ward="+encodeURIComponent(t)+"&ocsvclang="+OpenCities.Settings.Application.LanguageSettings.UserLanguage+"&pageLink="+n.Settings.Application.Link;i.addClass("loading");$.ajax({url:r,type:"GET",dataType:"json",context:document.body,success:function(n){var t=$(n.responseContent);OpenCities.Hookups.Run(t);i.replaceWith(t);$(".councillors-widget .councillors-results article").matchHeight({property:"min-height"})}})},SetWasteServices:function(t,i){var r="/ocapi/"+n.Settings.Application.GroupName+"/myarea/wasteservices?geolocationid="+t+"&ocsvclang="+n.Settings.Application.LanguageSettings.UserLanguage+"&pageLink="+n.Settings.Application.Link;i.addClass("loading");$.ajax({url:r,type:"GET",dataType:"json",context:document.body,success:function(n){i.replaceWith(n.responseContent);$(".waste-services-widget .waste-services-results article").matchHeight({property:"min-height"})}})}},Meetings:{init:function(){this.init=function(){};n.Plugins.Meetings.FilterMeetingYearField()},FilterMeetingYearField:function(){$(".list-meetings-past .search-filter .clf-year select").each(function(){var n=$(this),i=(new Date).getFullYear(),r=n.children().filter(function(){return $(this).val()!==""&&parseInt($(this).val())>i}),t;r.each(function(){$("option[value='"+$(this).val()+"']",n).each(function(){$(this).remove()})});t=n.children().filter(function(){return $(this).val()!==""});t.length<2&&(n.parent().prev("label").addClass("hidden"),n.addClass("hidden"))});$(".list-meetings-upcoming .search-filter .clf-year select").each(function(){var n=$(this),i=(new Date).getFullYear(),r=n.children().filter(function(){return $(this).val()!==""&&parseInt($(this).val())<i}),t;r.each(function(){$("option[value='"+$(this).val()+"']",n).each(function(){$(this).remove()})});t=n.children().filter(function(){return $(this).val()!==""});t.length<2&&(n.parent().prev("label").addClass("hidden"),n.addClass("hidden"))})}},Calendar:{_paths:{jboxCss:OpenCities.Paths.SiteTemplate+"jbox-popup.css"},calendars:{},initialInfoJBox:null,childInfoJBox:null,viewMoreInfoJBox:null,weekStarts:0,today:null,todayDate:null,todayYear:null,todayMonth:null,init:function(){var t,i;if(this.init=function(){},t=$(".oc-calendar"),t.length!==0){n.Dependencies.GetStylesheet(n.Plugins.Calendar._paths.jboxCss);n.Plugins.Calendar.today=new Date(OpenCities.Settings.Application.RegionSettings.Year,OpenCities.Settings.Application.RegionSettings.Month-1,OpenCities.Settings.Application.RegionSettings.Day,0,0,0,0);n.Plugins.Calendar.todayDate=n.Plugins.Calendar.today.getDate();n.Plugins.Calendar.todayYear=n.Plugins.Calendar.today.getFullYear();n.Plugins.Calendar.todayMonth=n.Tools.GetMonth(n.Plugins.Calendar.today.getMonth(),n.Plugins.Calendar.todayYear);n.Plugins.Calendar.weekStarts===1?n.Tools.DaysOfTheWeek.startWeekMonday():n.Plugins.Calendar.weekStarts===2&&n.Tools.DaysOfTheWeek.startWeekSaturday();$(document).on("keyup",function(t){t.which===27&&(n.Plugins.Calendar.childInfoJBox?n.Plugins.Calendar.closeChildInfoBox(!0):(n.Plugins.Calendar.closeViewMoreBox(!0),n.Plugins.Calendar.closeInitialInfoBox(!0)))});$(document).on("keydown",function(n){if(n.which===9){var i=$(document.activeElement),t=$(".jBox-wrapper");t&&t.length>0&&(n.shiftKey&&i.hasClass("calendar-dialog-close")?($(".last-tab-element",t).trigger("focus"),n.preventDefault()):!n.shiftKey&&i.hasClass("last-tab-element")&&($(".calendar-dialog-close",t).trigger("focus"),n.preventDefault()))}});$(document).on("click",function(t){$(".jBox-wrapper").has(t.target).length===0&&(n.Plugins.Calendar.initialInfoJBox&&n.Plugins.Calendar.closeInitialInfoBox(),n.Plugins.Calendar.viewMoreInfoJBox&&n.Plugins.Calendar.closeViewMoreBox())});t.each(function(){var r=[],t=this,i=$(t).attr("id"),u=$(t).data("entity-type"),f;n.Plugins.Calendar.calendars[i]={type:u,cachedDates:{}};f="/ocapi/calendars/getcalendars/"+$(t).data("entity-id")+"/"+u;$.getJSON(f,function(f){var e,s,a,h,o,l;if(f.success){if(r=f.data,e={},r.forEach(function(n){e[n.Id]={label:n.Label,color:n.Color,iconUrl:n.IconUrl,iconType:n.IconType,include:!0}}),s=$('<div class="search-filter-body calendar-filter" data-container-id='+i+">"),a=$('<fieldset class="calendar-filter-fieldset">'),a.append("<legend><label>"+n.Snippet("Sys Js Filter Calendar View","Filter calendar")+"<\/label><\/legend>"),h=$('<ul class="chk-category calendar-filter-options clearfix">'),r.forEach(function(t,i){var o="calFilId-"+t.Id,s="calFilVal-"+t.Id,c="calFilOption-"+i,f=$('<li class="clearfix calendar-filter-list-item" data-filter-option-id='+t.Id+">"),l=$('<input class="calendar-filter-option-check" id="'+o+'" type="checkbox" name="'+c+'" data-value="'+s+'">').prop("checked",!0),u,r;f.append(l);u=$('<label for="'+o+'" class="calendar-filter-list-item-label">');t.Color===""&&t.IconType===""||(r=$('<span class="calendar-item-icon">'),t.Color!==""?(r.css("background-color",t.Color),t.IconType==="Image"?r.append('<img src="'+t.IconUrl+'?w=18&h=18" alt="'+t.Label+'" class="chk-layer-category-label-icon calendar-filter-list-item-image-small">'):t.IconType==="Initial"&&r.append('<img src="'+t.IconUrl+"?color="+n.Tools.ColorContrast.getContrastColor(t.Color).slice(1)+'&w=24&h=24" alt="'+t.Label+'" class="chk-layer-category-label-icon calendar-filter-list-item-image">')):t.IconType==="Image"?r.append('<img src="'+t.IconUrl+'?w=24&h=24" alt="'+t.Label+'" class="chk-layer-category-label-icon calendar-filter-list-item-image">'):t.IconType==="Initial"&&r.append('<img src="'+t.IconUrl+"?color="+n.Tools.ColorContrast.getContrastColor("#FFFFFF").slice(1)+'&w=24&h=24" alt="'+t.Label+'" class="chk-layer-category-label-icon calendar-filter-list-item-image">'),e[t.Id].Markup=r.prop("outerHTML"),r.find("img").attr("alt",""),u.append(r));u.append('<span class="chk-layer-category-label-text calendar-filter-option-text calendar-filter-list-item-text">'+t.Label+"<\/span>");f.append(u);h.append(f)}),s.append(h,'<input type="button" class="calendar-filter-btn styled-button" value="'+OpenCities.Snippet("Sys Js Apply filter","Apply filter")+'" data-container-id='+i+">"),u==="combinedCalendar"){$(t).append(s);$(".calendar-filter-btn",t).on("click",function(t){var f,i;t.preventDefault();f=$(this);i=f.closest(".oc-calendar");$(".calendar-body-content",i).css("opacity",0);var r=i.attr("id"),e=i.find(".calendar-filter-option-check"),u=n.Plugins.Calendar.calendars[r].filter;e.each(function(){var n=$(this),t=n.attr("id").split("calFilId-")[1];u[t].include=n.prop("checked")?!0:!1});n.Plugins.Calendar.calendars[r].filter=u;n.Plugins.Calendar.calendars[r].cachedDates={};n.Plugins.Calendar.buildCalendar(i[0],n.Plugins.Calendar.calendars[r])})}n.Plugins.Calendar.calendars[i].filter=e;o=$('<div class="calendar-nav clearfix">');o.append('<button class="calendar-btn calendar-nav-today"><i class="calendar-icon-today" aria-hidden="true"><\/i>'+OpenCities.Snippet("Sys Js Today","Today")+' <span class="visuallyhidden notranslate">, which includes the month.<\/span><\/button>');$calendarNavDirection=$('<div class="calendar-nav-direction clearfix">');$calendarNavDirection.append('<button class="calendar-btn calendar-nav-direction-btn calendar-nav-prev" aria-label="Select the previous month"><i class="calendar-nav-direction-icon" aria-hidden="true"><\/i><\/button>');$calendarNavDirection.append('<button class="calendar-btn calendar-nav-direction-btn calendar-nav-next" aria-label="Select the next month"><i class="calendar-nav-direction-icon" aria-hidden="true"><\/i><\/button>');$calendarNavDirection.append('<div role="heading" aria-level="'+n.Tools.NextHeadingRank($(t))+'" class="calendar-nav-timeframe"  aria-live="polite"><span class="calendar-nav-timeframe-month">'+n.Plugins.Calendar.todayMonth.name+'<\/span> <span class="calendar-nav-timeframe-year">'+n.Plugins.Calendar.todayYear+"<\/span><\/div>");o.append($calendarNavDirection);$(t).append(o);$(".calendar-nav-timeframe",t).data({month:n.Plugins.Calendar.today.getMonth()+1,year:n.Plugins.Calendar.todayYear});$(".calendar-nav-today",t).on("click",function(t){t.preventDefault();var i=$(this).closest(".oc-calendar"),r=$(".calendar-nav-timeframe",i);r.data({year:n.Plugins.Calendar.today.getFullYear(),month:n.Plugins.Calendar.today.getMonth()+1});n.Plugins.Calendar.buildCalendar(i[0],n.Plugins.Calendar.calendars[i.attr("id")])});$(".calendar-nav-direction-btn",t).on("click",function(t){t.preventDefault();var e=$(this),u=e.closest(".oc-calendar"),r=$(".calendar-nav-timeframe",u),i,f=r.data("year");e.hasClass("calendar-nav-next")?(i=r.data("month")+1,i>12&&(i=1,f++)):(i=r.data("month")-1,i<1&&(i=12,f--));r.data({year:f,month:i});n.Plugins.Calendar.buildCalendar(u[0],n.Plugins.Calendar.calendars[u.attr("id")])});var v=$('<div class="calendar-body">'),c=$('<div class="calendar-body-header clearfix" aria-hidden="true">'),y=n.Plugins.Calendar.getCalendarSizeClass($(t).outerWidth());$(t).addClass(y);n.Plugins.Calendar.setHeaderDotwNames(c,y);l=OpenCities.Tools.Debounce(function(){var r=$(t),u=n.Plugins.Calendar.getCalendarSizeClass(r.outerWidth());r.hasClass(u)||(n.Plugins.Calendar.closeViewMoreBox(),n.Plugins.Calendar.closeInitialInfoBox(),n.Plugins.Calendar.closeChildInfoBox(),r.removeClass("calendar-xsmall calendar-small calendar-medium calendar-large calendar-xlarge").addClass(u),n.Plugins.Calendar.setHeaderDotwNames(c,u),n.Plugins.Calendar.buildCalendar(t,n.Plugins.Calendar.calendars[i]))},50);$(window).on("resize",l);$(t).on("reinit",l);$(".calendar-loading-message").hide();v.append(c);$(t).append(v);n.Plugins.Calendar.buildCalendar(t,n.Plugins.Calendar.calendars[i])}else console.log("Calendar API call not a success")},"json")});i=this;$(document).on("oc-container-show",function(n,t){i.onContainerOpen(t)})}},onContainerOpen:function(n){var t=$(n).find(".oc-calendar");t.length>0&&t.trigger("reinit")},setHeaderDotwNames:function(t,i){if(t.empty(),i==="calendar-large"||i==="calendar-xlarge")for(dotw=0;dotw<7;dotw++)t.append('<div class="calendar-body-header-dotw">'+n.Tools.DaysOfTheWeek.getName(dotw)+"<\/span><\/div>");else for(dotw=0;dotw<7;dotw++)t.append('<div class="calendar-body-header-dotw">'+n.Tools.DaysOfTheWeek.getShortName(dotw)+"<\/span><\/div>")},getCalendarSizeClass:function(n){var t;switch(!0){case n<360:t="calendar-xsmall";break;case n<600:t="calendar-small";break;case n<690:t="calendar-medium";break;case n<880:t="calendar-large";break;default:t="calendar-xlarge"}return t},buildCalendar:function(t,r){var s,k,h,d,y,c,l,p,g,w,b,nt;$calBody=$(t).find(".calendar-body");var tt=$(t).attr("id"),a=$(t).find(".calendar-nav-timeframe"),v=a.data("month"),u=a.data("year"),f=n.Tools.GetMonth(v-1,u);$(".calendar-nav-timeframe-month",a).text(f.name);$(".calendar-nav-timeframe-year",a).text(u);var it=u+"-"+f.pretty+"-01",rt=new Date(u,v-1,1,0,0,0,0),e=rt.getDay(),ut=u+"-"+f.pretty+"-"+f.days,ft=new Date(u,v-1,f.days,0,0,0,0),o=ft.getDay();for(n.Plugins.Calendar.weekStarts===1?(e--,o--,e<0&&(e=6),o<0&&(o=6)):n.Plugins.Calendar.weekStarts===2&&(e++,o++,e>6&&(e=0),o>6&&(o=0)),s=$('<div role="list" class="calendar-body-content clearfix">'),timeframeDate=1,dotw=e;timeframeDate<=f.days;timeframeDate++)k=tt+"-"+timeframeDate,h=$('<section role="listitem region" class="calendar-body-content-day" aria-hidden="false" aria-labelledby="'+k+'" data-date='+timeframeDate+">"),n.Plugins.Calendar.todayDate===timeframeDate&&parseInt(n.Plugins.Calendar.todayMonth.pretty)===v&&n.Plugins.Calendar.todayYear===u&&(h.addClass("today"),h.append('<i class="calendar-icon-today" aria-hidden="true"><\/i><p class="visuallyhidden notranslate">This is today.<\/p>')),h.append('<p id="'+k+'" class="full-date"><span class="visuallyhidden notranslate">'+n.Tools.DaysOfTheWeek.getName(dotw)+", "+f.name+" <\/span>"+timeframeDate+'<span class="visuallyhidden notranslate">, '+u+"<\/span><\/p>"),s.append(h),dotw<6?dotw++:dotw=0;for(d='<div aria-hidden="true" class="calendar-body-content-day"><\/div>',y=0;y<e;y++)s.prepend(d);if(c=(y+f.days)%7,c>0)for(c=(c-7)*-1,i=0;i<c;i++)s.append(d);if($(".calendar-body-content",$calBody).remove(),$(t).append($calBody.append(s)),p=u+"-"+f.pretty,r.cachedDates.hasOwnProperty(p))l=r.cachedDates[p],n.Plugins.Calendar.buildItemList(l,t,r.type,r.filter);else{g=[];w=r.filter;for(b in w)w.hasOwnProperty(b)&&w[b].include&&g.push(b);nt={LanguageCode:n.Settings.Application.LanguageSettings.UserLanguage,Ids:g,StartDate:it,EndDate:ut};$.ajax({url:"/ocapi/calendars/getcalendaritems",type:"POST",dataType:"json",processData:!1,data:JSON.stringify(nt),contentType:"application/json; charset=utf-8",success:function(i){i.success?(l=i.data,r.cachedDates[p]=l,n.Plugins.Calendar.buildItemList(l,t,r.type,r.filter)):console.log("Dates API call not a success")}})}},buildItemList:function(t,i,r,u){if(t.length>0){$(".calendar-day-items",i).remove();$(".calendar-body-content-day-more",i).remove();$(".calendar-body-total-items",i).remove();var e=4,f=0;t.forEach(function(n,t){var t,l;f=f+1;var o=n.Items,h=$(".calendar-body-content-day[data-date="+parseInt(n.DD)+"]",i),c=$('<ul class="calendar-day-items" data-total-items="'+o.length+'">'),a=Math.min(o.length,e);for(t=0;t<a;t++){var r=o[t],v=$('<li class="calendar-item" title="'+r.Name+'">'),s=$('<a href="#" class="item-dialog-trigger" data-item-id="'+r.Id+'">');s.append(u[r.CalendarId].Markup);s.append('<span class="calendar-item-title" area-hidden="true">'+r.Name+"<\/span>");c.append(v.append(s))}l=$('<a href="#" class="calendar-body-total-items list-dialog-trigger" aria-describedby="total-link-desc-'+f+'">');h.append(c,l);h.attr("aria-hidden","false")});f=0;$(".calendar-day-items",i).each(function(){var o;f=f+1;var i=$(this),t=i.data("total-items"),s=i.siblings(".calendar-body-total-items"),r=t,u=$('<p class="visuallyhidden notranslate total-link-desc" id="total-link-desc-'+f+'"> items. Show the full list of calendar items in a popup.<\/p>');u.insertAfter(i);t>99&&(r="",u.text("There are "+t+" calendar items. Show the full list in a popup."));s.text(r);t>e&&(o=$('<a href="#" class="calendar-body-content-day-more list-dialog-trigger" aria-describedby="more-link-desc">&#43; '+(t-e)+" "+n.Snippet("Sys Js More","More").toLowerCase()+"<\/a>"),i.after(o,'<p class="visuallyhidden notranslate" id="more-link-desc">Show the full list of items in a popup.<\/p>'))});$calBody=$(i).find(".calendar-body");$(".calendar-body-content-day",$calBody).matchHeight({byRow:!1,property:"min-height"});$(".calendar-body-content-day > .calendar-day-items a",i).on("click",function(i){i.preventDefault();i.stopPropagation();n.Plugins.Calendar.closeInitialInfoBox();n.Plugins.Calendar.closeViewMoreBox();n.Plugins.Calendar.initialInfoJBox=n.Plugins.Calendar.getInfoJBox();var r=this,u=$(r).closest(".calendar-body-content-day").data("date"),f=$.grep(t,function(n){return n.DD===u});n.Plugins.Calendar.initialInfoJBox.open({target:$(r)});n.Plugins.Calendar.buildDialogContent(n.Plugins.Calendar.initialInfoJBox,r,f[0])});$(".list-dialog-trigger",i).on("click",function(i){i.preventDefault();i.stopPropagation();n.Plugins.Calendar.closeInitialInfoBox();n.Plugins.Calendar.closeViewMoreBox();n.Plugins.Calendar.viewMoreInfoJBox=n.Plugins.Calendar.getViewMoreJBox();var f=this,e=$(f).closest(".calendar-body-content-day"),o=e.data("date"),s=$.grep(t,function(n){return n.DD===o});n.Plugins.Calendar.viewMoreInfoJBox.open({target:$(f)});n.Plugins.Calendar.buildDialogContent(n.Plugins.Calendar.viewMoreInfoJBox,f,s[0],r,u)})}},buildDialogContent:function(t,i,r,u,f){var o=$(i),s=$("<div>"),e,y,h,p,c,l,a;if(o.hasClass("item-dialog-trigger"))e=$.grep(r.Items,function(n){return n.Id===o.data("item-id")}),y="/ocapi/get/contentinfo?calendarId="+e[0].CalendarId+"&contentId="+e[0].Id+"&language="+n.Settings.Application.LanguageSettings.UserLanguage+"&currentDateTime="+e[0].DateTime+"&mainContentId="+e[0].MainContentId,$.getJSON(y,function(i){var r,f,e,u;i.success?(r=i.data,f=$('<div class="calendar-item-dialog" tabindex="-1" role="dialog" aria-labelledby="item-dialog-title" aria-describedby="item-dialog-desc">'),f.append('<p class="visuallyhidden notranslate" id="item-dialog-desc">Close the popup with either the Escape key or the Close popup button.<\/p>'),f.append('<button class="calendar-btn calendar-dialog-close" aria-label="Close popup"><i class="calendar-dialog-close-icon" aria-hidden="true"><\/i><\/button>'),r.Image!==null&&f.append('<div class="calendar-item-dialog-image"><img src="'+r.Image+'?w=300&h=150" alt="'+r.AltText+'"><\/div>'),e="",r.IsCancelled&&(e='<span class="canceled-tag"><span class="canceled-tag-text">'+OpenCities.Snippet("Sys Js Canceled","Canceled")+"<\/span><\/span>"),f.append('<h1 id="item-dialog-title" class="calendar-item-dialog-title">'+e+r.Title+"<\/h1>"),u=$('<div class="calendar-item-dialog-details">'),(r.AdditionalInfo!==undefined||r.AdditionalInfo!==null)&&r.AdditionalInfo.length>0&&u.append('<div class="calendar-item-dialog-row"><div class="calendar-item-dialog-when"><span class="calendar-item-dialog-label">'+OpenCities.Snippet("Sys Js When","When")+":<\/span> "+r.AdditionalInfo[0].Value+"<\/div><\/div>"),r.Address.Formatted.length>0&&u.append('<div class="calendar-item-dialog-row"><div class="calendar-item-dialog-where"><span class="calendar-item-dialog-label">'+OpenCities.Snippet("Sys Js Location","Location")+":<\/span> "+r.Address.Formatted+"<\/div><\/div>"),r.Description.length>0&&u.append('<div class="calendar-item-dialog-row"><div class="calendar-item-dialog-description">'+r.Description+"<\/div><\/div>"),u.append('<div class="calendar-item-dialog-row"><a href="'+r.Link+'" class="calendar-item-dialog-link last-tab-element" target="_blank">'+OpenCities.Snippet("Sys Js Tell me more about","Tell me more about")+' <span class="calendar-item-popup-link-title">'+r.Title+"<\/span><\/a><\/div>"),u.append('<div class="calendar-dialog-bottom-gradient"><\/div>'),s.append(f.append(u)),t.setContent(s.html()),o.hasClass("child")?n.Plugins.Calendar.attachInfoChildCloseEvent():n.Plugins.Calendar.attachInfoCloseEvent(),$("#"+t.id+" .calendar-item-dialog").trigger("focus")):console.log("Date item API call not a success")},"json");else if(o.hasClass("list-dialog-trigger")){for(h=$('<div class="calendar-day-dialog" tabindex="-1" role="dialog" aria-labelledby="list-dialog-header" aria-describedby="list-dialog-desc">').data("date",p),h.append('<p class="visuallyhidden notranslate" id="list-dialog-desc">Close the popup with either the Escape key or the Close popup button.<\/p>'),p=parseInt(r.Date.substr(0,2)),c=$('<div id="list-dialog-header" class="calendar-day-dialog-header">'),c.append('<div class="calendar-day-dialog-day">'+r.Day+'<\/div><div class="calendar-day-dialog-date">'+r.Date.substr(0,2)+' <span class="visuallyhidden notranslate">'+r.Month+" "+r.YYYY+"<\/span><\/div>"),c.append('<button class="calendar-btn calendar-dialog-close" aria-label="Close popup"><i class="calendar-dialog-close-icon" aria-hidden="true"><\/i><\/button>'),l=$('<ul class="calendar-day-items">'),a=0;a<r.Items.length;a++){var v=r.Items[a],w=$('<li class="calendar-item" title="'+v.Name+'">'),b=$('<a href="#" class="item-dialog-trigger child" data-item-id="'+v.Id+'">');b.append(f[v.CalendarId].Markup,'<span class="calendar-item-title" area-hidden="true">'+v.Name+"<\/span>");w.append(b);l.append(w)}$("li:last-child a",l).addClass("last-tab-element");h.append(c,l,$('<div class="calendar-dialog-bottom-gradient">'));s.append(h);t.setContent(s.html());n.Plugins.Calendar.attachListCloseEvent();n.Plugins.Calendar.buildChildInfo(r);$("#"+t.id+" .calendar-day-dialog").trigger("focus")}},buildChildInfo:function(t){$(".jBox-content .calendar-day-items a").on("click",function(i){i.preventDefault();i.stopPropagation();var r=this;n.Plugins.Calendar.closeChildInfoBox();n.Plugins.Calendar.childInfoJBox=n.Plugins.Calendar.getInfoJBox();n.Plugins.Calendar.childInfoJBox.open({target:$(r)});n.Plugins.Calendar.buildDialogContent(n.Plugins.Calendar.childInfoJBox,r,t)})},attachInfoChildCloseEvent:function(){$(".calendar-dialog-close").on("click",function(t){t.stopPropagation();n.Plugins.Calendar.closeChildInfoBox(!0)})},attachInfoCloseEvent:function(){$(".calendar-dialog-close").on("click",function(){n.Plugins.Calendar.closeInitialInfoBox(!0)})},attachListCloseEvent:function(){$(".calendar-dialog-close").on("click",function(){n.Plugins.Calendar.closeViewMoreBox(!0)})},closeViewMoreBox:function(t){n.Plugins.Calendar.viewMoreInfoJBox&&(n.Plugins.Calendar.viewMoreInfoJBox.close(),t&&n.Plugins.Calendar.viewMoreInfoJBox.target[0].focus(),n.Plugins.Calendar.viewMoreInfoJBox.destroy(),n.Plugins.Calendar.viewMoreInfoJBox=null);n.Plugins.Calendar.closeChildInfoBox()},closeInitialInfoBox:function(t){n.Plugins.Calendar.initialInfoJBox&&(n.Plugins.Calendar.initialInfoJBox.close(),t&&n.Plugins.Calendar.initialInfoJBox.target[0].focus(),n.Plugins.Calendar.initialInfoJBox.destroy(),n.Plugins.Calendar.initialInfoJBox=null)},closeChildInfoBox:function(t){n.Plugins.Calendar.childInfoJBox&&(n.Plugins.Calendar.childInfoJBox.close(),t&&n.Plugins.Calendar.childInfoJBox.target[0].focus(),n.Plugins.Calendar.childInfoJBox.destroy(),n.Plugins.Calendar.childInfoJBox=null)},getInfoJBox:function(){return new jBox("Tooltip",{trigger:"click",overlay:!1,adjustTracker:!1,animation:"move",isolateScroll:!1,reposition:!0,repositionOnContent:!0,responsiveWidth:!0,responsiveHeight:!1,adjustDistance:10,responsiveMinWidth:130,preventDefault:!1,addClass:"dialog-info",content:'<p style="padding:20px;background-color:#FFFFFF;margin:0">Loading dialog content<\/p>'})},getViewMoreJBox:function(){return new jBox("Tooltip",{trigger:"click",overlay:!1,adjustTracker:!1,animation:"zoomIn",isolateScroll:!1,reposition:!0,repositionOnContent:!0,responsiveWidth:!0,responsiveHeight:!1,adjustDistance:10,responsiveMinWidth:130,minWidth:150,maxWidth:280,addClass:"dialog-view-more",content:'<p style="padding:20px;background-color:#FFFFFF;margin:0">Loading dialog content<\/p>'})}},SubscriptionsSearch:{init:function(){var i,r,t;if(this.init=function(){console.log("Already initialized")},i=$(".search-subscription"),i===undefined||i==null||i.length===0)return!1;r={token:"/ocapi/visitor/token/cookie",searchSubscribe:"/ocapi/subscription/searchsubscribe",searchResendVerification:"/ocapi/subscription/searchresendverification",searchChangeUnverifiedAddress:"/ocapi/subscription/searchchangeunverifiedaddress"};t={postWithToken:function(n){n=$.extend({},{forceNewVisitor:!1},n);var i=function(n){return function(t){n=$.extend({},{method:"POST",headers:{"X-XSRF-TOKEN":t.XsrfToken},dataType:"json"},n);$.ajax(n)}}(n),r=function(){t.withToken(i,!0,n.forceNewVisitor)};t.withToken(i,!1,n.forceNewVisitor,r)},withToken:function(n,i,u,f){i=typeof i!="boolean"?!1:i;u=typeof u!="boolean"?!1:u;var e=!i&&!u?t.getLocalToken():null;e!=null?(e.fromStorage=!0,n(e)):$.ajax({url:r.token,method:"POST",dataType:"json",data:{forceNewVisitor:u},success:function(i){var r=t.parseToken(i);t.setLocalToken(r);n(r)},error:function(n,t,i){typeof f=="function"&&f(n,t,i)}})},getLocalToken:function(){if(typeof OpenCities.Settings.ApiToken=="undefined"&&(OpenCities.Settings.ApiToken=null,Modernizr.localstorage)){var n=localStorage.getItem("OpenCities.Settings.ApiToken");n!=null&&(OpenCities.Settings.ApiToken=t.parseToken(JSON.parse(n)))}return t.validateLocalToken()||t.clearLocalToken(),OpenCities.Settings.ApiToken},setLocalToken:function(n){OpenCities.Settings.ApiToken=n;Modernizr.localstorage&&localStorage.setItem("OpenCities.Settings.ApiToken",JSON.stringify(n))},validateLocalToken:function(){return OpenCities.Settings.ApiToken===null?!1:OpenCities.Settings.Visitor!==null&&OpenCities.Settings.ApiToken.Id!==OpenCities.Settings.Visitor.Id?!1:OpenCities.Settings.ApiToken.Expires<new Date?!1:!0},clearLocalToken:function(){OpenCities.Settings.ApiToken=null;localStorage.removeItem("OpenCities.Settings.ApiToken")},parseToken:function(n){return{Id:n.Id,XsrfToken:n.XsrfToken,Expires:t.parseJsonDate(n.Expires)}},parseJsonDate:function(n){return n.substr(0,6)==="/Date("?new Date(parseInt(n.substr(6))):new Date(n)},getAssociatedLabel:function(n){var i=document.querySelector("[for='"+n+"']"),t;return!i?null:(t=i.getAttribute("id"),t==null&&(t="label-"+n,i.setAttribute("id",t)),t)},submitForm:function(i,u){var s,f,h,c;i.removeClass("sc-has-errors");var l=$(".search-subscribe-name input[type=text]",i),o=l.val(),e=!1;(o===""&&(s=l.attr("id"),t.showErrorMessage(i,"Enter a search name",!1,!0,s,t.getAssociatedLabel(s)),e=!0),$emailTextbox=$(".search-subscribe-email input[type=text]",i),$emailTextbox&&$emailTextbox.length>0&&(f=$emailTextbox.val(),f!==""&&n.Tools.ValidateEmail(f)||(h=$emailTextbox.attr("id"),t.showErrorMessage(i,"Enter a valid email address",!1,!e,h,t.getAssociatedLabel(h)),e=!0)),e)||(console.log(f),i.addClass("form-updating"),i.data("search-email",f),i.data("search-name",o),c=i.data("force-new-visitor")?!0:!1,t.postWithToken({url:c?r.searchChangeUnverifiedAddress:r.searchSubscribe,data:{Link:OpenCities.Settings.Application.Link,Address:f===undefined?null:f,Filter:JSON.stringify(OpenCities.Settings.ContentListFilters[u]),Name:o},success:function(n){t.showSuccessMesage(i,n);i.removeClass("form-updating")},error:function(n){t.showErrorMessage(i,n.responseJSON.message,!0,!0);i.removeClass("form-updating")},forceNewVisitor:c}))},submitResendVerificationForm:function(n,i){n.addClass("form-updating");var u=n.data("search-email"),f=n.data("search-name");t.postWithToken({url:r.searchResendVerification,data:{Link:OpenCities.Settings.Application.Link,Address:u===undefined?null:u,Filter:JSON.stringify(OpenCities.Settings.ContentListFilters[i]),Name:f},success:function(i){t.showSuccessMesage(n,i);n.removeClass("form-updating")},error:function(i){t.showErrorMessage(n,i.responseJSON.message,!0,!0);n.removeClass("form-updating")}})},showSuccessMesage:function(n,i){if($(".search-subscription-trigger",n.closest(".search-subscription")).remove(),n.html(""),i.message==="needs_verification"||i.message==="sent"){var r='<a href="#" class="search-subscription-resend-email">'+OpenCities.Snippet("Sys Js Try Resending","try resending it")+"<\/a>";n.append($("<h2>"+OpenCities.Snippet("Sys Js One More Step","One more step...")+"<\/h2>"));n.append($("<p>"+OpenCities.Snippet("Sys Js Confirm Your Subscription","Confirm your subscription by following the link in the email we sent to {0}").replace("{0}","<strong>"+i.address+"<\/strong>")+"<\/p>"));n.append($("<p>"+OpenCities.Snippet("Sys Js Didnt Receive Email","Didn't receive the email? Check your spam and junk folders, or {0}.").replace("{0}",r)+"<\/p>"));$(".search-subscription-resend-email",n).on("click",function(i){i.preventDefault();var r=$(this).closest(".search-subscription").data("filter-id");t.submitResendVerificationForm(n,r)})}else i.message==="subscribed"&&(n.append("<h2>You're subscribed for updates<\/h2>"),n.append("<p>We'll send you an email when there are new results matching your search.<\/p>"))},showErrorMessage:function(n,t,i,r,u,f){if(r&&$(".sc-form-errors",n).remove(),n.addClass("sc-has-errors"),$savedSearchFormError=$(".sc-form-errors",n),$savedSearchFormError.length==0&&($errorList=$("<ul>"),$savedSearchFormError=$('<div class="sc-form-errors"><\/div>').append($errorList),n.prepend($savedSearchFormError)),i)$(".sc-form-errors ul",n).append("<li>There was a problem performing this action, please try again later<\/li>"),console.log(t);else{if(!!u){f||(f=u);t=String.format("<a onclick=\"$('html, body').animate({{scrollTop: $('#{2}').offset().top}}, 500);$('#{0}').trigger('focus');return false;\" href='#{0}'>{1}<\/a>",u,t,f)}$(".sc-form-errors ul",n).append("<li>"+t+"<\/li>")}},cancelForm:function(n){n.slideUp(200);$(".search-subscribe-email input",n).val("")},openForm:function(n){n.slideDown(200)},getSuggestedSearchName:function(){var n=$("h1").first().text();return n+(" "+OpenCities.Snippet("Sys Js Updates","updates").toLowerCase())},setSearchFormEmailRow:function(n,t){var i=OpenCities.Settings.Visitor,u=i!=null&&i.HasVerifiedEmail,r;if($savedSearchFormEmailRow=$('<div class="sc-element-container sc-textbox generic-form-textbox search-subscribe-email">'),u){$savedSearchFormEmailRow.append($('<p>Updates will be sent to <span class="user-email">'+i.Email+"<\/span><\/p>"));i.HasCmsUser||$savedSearchFormEmailRow.append($('<p>Not you? <a class="action-subscribe-new-visitor" href="#">Use your own details<\/a>'));$(".action-subscribe-new-visitor",$savedSearchFormEmailRow).on("click",function(t){t.preventDefault();n.data("force-new-visitor",!0);$savedSearchFormEmailRow.html("");$savedSearchFormEmailRow.append($('<div class="sc-label">').append('<label for="'+r+'">'+OpenCities.Snippet("Sys Js Email Address","Email address")+"<\/label>"));$savedSearchFormEmailRow.append($('<div class="sc-form-control">').append('<input type="text" id="'+r+'" class="generic-form-textbox" autocomplete="email">'));i!=null&&i.Email!=null&&$("input",$savedSearchFormEmailRow).val(i.Email)})}else r="email-"+t,$savedSearchFormEmailRow.append($('<div class="sc-label">').append('<label for="'+r+'">'+OpenCities.Snippet("Sys Js Email Address","Email address")+"<\/label>")),$savedSearchFormEmailRow.append($('<div class="sc-form-control">').append('<input type="text" id="'+r+'" class="generic-form-textbox" autocomplete="email">')),i!=null&&i.Email!=null&&$("input",$savedSearchFormEmailRow).val(i.Email);n.append($savedSearchFormEmailRow)},initForm:function(n){var i=n.data("filter-id"),u="chk-"+i,r;$savedSearchTrigger=$('<div class="search-subscription-trigger">');$savedSearchTriggerCheckbox=$('<input type="checkbox" id="'+u+'"><\/input>');$savedSearchTriggerLabel=$('<label for="'+u+'">'+OpenCities.Snippet("Sys Js Get Updates For Search","Get updates for this search")+"<\/label>");$savedSearchTrigger.append($savedSearchTriggerCheckbox);$savedSearchTrigger.append($savedSearchTriggerLabel);n.append($savedSearchTrigger);$savedSearchTriggerCheckbox.on("change",function(){n=$(this).closest(".search-subscription");$savedSearchForm=$(".sc-search-subscribe-form",n);$(this).is(":checked")?t.openForm($savedSearchForm):t.cancelForm($savedSearchForm)});$savedSearchForm=$('<div class="sc-subscribe-form sc-search-subscribe-form sc-form se-form-container" aria-live="polite">');r="name-"+i;$savedSearchFormNameRow=$('<div class="sc-element-container sc-textbox generic-form-textbox search-subscribe-name">');$savedSearchFormNameRow.append($('<div class="sc-label">').append('<label for="'+r+'">'+OpenCities.Snippet("Sys Js Name This Search","Name this search")+"<\/label>"));$savedSearchFormNameRow.append($('<div class="sc-form-control">').append('<input type="text" maxlength="300" id="'+r+'" class="generic-form-textbox" autocomplete="off">'));$("input[type=text]",$savedSearchFormNameRow).val(t.getSuggestedSearchName(i));$savedSearchForm.append($savedSearchFormNameRow);$savedSearchForm.append(t.setSearchFormEmailRow($savedSearchForm,i));$savedSearchFormSubmitRow=$('<div class="sc-form-submit-row">');$savedSearchFormSubmitButton=$('<input type="submit" value="'+OpenCities.Snippet("Sys Js Get Updates","Get updates")+'">');$savedSearchFormResetButton=$('<input type="reset" value="'+OpenCities.Snippet("Sys Js Cancel","Cancel")+'">');$savedSearchFormSubmitRow.append($('<div class="sc-form-submit-button-container">').append($savedSearchFormSubmitButton));$savedSearchFormSubmitRow.append($('<div class="sc-form-clear-button-container">').append($savedSearchFormResetButton));$savedSearchForm.append($savedSearchFormSubmitRow);$savedSearchFormResetButton.on("click",function(n){$savedSearchTriggerCheckbox.trigger("click");n.preventDefault()});$savedSearchFormSubmitButton.on("click",function(n){t.submitForm($savedSearchForm,i);n.preventDefault()});n.append($savedSearchForm);$savedSearchForm.slideUp(0)}};t.getLocalToken();i.each(function(){t.initForm($(this))})}},Subscriptions:{init:function(){if((this.init=function(){console.log("Already initialized")},$("#content-subscription-form").length!==0)&&OpenCities.Settings.ContentSubscriptionStatus!=="unavailable"){var i={main:'<div class="sc-subscribe-form sc-form" id="contentSubscribeForm">   <div id="contentSubscribeErrors" class="sc-form-errors">   <\/div>   <div id="contentSubscribeForm_head" class="sc-subscribe-head sc-element-container">      <fieldset>         <legend>            <div class="sc-label sc-required"><span id="">Want updates?<\/span><\/div>         <\/legend>         <div class="sc-form-control sc-subscribe-buttons notranslate">            <div class="translate left"><input id="contentSubscribeButtonOpen" type="button" class="styled-button sc-subscribe-button" value="Subscribe to this page"><\/div>         <\/div>      <\/fieldset>   <\/div>   <div id="contentSubscribeForm_body" class="sc-subscribe-body">\t\t<div id="contentSubscribeFormArea"><\/div>\t\t<div id="contentSubscribeSubmitRow" class="sc-form-submit-row">\t\t\t<div class="sc-form-submit-button-container">\t\t\t\t<input id="contentSubscribeButtonSubmit" type="submit" value="Subscribe">\t\t\t<\/div>\t\t\t<div class="sc-form-clear-button-container">\t\t\t\t<input id="contentSubscribeButtonCancel" type="reset" value="Cancel">\t\t\t<\/div>\t\t<\/div>   <\/div><\/div>',formNotSubscribed:'      <div class="sc-element-container sc-textbox generic-form-textbox">         <div class="sc-label"><label for="contentSubscribeFieldEmail">Email address<span><span class="se-form-required-asterisk"> * <\/span> <span class="se-form-required-text">(required)<\/span><\/span><\/label><\/div>         <div class="sc-form-control"><input type="email" maxlength="300" id="contentSubscribeFieldEmail" class="generic-form-textbox"><\/div>      <\/div>',formNotSubscribedVerifiedVisitor:'<p>Updates will be sent to <span class="user-email"><\/span><\/p>',formNotSubscribedChangeVisitor:'<p>Not you? <a class="action-change-email">Use your own details<\/a><\/p>',formChangeEmailTitle:"<h3>Change email address<\/h3><p>Edit the email address for your subscription to this page.<\/p>",formNewEmailTitle:"<h3>Use a different email<\/h3><p>Subscribe to this page with another email address.<\/p>",formConfirmMessage:'<h3>One more step...<\/h3><p>Confirm your subscription by following the link in the email we sent to <span class="user-email"><\/span><\/p><p>Didn\'t receive the email? Check your spam and junk folders, <a class="action-resend">try resending it<\/a> or <a class="action-change-email">use a different email<\/a>.<\/p>',formServerError:'<h3>Whoops!<\/h3><p>There was a problem at our end and we couldn\'t process your request.<\/p><p>You can <a class="action-reset">try again<\/a> or come back later.<\/p>',formResentMessage:'<h3>We\'ve just sent you another email<\/h3><p>Confirm your subscription by following the link in the email we sent to <span class="user-email"><\/span><\/p><p>Still didn\'t receive it? <a class="action-change-email">Try using a different email<\/a>.<\/p>',formSubscribeConfirmed:"<h3>You're subscribed for updates<\/h3><p>We'll send you an email whenever an update is made to this page<\/p>",formSubscribedMessage:'<h3>You\'re subscribed to this page<\/h3><p>Updates will be sent to <span class="user-email"><\/span><\/p>',formSubscribedMessage_VisitorAction:'<p><a class="action-unsubscribe">Unsubscribe<\/a><\/p><p>Not you? <a class="action-change-email">Use your own details<\/a><\/p>',formSubscribedMessage_UserAction:'<p><a class="action-unsubscribe">Unsubscribe<\/a><\/p>',formUnsubscribedMessage:"<h3>You're unsubscribed from this page<\/h3><p>We'll stop sending you updates about this page.<\/p><p><a class=\"action-subscribe\">Undo<\/a><\/p>",formGovDManaged:"<p>You can now manage your subscriptions via govDelivery<\/p>",messageBox:'<div class="side-box message-box message-type-Announcement">\t<h2 class="side-box-title"><\/h2>\t<div class="side-box-content"><\/div><\/div>',messageBoxClose:'<a href="#" role="button" class="item-dismiss">Close this message<\/a>'},r={token:"/ocapi/visitor/token/cookie",contentSubscribe:"/ocapi/subscription/contentsubscribe",contentUnsubscribe:"/ocapi/subscription/contentunsubscribe",contentResendVerification:"/ocapi/subscription/contentresendverification",contentChangeUnverifiedAddress:"/ocapi/subscription/contentchangeunverifiedaddress"},n={setMessageBox:function(n,t,r){var u=$($.parseHTML(i.messageBox)),o,f,e;u.find(".side-box-title").text(n);u.find(".side-box-content").text(t);r&&(o=$($.parseHTML(i.messageBoxClose)).on("click",function(n){u.slideUp();n.preventDefault()}).appendTo(u));f=$("#main-content");e=f.find("h1").first();e.length===1?e.after(u):f.prepend(u)},setSubscribedForm:function(){var t=OpenCities.Settings.Visitor,u=t!=null&&t.HasCmsUser?i.formSubscribedMessage_UserAction:i.formSubscribedMessage_VisitorAction,r=$($.parseHTML(i.formSubscribedMessage+u));n.setFormAreaContentActions(r);n.setLayout({showHead:!1,showBody:!0,showSubmitRow:!1,formAreaContent:r})},showGovDManagedMessage:function(t){var r=$($.parseHTML(i.formGovDManaged)),f=$("#contentSubscribeFieldEmail").val(),u;n.setFormAreaContentActions(r);n.setLayout({showHead:!1,showBody:!0,showSubmitRow:!1,formAreaContent:r});u={email:f};n.OpenWindowWithPost(t,"qualify",u)},OpenWindowWithPost:function(n,t,i){var r=document.createElement("form"),u;r.setAttribute("method","post");r.setAttribute("action",n);r.setAttribute("target",t);u=document.createElement("input");u.type="hidden";u.name="email";u.value=i.email;r.appendChild(u);document.body.appendChild(r);r.submit();document.body.removeChild(r)},setGovDEmbed:function(i){n.setLayout({showHead:!0,showBody:!1,showSubmitRow:!0,openFunction:function(){t.head.addClass("sc-expanded");t.body.slideDown();t.body.removeClass("rs_skip");var n=t.head.find("#contentSubscribeButtonOpen");n[0].style.display="none"},cancelFunction:function(){t.body.slideUp(function(){n.initForm();t.head.removeClass("sc-expanded");t.body.addClass("rs_skip");var i=t.head.find("#contentSubscribeButtonOpen");i[0].style.display="block"})},formAreaContent:$(i)});var r=t.body.find("#contentSubscribeButtonSubmit");r[0].style.display="none"},setGovDQuickSubscribe:function(){var u=OpenCities.Settings.Visitor,r;template=i.formNotSubscribed;submitFunction=n.submitEmailForm;r=$($.parseHTML(template));n.setFormAreaContentActions(r);u!=null&&u.Email!=null&&r.find("#contentSubscribeFieldEmail").val(u.Email);n.setLayout({showHead:!0,showBody:!1,showSubmitRow:!0,submitFunction:submitFunction,openFunction:function(){t.head.addClass("sc-expanded");t.body.slideDown();t.body.removeClass("rs_skip");var n=t.head.find("#contentSubscribeButtonOpen");n[0].style.display="none"},cancelFunction:function(){t.body.slideUp(function(){n.initForm();t.head.removeClass("sc-expanded");t.body.addClass("rs_skip");var i=t.head.find("#contentSubscribeButtonOpen");i[0].style.display="block"})},formAreaContent:r})},setNotSubscribedForm:function(){var r=OpenCities.Settings.Visitor,o=r!=null&&r.HasVerifiedEmail,s=r!=null&&r.HasCmsUser,u,e,f;o?(u=i.formNotSubscribedVerifiedVisitor,s||(u+=i.formNotSubscribedChangeVisitor),e=n.submitSubscribeForm):(u=i.formNotSubscribed,e=n.submitEmailForm);f=$($.parseHTML(u));n.setFormAreaContentActions(f);r!=null&&r.Email!=null&&f.find("#contentSubscribeFieldEmail").val(r.Email);n.setLayout({showHead:!0,showBody:!1,showSubmitRow:!0,submitFunction:e,openFunction:n.defaultOpenFunction,cancelFunction:function(){t.body.slideUp(function(){n.initForm();t.head.removeClass("sc-expanded");t.body.addClass("rs_skip")})},formAreaContent:f})},setChangeEmailForm:function(){var r=OpenCities.Settings.Visitor;if(r==null||r.Email==null){n.initForm();return}var u=r!=null&&r.HasVerifiedEmail,e=u?i.formNewEmailTitle:i.formChangeEmailTitle,f=$($.parseHTML(e+i.formNotSubscribed));n.setFormAreaContentActions(f);n.setLayout({showHead:!1,showBody:!0,showSubmitRow:!0,submitFunction:function(t){return function(i){n.submitChangeEmailForm(i,t)}}(u),cancelFunction:n.initForm,formAreaContent:f});u||(f.find("#contentSubscribeFieldEmail").val(r.Email),t.submitButton.val("Save"))},setResentForm:function(){var t=$($.parseHTML(i.formResentMessage));n.setFormAreaContentActions(t);n.setLayout({showHead:!1,showBody:!0,showSubmitRow:!1,formAreaContent:t})},setUnsubscribedForm:function(){var t=$($.parseHTML(i.formUnsubscribedMessage));n.setFormAreaContentActions(t);n.setLayout({showHead:!1,showBody:!0,showSubmitRow:!1,formAreaContent:t})},setAwaitVerifyForm:function(){var t=$($.parseHTML(i.formConfirmMessage));n.setFormAreaContentActions(t);n.setLayout({showHead:!1,showBody:!0,showSubmitRow:!1,formAreaContent:t})},setServerErrorForm:function(t,r,u){var f=null,e;try{f=t.responseJSON.message}catch(o){f=u}console.log(f);e=$($.parseHTML(i.formServerError));n.setFormAreaContentActions(e);n.setLayout({showHead:!1,showBody:!0,showSubmitRow:!1,formAreaContent:e})},setFormAreaContentActions:function(t){n.setUserEmailAction(t.find(".user-email"));n.setResetAction(t.find(".action-reset"));n.setSubscribeAction(t.find(".action-subscribe"));n.setResentVerificationAction(t.find(".action-resend"));n.setUseDifferentEmailAction(t.find(".action-change-email"));n.setUnsubscribeAction(t.find(".action-unsubscribe"))},setUserEmailAction:function(n){n.length!==0&&OpenCities.Settings.Visitor!==null&&n.text(OpenCities.Settings.Visitor.Email)},setResetAction:function(t){if(t.length!==0)t.attr({role:"button",href:"#","aria-label":"Try again"}).on("click",n.initForm)},setSubscribeAction:function(t){if(t.length!==0)t.attr({role:"button",href:"#","aria-label":"Subscribe to updates about this page"}).on("click",n.submitSubscribeForm)},setResentVerificationAction:function(t){if(t.length!==0)t.attr({role:"button",href:"#","aria-label":"Resend subscription confirmation email"}).on("click",n.submitResendVerificationForm)},setUseDifferentEmailAction:function(t){if(t.length!==0)t.attr({role:"button",href:"#","aria-label":"Use a different email address"}).on("click",function(t){n.setChangeEmailForm();t.preventDefault()})},setUnsubscribeAction:function(t){if(t.length!==0)t.attr({role:"button",href:"#","aria-label":"Unsubscribe from updates about this page"}).on("click",function(t){n.postWithToken({url:r.contentUnsubscribe,data:{link:OpenCities.Settings.Application.Link},success:function(t){n.updateSettingsData(t);n.setUnsubscribedForm()}});t.preventDefault()})},setLayout:function(i){i=$.extend({},{showHead:!0,showBody:!0,showSubmitRow:!0,submitFunction:function(){},openFunction:function(){},cancelFunction:function(){},formAreaContent:null},i);n.destroyBody();t.head.toggle(i.showHead);t.body.toggle(i.showBody);t.body.toggleClass("rs_skip");t.submitRow.toggle(i.showSubmitRow);i.formAreaContent!==null&&t.formArea.html(i.formAreaContent);i.showBody&&i.showHead||!t.head.hasClass("sc-expanded")||t.head.removeClass("sc-expanded");n.submit=i.submitFunction;n.open=i.openFunction;n.cancel=i.cancelFunction},submitEmailForm:function(t){var i=$("#contentSubscribeFieldEmail").val();n.validateEmailForm(i)?($("#contentSubscribeFieldEmail").removeAttr("aria-invalid"),n.postWithToken({url:r.contentSubscribe,data:{link:OpenCities.Settings.Application.Link,address:i},success:function(t){n.updateSettingsData(t);n.initForm()}})):$("#contentSubscribeFieldEmail").attr("aria-invalid","true");t.preventDefault()},submitSubscribeForm:function(t){n.postWithToken({url:r.contentSubscribe,data:{link:OpenCities.Settings.Application.Link},success:function(t){n.updateSettingsData(t);n.initForm()}});t.preventDefault()},submitChangeEmailForm:function(t,i){var u=$("#contentSubscribeFieldEmail").val();n.validateEmailForm(u)&&n.postWithToken({url:i?r.contentSubscribe:r.contentChangeUnverifiedAddress,data:{link:OpenCities.Settings.Application.Link,address:u},success:function(t){n.updateSettingsData(t);n.initForm()},forceNewVisitor:typeof i=="boolean"?i:!1});t.preventDefault()},submitResendVerificationForm:function(t){n.postWithToken({url:r.contentResendVerification,data:{link:OpenCities.Settings.Application.Link},success:function(t){n.updateSettingsData(t);n.setResentForm()}});t.preventDefault()},defaultOpenFunction:function(){t.head.addClass("sc-expanded");t.body.slideDown();t.body.removeClass("rs_skip")},defaultCancelFunction:function(){t.body.slideUp();t.head.removeClass("sc-expanded");t.body.addClass("rs_skip")},postWithToken:function(t){t=$.extend({},{forceNewVisitor:!1},t);var i=function(t){return function(i){t=$.extend({},{method:"POST",headers:{"X-XSRF-TOKEN":i.XsrfToken},dataType:"json",error:n.setServerErrorForm},t);$.ajax(t)}}(t),r=function(){n.withToken(i,n.setServerErrorForm,!0,t.forceNewVisitor)};n.withToken(i,r,!1,t.forceNewVisitor)},destroyBody:function(){t.subForm.removeClass("sc-has-errors");t.errors.empty();t.formArea.empty();t.openButton.val(t.openButton.data("init-text"));t.submitButton.val(t.submitButton.data("init-text"));t.cancelButton.val(t.cancelButton.data("init-text"));n.submit=function(){};n.cancel=function(){}},updateSettingsData:function(n){typeof n=="object"&&(n.hasOwnProperty("visitor")&&(OpenCities.Settings.Visitor=n.visitor),n.hasOwnProperty("status")&&(OpenCities.Settings.ContentSubscriptionStatus=n.status))},submit:function(){},cancel:function(){},withToken:function(t,i,u,f){u=typeof u!="boolean"?!1:u;f=typeof f!="boolean"?!1:f;var e=!u&&!f?n.getLocalToken():null;e!=null?(e.fromStorage=!0,t(e)):$.ajax({url:r.token,method:"POST",dataType:"json",data:{forceNewVisitor:f},success:function(i){var r=n.parseToken(i);n.setLocalToken(r);t(r)},error:function(n,t,r){typeof i=="function"&&i(n,t,r)}})},getLocalToken:function(){if(typeof OpenCities.Settings.ApiToken=="undefined"&&(OpenCities.Settings.ApiToken=null,Modernizr.localstorage)){var t=localStorage.getItem("OpenCities.Settings.ApiToken");t!=null&&(OpenCities.Settings.ApiToken=n.parseToken(JSON.parse(t)))}return n.validateLocalToken()||n.clearLocalToken(),OpenCities.Settings.ApiToken},setLocalToken:function(n){OpenCities.Settings.ApiToken=n;Modernizr.localstorage&&localStorage.setItem("OpenCities.Settings.ApiToken",JSON.stringify(n))},validateLocalToken:function(){return OpenCities.Settings.ApiToken===null?!1:OpenCities.Settings.Visitor!==null&&OpenCities.Settings.ApiToken.Id!==OpenCities.Settings.Visitor.Id?!1:OpenCities.Settings.ApiToken.Expires<new Date?!1:!0},clearLocalToken:function(){OpenCities.Settings.ApiToken=null;localStorage.removeItem("OpenCities.Settings.ApiToken")},parseToken:function(t){return{Id:t.Id,XsrfToken:t.XsrfToken,Expires:n.parseJsonDate(t.Expires)}},parseJsonDate:function(n){return n.substr(0,6)==="/Date("?new Date(parseInt(n.substr(6))):new Date(n)},initForm:function(i){switch(OpenCities.Settings.ContentSubscriptionStatus){case"not_subscribed":n.setNotSubscribedForm();break;case"subscribed":n.setSubscribedForm();break;case"await_verify":n.setAwaitVerifyForm();break;case"govd_quickSubscribeRedirect":n.showGovDManagedMessage(OpenCities.Settings.govDSubscriptionControl);break;case"govd_setSignupEmbed":n.setGovDEmbed(OpenCities.Settings.govDSubscriptionControl);break;case"govd_setQuickSubscribe":n.setGovDQuickSubscribe()}t.container.append(t.subForm).addClass("se-form-container");var r=document.querySelectorAll('script[src$="assets/Signup.js"]');if(r.length>1)for(const n of r)n.getAttribute("data-account-code")==null&&n.remove();typeof i=="object"&&i.preventDefault()},setMessageBoxes:function(){var i=t.container.data("query-result");if(typeof i=="object")switch(i.Status){case"confirmed":n.setMessageBox("You're subscribed for updates","We'll send you an email at "+i.Address+" whenever an update is made to this page.",!0);break;case"unsubscribed":n.setMessageBox("You're unsubscribed","We'll stop sending emails to "+i.Address+" whenever an update is made to this page.",!0)}},validateEmail:function(n){return/^(?!\.)([a-zA-Z0-9_'+*$%\^&!.\-])+@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9:]{2,4})+$/.test(n)},validateEmailForm:function(i){if(t.subForm.removeClass("sc-has-errors"),t.errors.empty(),i==null||i==""||!n.validateEmail(i)){t.subForm.addClass("sc-has-errors");var f=String.format("<a class=\"firstError\" onclick=\"$('html, body').animate({{scrollTop: $('{2}').offset().top}}, 500);$('#{0}').trigger('focus');return false;\" href='#{0}'>{1}<\/a>","contentSubscribeFieldEmail","Enter a valid email address","[for=contentSubscribeFieldEmail]"),u=$(f),e=OpenCities.Tools.UniqueId(u,"err"),o=$("<ul>"),r=$("<li>");return o.append(r),r.append(u),t.errors.html(r),$("#contentSubscribeFieldEmail").attr("aria-describedby",e),$(".firstError").trigger("focus"),!1}return!0}},t={};t.subForm=$($.parseHTML(i.main));t.container=$("#content-subscription-form");t.errors=t.subForm.find("#contentSubscribeErrors");t.head=t.subForm.find("#contentSubscribeForm_head");t.body=t.subForm.find("#contentSubscribeForm_body");t.formArea=t.subForm.find("#contentSubscribeFormArea");t.submitRow=t.subForm.find("#contentSubscribeSubmitRow");t.openButton=t.subForm.find("#contentSubscribeButtonOpen").on("click",function(t){n.open(t);t.preventDefault()});t.openButton.data("init-text",t.openButton.val());t.submitButton=t.subForm.find("#contentSubscribeButtonSubmit").on("click",function(t){n.submit(t);t.preventDefault()});t.submitButton.data("init-text",t.submitButton.val());t.cancelButton=t.subForm.find("#contentSubscribeButtonCancel").on("click",function(t){n.cancel(t);t.preventDefault()});t.cancelButton.data("init-text",t.cancelButton.val());n.setMessageBoxes();n.getLocalToken();n.initForm()}}},OpenForms:{init:function(){var t,i,n,r;if(typeof SeamlessOpenForms!="object"){t=document.getElementsByClassName("seamless-smartform-anchor-iframe").length;i=document.getElementsByClassName("openforms-embed").length;t+i>0&&(window.SeamlessOpenForms={},n=document.createElement("script"),n.src=OpenCities.Settings.Application.OpenForms.Url+OpenCities.Settings.Application.OpenForms.ScriptPath,n.onload=function(){window.SeamlessOpenForms.loadOpenForms()},document.head.appendChild(n));r=this;$(document).on("oc-container-show",function(n,t){r.onContainerOpen(t)})}},onContainerOpen:function(n){var t=$(n).find("iframe[id^='openforms-embed-iframe']").length>0;t&&this.resize()},resize:function(){window.dispatchEvent(new Event("resize"))}},FeaturedSectionMenu:{init:function(){(this.init=function(){},$(".section-nav-outer-container").length!==0)&&OpenCities.Plugins.FeaturedSectionMenu.VerticalMenu.init()},VerticalMenu:{_options:{selector:".section-nav-outer-container",navButton:".section-menu-btn > button",subNavArrow:".fs-nav-subarrow",mobileSubArrowChild:".mobnav-subarrow-child",childOpenClass:"child-expanded",animationSpeed:"fast",menuOpen:"side-menu-open",activeMenuClass:"offscreen-active-menu",activeMenu:".offscreen-active-menu",activeSubMenuClass:"active-sub-menu",activeSubMenu:".navigation-outer-container ul.active-sub-menu"},init:function(){var f=this,i=n.Tools.ArgsAsOptions(arguments,[{string:"selector"}]);if(i===!1)return console.warn("OpenCities.Plugins.FeaturedSectionMenu.VerticalMenu.init: failed"),!1;var t=$.extend({},this._options,i||{}),u=$(t.navButton),r=$(t.selector);u.each(function(){var n=$(this);n.attr({"aria-controls":"nav","aria-expanded":"false"}).addClass("not-pressed").removeClass("pressed");n.text().trim()===""&&n.attr({"aria-label":"Main Menu"})}).on("click",function(n){var i=$(this);i.hasClass("not-pressed")?(i.attr({"aria-expanded":"true","aria-label":"Close"}).addClass("pressed").removeClass("not-pressed"),$(".side-menu-btn-text",i).text("Close"),r.slideDown(t.animationSpeed)):(i.attr({"aria-expanded":"false","aria-label":"Menu"}).addClass("not-pressed").removeClass("pressed"),$(".side-menu-btn-text",i).text("Menu"),r.slideUp(t.animationSpeed));n.preventDefault()});$(t.subNavArrow).on("click",function(n){$(this).parent().toggleClass(t.childOpenClass);$(this).parent().hasClass(t.childOpenClass)?$("> ul",$(this).parent()).slideDown(t.animationSpeed):$("> ul",$(this).parent()).slideUp(t.animationSpeed);n.preventDefault()})}}},StepNumbering:{init:function(){this.init=function(){};var t=$(".step-section.step-numbering-Yes");t.length!==0&&t.each(function(){var t=$(this);$(".page-section-header",t).each(function(){var t=$(this),i,r;$(".step-number",t).length===0&&(i=t.data("heading-index"),r=$('<span class="visuallyhidden step-number">'+n.Snippet("Sys Js Step","Step")+" "+i+".<\/span>"),t.prepend(r))})})}},RepointContentListDateFilter:{init:function(){n.Plugins.RepointContentListDateFilter.UpdateLabelFor()},UpdateLabelFor:function(){var n=document.querySelectorAll("[for][data-swap-label-id]"),t;for(i=0;i<n.length;i++)t=n[i].getAttribute("data-swap-label-id"),n[i].setAttribute("for",t),n[i].removeAttribute("data-swap-label-id")}},ContainerEvent:{init:function(){$(document).on("oc-tab-selected",function(n){var i=n.target.hash,t=$(i);t.length>0&&$(n.target).trigger("oc-container-show",t[0])});$(document).on("oc-accordion-open",function(n){var i=$(n.target).data("accordion-body"),t=$(i);t.length>0&&$(n.target).trigger("oc-container-show",t[0])});$(document).on("oc-section-open",function(n){$(n.target).trigger("oc-container-show",n.target)})}},NavigatorDetector:{init:function(){class t{_favoredNavigationDeviceChangeCallbacks=[];NAVIGATION_KEYS=["Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"];constructor(){this._loadState();window.addEventListener("keydown",n=>this._keydown(n),{passive:!0});window.addEventListener("mousedown",n=>this._mousedown(n),{passive:!0});window.addEventListener("touchstart",n=>this._touchstart(n),{passive:!0});this._debouncedSyncState=this._debounce(this._syncState,1e3)}get hasNavigatedMouse(){return this.state.navigationEvents.mouse>0}get hasNavigatedKeyboard(){return this.state.navigationEvents.keyboard>0}get hasNavigatedTouch(){return this.state.navigationEvents.touch>0}get favoredNavigationDevice(){return this._updateFavoredNavigationDevice()}get state(){return this._state||(this._state=this._getNewState()),this._state}get lastLoadedState(){return this._lastLoadedState||(this._lastLoadedState=this._getNewState()),this._lastLoadedState}_getNewState(){return{navigationEvents:{mouse:0,keyboard:0,touch:0},lastFavoredDevice:null}}_getSavedState(){const n=localStorage.getItem("Client_OcNavigationDeviceDetector.state");return JSON.parse(n)||this._getNewState()}_loadState(){this.state||(this.state=this._getNewState());this._lastLoadedState=this._getSavedState();Object.assign(this.state,this._getSavedState())}_saveState(){if(!this._isSaving){this._isSaving=!0;try{const n=this._getSavedState();this.state.navigationEvents.mouse+=n.navigationEvents.mouse-this.lastLoadedState.navigationEvents.mouse;this.state.navigationEvents.keyboard+=n.navigationEvents.keyboard-this.lastLoadedState.navigationEvents.keyboard;this.state.navigationEvents.touch+=n.navigationEvents.touch-this.lastLoadedState.navigationEvents.touch;this._updateFavoredNavigationDevice();localStorage.setItem("Client_OcNavigationDeviceDetector.state",JSON.stringify(this.state))}catch{console.error("State could not be saved.")}this._isSaving=!1}}_syncState(){this._saveState();this._loadState()}_debounce(n,t){let i;return(...r)=>{clearTimeout(i),i=setTimeout(()=>n.apply(this,r),t)}}_keydown(n){this.NAVIGATION_KEYS.includes(n.key)&&(this.state.navigationEvents.keyboard++,this._updateFavoredNavigationDevice(),this._debouncedSyncState())}_mousedown(){this.state.navigationEvents.mouse++;this._updateFavoredNavigationDevice();this._debouncedSyncState()}_touchstart(){this.state.navigationEvents.touch++;this._updateFavoredNavigationDevice();this._debouncedSyncState()}_updateFavoredNavigationDevice(){let n=null,t=0;return this.state.navigationEvents.mouse>t&&(t=this.state.navigationEvents.mouse,n="mouse"),this.state.navigationEvents.keyboard>t&&(t=this.state.navigationEvents.keyboard,n="keyboard"),this.state.navigationEvents.touch>t&&(t=this.state.navigationEvents.touch,n="touch"),this.state.lastFavoredDevice!==n&&(this._triggerFavoredNavigationDeviceChange(n),this._syncState()),n}_triggerFavoredNavigationDeviceChange(n){const t=n===this.state.lastFavoredDevice?null:this.state.lastFavoredDevice;this._favoredNavigationDeviceChangeCallbacks.forEach(i=>{i(n,t)});this.state.lastFavoredDevice=n}onFavoredNavigationDeviceChange(n){this._favoredNavigationDeviceChangeCallbacks.includes(n)||this._favoredNavigationDeviceChangeCallbacks.push(n);n(this.state.lastFavoredDevice,null)}}class i{constructor(){this.navigationDeviceDetector=new t}adapt(n){const t={selector:null,mouse:"",keyboard:"",touch:"",...n};this.navigationDeviceDetector.onFavoredNavigationDeviceChange(n=>{Object.prototype.hasOwnProperty.call(t,n)&&document.querySelectorAll(t.selector).forEach(i=>{i.innerHTML=t[n]})})}}const r=new i;r.adapt({selector:".tab-group .list_help p",mouse:n.Snippet("Sys Js Tabs Instructions","Press left and right keys to move between tabs. Press down to focus tab content."),keyboard:n.Snippet("Sys Js Tabs Instructions","Press left and right keys to move between tabs. Press down to focus tab content."),touch:n.Snippet("Sys Js Tabs Mobile Instructions","Double tap to activate.")})}}}});n.init()})(OpenCities);$oc.Ext("String.format",function(){return typeof String.format=="function"?String.format:function(n){var t=Array.prototype.slice.call(arguments,1);return n.replace(/{(\d+)}/g,function(n,i){return typeof t[i]!="undefined"?t[i]:n})}});$oc.Ext("Analytics",function(){function ft(){ot();Object.assign(t,st());let n=ht();Promise.allSettled(n).then(et)}function et(){Object.assign(a,new w(t));b=!0;d()}function ot(){const n=new URLSearchParams(window.location.search.toLowerCase()).get("ocanalyticsdebug");if(typeof n=="string")switch(n){case"true":case"1":case"yes":s(!0);break;case"false":case"0":case"no":s(!1)}else{let n=window.localStorage.getItem("ocanalyticsdebug");if(n==="1"){let n=window.sessionStorage.getItem("debuginit");if(n!=="1"){let n=confirm("OpenCities Analytics debug mode is ENABLED. Press OK to confirm or Cancel to quit debugging.");s(n)}else s(!0)}}}function s(t){return typeof t=="boolean"&&(n=t,n?window.localStorage.setItem("ocanalyticsdebug","1"):window.localStorage.removeItem("ocanalyticsdebug"),window.sessionStorage.setItem("debuginit","1")),n}function st(){let n={};if(window.hasOwnProperty("GoogleAnalyticsObject")&&window[GoogleAnalyticsObject].hasOwnProperty("q")){const i=window[GoogleAnalyticsObject].q,t=i.filter(n=>n.length>=2&&n[0]==="create");for(let i=0;i<t.length;i++){const r=t[i],u=r[1],f=r.length>=3?r[2]:{},e=f.hasOwnProperty("name")&&f.name==="gtag_"+u.split("-").join("_");if(!e){const t=v(n,u);Object.assign(t,{gaType:"UA",isGtag:!1})}}}return n}function ht(){const n=[];if(typeof dataLayer=="object"&&typeof gtag=="function")for(let i=0;i<window.dataLayer.length;i++){const r=window.dataLayer[i];if(r.length>=2&&r[0]=="config"){const i=r[1],u=ct(i,t);n.push(u)}}return n}function ct(n,t){return Promise.race([new Promise(t=>{gtag("get",n,"client_id",t)}),new Promise(n=>{setTimeout(n,1e4)})]).then(i=>typeof i!="undefined"?(v(t,n).isGtag=!0,new Promise(t=>{gtag("get",n,"session_id",t)})):Promise.resolve(null)).then(i=>{i!==null&&(v(t,n).gaType=typeof i!="undefined"?"GA4":"UA")})}function v(n,t){return n.hasOwnProperty(t)||(n[t]=new it(t)),n[t]}function k(){return Object.keys(t).length}function r(t){n&&console.log("Queuing anayltics event: ",t);i.push(t);d()}function d(){if(!b){console.info("Google Analytics is not ready. Flush will be deferred until ready.");return}k()===0?(console.log("No Google Analytics properties detected. Flushing queue to console."),lt()):at()}function lt(){if(i.length>0)for(console.log(`Flushing all (${i.length}) items from the analytics event queue to the console:`);i.length>0;)console.log(i.shift());else console.log("Flush was called but the event queue is empty.")}function at(){while(i.length>0){const n=i.shift();if(Array.isArray(n))for(let t=0;t<n.length;t++)g(n[t]);else g(n)}}function g(i){if(!i instanceof f){console.error("[targetedEvent] is expected to be an instance of 'AnalyticsEvent' or a derived type, instead found: ",i);return}n&&console.log("Process event:",i);const r=i.target,u=r.length===0;if(typeof r=="string"){if(r==="GA4"||u&&i instanceof l){i.send([...a.GA4]);return}if(r==="UA"||u&&i instanceof h){i.send([...a.UA]);return}if(t.hasOwnProperty(r)){const n=t[r];i.send([n]);return}console.error(`'${r}' is not a registered Google Analytics property ID, nor a recognised grouping keyword (e.g. GA4, UA)`);return}if(Array.isArray(i.target)){const n=[];for(let r=0;r<i.target;r++){let u=i.target[r];if(t.hasOwnProperty(u)){const i=t[u];n.push(i)}else console.error(`'${u}' is not a registered Google Analytics property ID, nor a recognised grouping keyword (e.g. GA4, UA)`)}n.length>0&&i.send(n);return}console.error(`No data was sent for the following event: ${i}`)}function vt(n){try{return n.stack.split("\n").map(n=>{const t=n.trim();return t.indexOf("at ")===0?t.substring(3):""}).filter(n=>n!=="")}catch(t){return["{unknown}","{unknown}"]}}function e(){try{const n=vt(new Error),t=n[1].split(" ")[0];console.log(`Debugging analytics event send: `,{function_called:t,arguments,stack:n})}catch(n){console.log(`Debugging analytics event send: `,{arguments})}}function u(n,t,i,u,f){const e=f?nt(n):n;r([new p(e,t,i),new c(n,t,i,u===1)])}function nt(n){return"oc_"+n.replace(/[^a-z0-9_]/ig,"_").toLowerCase()}class f{target="";event_name="";params={};constructor(n){this.target=n}send(){}}class h extends f{constructor(){super("UA")}send(n){const t=new rt(n);if(t.gtags.length>0&&this.send_gtag(t.gtags),t.isograms.length>0&&(t.isograms.length>1&&console.warn("Multiple Universal Analytics properties have been loaded through the isogram embed code. Event will be sent only to the main un-named property. Use gtag if you require multiple-property support for Universal Analytics."),this.send_isogram()),t.gtags.length===0&&t.isograms.length===0){console.error("No valid UA properties found to send this event to: ",this);return}}send_gtag(){}send_isogram(){}}class tt extends h{constructor(n,t){super();this.event_name=n;this.params={...this.params,...t}}send_gtag(t){const i=n?e:window.gtag;i("event",this.event_name,{...this.params,send_to:t})}}class c extends h{constructor(n,t,i,r){super();this.event_name=t;this.params={...this.params,event_category:n,event_label:i,non_interaction:r===1}}send_gtag(t){const i=n?e:window.gtag;i("event",this.event_name,{...this.params,send_to:t})}send_isogram(){const t=n?e:window[window.GoogleAnalyticsObject];t("send","event",this.params.event_category,this.event_name,this.params.event_label,{nonInteraction:this.params.non_interaction})}}class y extends h{constructor(n){super();this.params={...this.params,page_path:n}}send_gtag(t){const i=n?e:window.gtag;for(let n=0;n<t.length;n++){let r=t[n];i("config",r,{page_path:this.params.page_path})}}send_isogram(){const t=n?e:window[window.GoogleAnalyticsObject];t("send","pageview",this.params.page_path)}}class l extends f{constructor(){super("GA4")}send(t){let i=t.filter(n=>n.gaType==="GA4").map(n=>n.propertyId);if(this.params.hasOwnProperty("send_to")&&(typeof this.params.send_to=="string"?i.push(this.params.send_to):Array.isArray(this.params.send_to)&&i.push([...this.params.send_to])),this.params.send_to=[...new Set(i)],this.params.send_to.length===0){console.warn("No valid GA4 properties found to send this event to: ",this);return}const r=n?e:window.gtag;r("event",this.event_name,this.params)}}class o extends l{constructor(n,t){super();this.event_name=n;this.params={...this.params,...t}}}class p extends l{constructor(n,t,i){super();this.event_name=n;this.params={...this.params,oc_value_1:t,oc_value_2:i}}}class it{propertyId;gaType;isGtag;constructor(n){this.propertyId=n}}class w{GA4;UA;constructor(n){if(typeof n=="object"){this.GA4=[];this.UA=[];for(let t in n){const i=n[t];i.gaType==="GA4"?this.GA4.push(i):i.gaType==="UA"&&this.UA.push(i)}}}}class rt{gtags;isograms;constructor(n){typeof n=="object"&&(this.gtags=[],this.isograms=[],n.forEach(n=>{n.gaType==="UA"&&(n.isGtag?this.gtags:this.isograms).push(n.propertyId)}))}}let b=!1,n=!1;const i=[],t={},a=new w;try{ft()}catch(ut){console.error(ut)}return Object.assign(this,{Debug:function(n){return s(n)},HasAnalytics:function(){return console.warn("Deprecation notice: this function is no longer supported and may be removed in future."),k()>0},HasGtagManager:function(){return console.warn("Deprecation notice: this function is no longer supported and may be removed in future."),typeof gtag=="function"},SendEvent:function(n,t,i,r){u(n,t,i,r,!1)},SendAnalyticsEvent:function(n){if(n instanceof f||Array.isArray(n)&&n.every(n=>n instanceof f))r(n);else throw new Error("[event] is expected to an instance of 'AnalyticsEvent' or a derived type or an Array");},Objects:{GA4Event:o,GA4GenericEvent:p,AnalyticsEvent:f},Record:{DocumentDownload:function(n,t){r(new c("Document Download",n,t,1))},TabSelection:function(n,t){u("Tab Selection",n,t,1,!0)},TopTaskClick:function(n){u("Top Task Click",n,null,1,!0)},TopTaskNavigationClick:function(n){u("Top Task Navigation Click",n,null,1,!0)},FeatureWidgetClick:function(n){u("Feature Widget Click",n,null,1,!0)},SocialShare:function(n,t,i){r([new o("share",{method:n,item_id:i}),new c(t,n,i)])},SiteSearch:function(n){n.trim()!==""&&r([new o("search",{search_term:n}),new tt("view_search_results",{search_term:n}),new y("/oc-search-results?query="+n)])},SearchClick:function(n,t){u("Search result click",n,t,1,!0)},AddToCalendarClick:function(){const n="Add to calendar";r([new o(nt(n)),new c(n,"click",null,1)])},EventsCallToActionClick:function(n){u("Call to action clicked","click",n,1,!0)}},SendPageView:function(n){r([new o("page_view",{page_location:n}),new y(n)])}})});$oc.Ext("Tools",function(n){function t(){n.QueryString=r()}function r(){return s(window.location.search)}function s(n){for(var t,r=h(n),u={},i=0;i<r.length;++i)t=r[i].split("="),t.length<2&&t.push(""),t.length>2&&(t=[t.shift(),t.join("=")]),u[t[0]]=decodeURIComponent(t[1].replace(/\+/g," "));return u}function h(n){return typeof n!="string"?[]:(n=n.trim(),n===""||n==="?")?{}:(n=n[0]==="?"?n.substr(1):n,n.split("&"))}function c(n){var t=$.param(n);return t!==""&&(t="?"+t),t}function u(n){var t=l(n);return t===null?1:t>=6?6:t+1}function l(n){var t=f(n);return t===null?null:parseInt(t.tagName.substr(1))}function f(n){for(var t=n.previousElementSibling,r,u;t!==null;){if(i.indexOf(t.tagName)>-1)return t;if(r=t.querySelectorAll(o),r.length>0)return r[r.length-1];t=t.previousElementSibling}return(u=n.parentElement,u!==null)?f(u):null}function e(n){return(n&&(n instanceof jQuery||n.constructor.prototype.jquery))===!0}var i=["H1","H2","H3","H4","H5","H6"],o=i.join(",").toLowerCase();return t(),window.addEventListener("popstate",function(){t()}),{IsJQuery:e,NextHeadingRank:function(n){return e(n)?n.length>0?u(n[0]):null:u(0)},PushQueryStringValue:function(n,t){var i=r();i[n]=t;this.PushQueryString(i)},PushQueryString:function(n){if(Modernizr.history){var i=document.location,r=c(n),u=i.pathname+r;window.history.pushState({},document.title,u);t()}},Debounce:function(n,t,i){var r;return function(){function e(){i||n.apply(u,f);r=null}var u=this,f=arguments;r?clearTimeout(r):i&&n.apply(u,f);r=setTimeout(e,t||100)}},GenerateUniqueId:function(n){n=arguments.length>0&&typeof n=="string"?n:"uid";for(var t="";t===""||document.getElementById(t)!==null;)t=n+"_"+(new Date).getTime()+"_"+Math.floor(Math.random()*1e4);return t},UniqueId:function(n,t){var i=n.attr("id");return typeof i=="undefined"&&(i=$oc.Tools.GenerateUniqueId(t),n.attr("id",i)),i}}});$oc.Ext("Tools.ResponsiveElement",function(n){function f(n){for(var r=[],u=t.length<n.length?t.length:n.length,i=0;i<u;i++)r.push({className:t[i],minWidth:n[i]});return r}function e(n){if(typeof n!="object"||!Array.isArray(n))return!1;if(n.length===0)return!0;var t=n[0];return t.hasOwnProperty("className")&&t.hasOwnProperty("minWidth")}function o(n){return n[0].getBoundingClientRect().width}function r(n){var t=$(n.element),u,i,r,f;if(t.length!==0&&$.contains(document,t.get(0))){for(u=o(t),i=null,r=n.breakPoints.length-1;r>=0;r--)if(f=n.breakPoints[r],u>=f.minWidth){i=f.className;break}t.hasClass(i)||(t.removeClass(n.classes),i!=null&&t.addClass(i),typeof n.callback=="function"&&n.callback(t,u,i,n))}}function s(n,t){var i,r;if(typeof t=="string")for(i=0;i<n.length;i++)r=n[i],r.className=t+"-"+r.className}function h(n){for(var i=[],t=0;t<n.length;t++)i.push(n[t].className);return i.join(" ")}function u(){for(var n=0;n<i.length;n++)r(i[n])}var t=["xsmall","small","medium","large","xlarge","xxlarge"],i=[];$(window).on("resize",n.Tools.Debounce(u,50));return{setElement:function(n,t,u,o){var c,a,l;t=typeof t=="string"?t:"size";c=e(u)?u:f(u);s(c,t);c.sort(function(n,t){return n.minWidth-t.minWidth});a=h(c);l={element:n,prefix:t,breakPoints:c,classes:a,callback:o};r(l);i.push(l)},init:function(){u()}}});$oc.Ext("Plugins.OrgChart",function(n){function o(n,i,r,u){i.detach().empty();i.attr("aria-label","");var e=$('<div class="org-chart-error-container staff-member-container clearfix">').appendTo(i),o=$('<article class="org-chart-error">').appendTo(e),f=$('<div class="profile-info-container">').appendTo(o);$("<h"+u+' class="list-item-title">').text(t.genericErrorTitle).appendTo(f);r.appendTo(f);i.appendTo(n)}function f(n,t,i){n.chart.detach().empty();var r=nt(n.chart,t,i);$.extend(n,r);n.chart.appendTo(n.container)}function nt(n,t,i){return rt(n,t),{skipContainer:ut(n,t,i),managerSection:et(n,t,i),staffMemberSection:ht(n,t,i),directReportsSection:lt(n,t,i)}}function tt(t){if(t===null||!n.Tools.IsJQuery(t)||t.length===0){if(typeof t=="string"){var i=$(t);if(i.length>0)return i.first()}throw"options.container needs to be a jQuery object with at least one element";}return t.first()}function it(t){var i=t.attr("id");return typeof i=="undefined"&&(i=n.Tools.GetUniqueId("org-chart-"),t.attr("id",i)),i}function rt(i,r){i.data("current-user",r);var f=u(r),e=n.String.format(t.chartSectionLabel,f);i.attr("aria-label",e)}function ut(n,t,i){var r=$('<div class="org-skip">').appendTo(n);return ft(r,t,i),r}function ft(i,r,u){if(i.empty().addClass("org-empty"),r.HasManager&&r.hasOwnProperty("ReportsTo")){var f=e(r),o=n.String.format(t.skipToProfile,f),s=$("<a>").addClass("visuallyhidden focusable").text(o).attr({href:"#"+u.ids.staffMemberSection}).appendTo(i);i.removeClass("org-empty")}}function et(n,t,i){return $managerContainer=$('<div class="manager-chain org-connections">').appendTo(n),ot($managerContainer,t,i),$managerContainer}function ot(i,r,f){if(i.empty().addClass("org-empty").removeAttr("aria-label"),r.HasManager&&r.hasOwnProperty("ReportsTo")){var e=u(r),o=n.String.format(t.managerHeading,e);$("<h"+f.startHeadingRank+' class="manager-chain-title visuallyhidden">').text(o).appendTo(i);$managerList=$('<ol class="org-con-list">');$managerChain=k($managerList,r.ReportsTo,0,f).appendTo(i);i.removeClass("org-empty")}}function st(n){var t=n.data("current-user");return typeof t=="object"&&t.hasOwnProperty("Id")?t.Id:null}function ht(n,t,i){var r=$('<div class="staff-member-container clearfix">').attr("id",i.ids.staffMemberSection).appendTo(n);return ct(r,t,i),r}function ct(i,r,u){var o,s,f;i.empty();o=e(r);s=n.String.format(t.staffMemberHeading,o);$("<h"+u.startHeadingRank+' class="staff-member-title visuallyhidden">').text(s).appendTo(i);$block=$('<article class="staff-member">').appendTo(i);p($block,r,u.profileImageMainSize,!0,u.profileImageUrlFormat,u.profilePageUrlFormat);f=$('<div class="profile-info-container">').appendTo($block);w(f,r,!0,u.startHeadingRank,u.profilePageUrlFormat);c(f,r);gt(f,r)}function lt(n,t,i){return $reportsContainer=$('<div class="reports-list org-connections">').appendTo(n),at($reportsContainer,t,i),$reportsContainer}function at(n,t,i){var r;if(n.empty().addClass("org-empty"),t.DirectReportsCount>0&&t.hasOwnProperty("DirectReports")){r=i.paginationLimit>0?i.paginationLimit:t.DirectReportsCount;bt(n,t,i.startHeadingRank);var u=$('<div class="oc-container animate">'),f=$('<ul class="org-con-list">'),e=s(f,t.DirectReports,0,r,i).appendTo(u);u.appendTo(n);t.DirectReportsCount>r&&vt(u,f,t,r,i);n.removeClass("org-empty")}}function vt(t,i,r,u,f){function d(){switch(o){case"init":w(function(){s(i,r.DirectReports,u,null,f)});break;case"hidden":w(function(){i.find("li").slice(u).show()});break;case"shown":g()}}function w(n){h&&e!==0||(t.css("height","auto"),e=t.height(),v=e-i.height(),t.css("height",e));n();t.css("height",i.height()+v);p.text(k);o="shown"}function g(){t.css("height",e);p.text(a);c=!0;o="hidden";nt()}function nt(){l||setTimeout(function(){h||l||b()},y?500:10)}function b(){c&&o==="hidden"&&(i.find("li").slice(u).hide(),t.css("height","auto"),e=t.height());c=!1}function tt(){y=!0;h=!0;o==="hidden"&&(l=!0)}function it(){h=!1;b()}var a=n.String.format("Show {0} more",r.DirectReportsCount-u),k="Hide additional people",e=0,v=0,o="init",h=!1,y=!1,c=!1,l=!1,p=$("<button>").text(a).on("click",function(n){n.preventDefault();d()}).appendTo($reportsContainer);t.on("transitionstart MSTransitionStart webkitTransitionStart oTransitionStart",tt).on("transitionend MSTransitionEnd webkitTransitionEnd oTransitionEnd",it)}function s(n,t,i,r,u){var f,e,o;for(i=d(i,0),r=d(r,t.length-i),f=i+r-1,f>t.length-1&&(f=t.length-1),e=i;e<=f;e++)o=t[e],yt(n,o,u);return n}function yt(n,t,i){return $staffMember=$('<li class="org-con-item-container clearfix">'),$staffMember.append(h(t,i)),n.append($staffMember),n}function h(n,t){var r=$('<article class="staff-member-related">'),u=$('<a role="button" href="#">').data("staffMember",n).appendTo(r),i;return p(u,n,t.profileImageRelatedSize,!1,t.profileImageUrlFormat,t.profilePageUrlFormat),i=$('<div class="profile-info-container">').appendTo(u),w(i,n,!1,t.startHeadingRank,t.profilePageUrlFormat),c(i,n),pt(i,n),r}function pt(n,t){r(n,wt,t)}function wt(i){if(i.DirectReportsCount>0){var r=i.DirectReportsCount===1?t.directReportsSingle:t.directReportsPlural,u=n.String.format(r,i.DirectReportsCount);return $('<p class="direct-reports">').html(u)}}function bt(n,t,i){r(n,kt,t,i)}function kt(i,r){if(i.DirectReportsCount>0){var u=i.DirectReportsCount===1?t.peopleReportingToSingle:t.peopleReportingToPlural,f=n.String.format(u,i.DirectReportsCount,e(i));return $("<h"+r+' class="direct-reports-title">').text(f)}}function c(n,t){r(n,dt,t)}function dt(n){var t=[];return y(t,'<span class="staff-job-title">',l(n.JobTitle)),y(t,'<span class="staff-department">',l(n.Department)),v(t,'<p class="staff-role">','<span class="sub-title-seperator"> <\/span>')}function l(n){return n!==null&&typeof n=="object"&&n.hasOwnProperty("Value")&&typeof n.Value=="string"?n.Value:null}function gt(n,t){r(n,ni,t)}function ni(n){var i=[],t,r;for(a(i,{Key:"email",Label:"Email",Value:n.Email},"email"),t=0;t<n.Properties.length;t++)r=n.Properties[t],a(i,r,"string");return v(i,'<div class="staff-details">')}function a(n,t,i){var r=ti(t,i);r.length>0&&n.push(r)}function ti(n,t){t=typeof t!="undefined"?t:"string";var f=i(n.Key),e=i(n.Label),r=i(n.Value);if(f!==null&&r!==null){var o=$('<span class="user-detai-label">').html(e+":"),u=$('<span class="user-detai-value">'),s=f!==null?"user-"+ii(f):"";switch(t){case"string":u.html(r);break;case"email":$email=$("<a>").attr({href:"mailto:"+r}).html(r);u.append($email);break;case"link":$link=$("<a>").attr({href:r}).html(r);u.append($link)}return $('<p class="staff-detail user-oc-extension">').addClass(s).append(o).append(u)}return $()}function ii(n){return n.toLowerCase().replace(/^\s+|\s+$/g,"").replace(/[^a-z\d]+/ig,"-").replace(/^(\d)/g,"-$1").replace(/-{2,}/g,"-").replace(/-+$/g,"")}function v(n,t,i){var u,r;if(n.length===0)return $();for(u=["object","string"].indexOf(typeof i)>-1,$container=$(t),r=0;r<n.length;r++)r>0&&u&&$container.append($(i)),$container.append(n[r]);return $container}function y(n,t,i){var r=ri(t,i);r.length>0&&n.push(r)}function ri(n,t){var r=i(t);return r!==null?$(n).html(r):$()}function p(n,t,i,u,f,e){r(n,ui,t,i,u,f,e)}function ui(i,r,f,e,o){var s=u(i),l=n.String.format(e,n.Settings.Application.GroupName,i.Id,r),a=n.String.format(t.profileImageAlt,s),h=$('<div class="profile-image-clip" aria-hidden="true">'),c=f?b(i.Id,s,o).attr("tabindex","-1"):$("<span>"),v;return c.addClass("image-wrap").appendTo(h),v=$("<img>").addClass("profile-image").attr({src:l,alt:a}).css("border-width","0px").appendTo(c),h}function w(n,t,i,u,f){r(n,fi,t,i,u,f)}function fi(n,t,i,r){var f=u(n);return f===""?$():($nameBlock=$("<h"+(i+1)+' class="list-item-title staff-name">').html(f),t?b(n.Id,f,r).addClass("staff-name-container").append($nameBlock):$nameBlock)}function b(i,r,u){if(u==null||u.indexOf("{0}")===-1)return $("<span>");var f=n.String.format(u,i),e=n.String.format(t.profileLinkTitle,r);return $("<a>").attr({href:f,title:e})}function k(n,t,i,r){if(i=typeof i=="undefined"?0:i,i>=r.maxManagerDepth)return $();var u=$('<li class="org-con-item-container clearfix">');return u.append(h(t,r)),t.HasManager?(u.addClass("has-manager"),t.hasOwnProperty("ReportsTo")&&n.append(k(n,t.ReportsTo,i+1,r))):u.addClass("no-manager"),n.append(u),n}function u(n){var i=oi(n.FirstName,n.LastName).join(" ");return i===""?t.unnamedPerson:i}function e(n){return ei(n.FirstName,n.LastName)||t.unnamedPerson}function ei(){for(var r,t,n=0;n<arguments.length;n++)if(r=arguments[n],t=i(r),t!==null)return t;return null}function oi(){for(var u,t,r=[],n=0;n<arguments.length;n++)u=arguments[n],t=i(u),t!==null&&r.push(t);return r}function i(n){return typeof n=="string"&&(n=n.trim(),n!=="")?n:null}function d(n,t){return typeof n!="undefined"&&n!==null?n:t}function r(n,t){var r=Array.prototype.slice.call(arguments,2),i=t.apply(this,r);i!==null&&typeof i=="object"&&i.length>0&&i.appendTo(n)}var t={directReportsSingle:n.Snippet("Sys Js OrgChart Direct Reports Single","{0} direct report"),directReportsPlural:n.Snippet("Sys Js OrgChart Direct Reports Plural","{0} direct reports"),peopleReportingToSingle:n.Snippet("Sys Js OrgChart People Reporting To Single","{0} person reporting to {1}"),peopleReportingToPlural:n.Snippet("Sys Js OrgChart People Reporting To Plural","{0} people reporting to {1}"),unnamedPerson:n.Snippet("Sys Js OrgChart Unnamed Person","Unnamed Person"),profileImageAlt:n.Snippet("Sys Js Profile Image Alt","{0} profile image"),profileLinkTitle:n.Snippet("Sys Js OrgChart Profile Link","{0}'s profile page"),managerHeading:n.Snippet("Sys Js OrgChart Manager Heading","Chain of management to {0}"),staffMemberHeading:n.Snippet("Sys Js OrgChart Staff Heading","About {0}"),chartSectionLabel:n.Snippet("Sys Js OrgChart Section Label","Organisational chart centred around {0}"),skipToProfile:n.Snippet("Sys Js OrgChart Skip to Profile","Skip to {0}'s details"),genericErrorTitle:n.Snippet("Sys Js OrgChart Error Title","Cannot display this org chart"),genericErrorMessage:n.Snippet("Sys Js OrgChart Error Message","There was an unexpected problem when loading this org chart."),loggedOutErrorMessage:n.Snippet("Sys Js OrgChart Logged Out","Your login session may have expired.")},g=function(i,r){function h(n){var r,i;if(n===st(e.chart)){r=e.chart.data("current-user");f(e,r,u);return}i={userId:n};u.hierarchyTopUserId!==""&&(i.hierarchyTopUserId=u.hierarchyTop);$.ajax({url:u.endpointGetChart,method:"GET",dataType:"json",data:i,success:function(n){f(e,n,u)},error:function(n){var i=n.status===401?t.loggedOutErrorMessage:_string.genericErrorMessage;$error=$("<p>").text(i);o(e.container,e.chart,$error,u.startHeadingRank)}})}var u=$.extend({id:null,container:null,paginationLimit:3,maxManagerDepth:3,hierarchyTop:"",profileImageMainSize:80,profileImageRelatedSize:80,profileImageUrlFormat:"/files/ocuserimage/{0}/{1}/profile_image?w={2}",profilePageUrlFormat:"",endpointGetChart:"/ocapi/Workplace/orgchart/GetChart",renderError:!1,errorMessage:t.genericErrorMessage},i||{}),e={container:tt(u.container).attr("aria-live","polite").addClass("org-chart-attach"),chart:$('<section class="org-chart-container list-container">')},s;u.id=it(e.container);u.ids={staffMemberSection:u.id+"_sms"};u.startHeadingRank=n.Tools.NextHeadingRank(e.container);u.renderError?(s=$("<p>").text(u.errorMessage),o(e.container,e.chart,s,u.startHeadingRank)):f(e,r,u);window.addEventListener("popstate",function(){var t=n.Tools.GetQueryStringParameterByName("orgstartinguserid-"+u.id);t==undefined&&(t=n.Tools.GetQueryStringParameterByName("orgstartinguserid"));h(t)});e.chart.on("click",".staff-member-related a",function(t){t.preventDefault();var i=$(this).data("staffMember").Id;n.Tools.PushQueryStringValue("orgstartinguserid-"+u.id,i);h(i)});n.Tools.ResponsiveElement.setElement(e.chart,"org-chart",[0,320,580,960,1080],function(){})};return{init:g}});$oc.Ext("Plugins.UtilityBar",function(n){function i(n,t){t.attr("aria-expanded","true").addClass("toolbar-button-expanded");n.addClass("toolbar-expanded")}function t(n,t){t.attr("aria-expanded","false").removeClass("toolbar-button-expanded");n.removeClass("toolbar-expanded")}function r(n){return n.attr("aria-expanded")==="true"}function u(n,u){r(u)?t(n,u):i(n,u)}function f(n,t){return function(i){i.preventDefault();u(n,t)}}function e(n,i){return function(r){r.relatedTarget!=null&&($parentToolbar=$(r.relatedTarget).closest(".toolbar-item"),$parentToolbar.length>0&&$parentToolbar.get(0)===n.get(0))||t(n,i)}}function o(n,t){return function(){for(var r,l,i,u,a,o=n.innerWidth(),s=n.offset(),h=s.left,f=s.left+o,c=0,e=0;e<t.length;e++)(r=t.eq(e),["absolute","fixed"].indexOf(r.css("position"))>-1||r.data("is-quicklinks")===!0)||(l=r.outerWidth(!0),i=r.offset().left,i>f)||(i<h&&(i=h),u=i+l,u>f&&(u=f),a=u-i,c+=a);return(o-c)*.8}}function s(n,t){return function(){var i,r,u;return window.outerWidth<=768?!1:(i=!1,n.addClass("js-probe"),r=n.hasClass("toolbar-drop-down"),r&&n.removeClass("toolbar-drop-down").addClass("toolbar-link-list"),u=t(),n.css("max-width",u),n.find("li").first().offset().top===n.find("li").last().offset().top&&(i=!0),n.css("max-width",""),r&&n.addClass("toolbar-drop-down").removeClass("toolbar-link-list"),n.removeClass("js-probe"),i)}}function h(n,t,i){i.data("is-quicklinks",!0);var r=i.find(".toolbar-drop-down"),u=o(n,t),f=s(r,u);return function(){f()?(i.addClass("toolbar-item-list toolbar-display-links").removeClass("toolbar-display-dropdown"),r.removeClass("toolbar-drop-down").addClass("toolbar-link-list")):(i.removeClass("toolbar-item-list toolbar-display-links").removeClass("toolbar-display-dropdown"),r.addClass("toolbar-drop-down").removeClass("toolbar-link-list"))}}return{init:function(){var t=$(".toolbar-outer-container .toolbar-inner-container"),r,i,o,u;if(!n.Tools.IsJQuery(t)||t.length===0)return!1;if(r=t.find(".toolbar-item"),r.each(function(){var n=$(this),t=n.find(".toolbar-button");if(n.length!==0&&t.length!==0){t.on("click",f(n,t));n.on("focusout",e(n,t))}}),i=t.find(".toolbar-quicklinks").addClass("loaded"),i.length!==0){o=i.find("button").text();i.prepend($("<div>").addClass("toolbar-item-list-heading visuallyhidden").text(o+": "));u=h(t,r,i);u();$(window).on("resize",n.Tools.Debounce(u,50))}}}});$oc.Ext("Plugins.RadEditorA11yLayer",function(n){function u(n,t){n.val(t).data("original-text",t)}function f(n){n=n.replace(/<style([\s\S]*?)<\/style>/gi,"").replace(/<script([\s\S]*?)<\/script>/gi,"").replace(/<\/div>/ig,"\n").replace(/<\/li>/ig,"\n").replace(/<li>/ig,"").replace(/<\/ul>/ig,"\n").replace(/<\/p>/ig,"\n\n").replace(/<br\s*[\/]?>/gi,"\n").replace(/<[^>]+>/ig,"").replace(/[\t ]+/ig," ").trim();var t=document.createElement("textarea");return t.innerHTML=n,t.value.trim()}function t(n){return(n=$("<div>").text(n.trim()).html(),n==="")?n:(n="<p>"+n,n.replace(/\n{2,}/ig,"<\/p><p>").replace(/\n/ig,"<br>")+"<\/p>")}function i(n,t){var u,r,i;(n.set_html(t),u=n.get_html(),t!==u)&&(r=$(n.get_element()),r.data("br_bug_patched")||(i=function(){i.initializeBase(this);this.set_isDom(!0);this.set_enabled(!0);this.set_name("Remove Brs");this.set_description("Removes all additional Br elements from the content.")},i.prototype={getDesignContent:function(n){for(var i=n,t=n.lastChild;t&&t.tagName==="BR";)n.removeChild(t),t=n.lastChild;return i}},i.registerClass("RemoveBrs",Telerik.Web.UI.Editor.Filter),$telerik.isIE||n.get_filtersManager().add(new i),r.data("br_bug_patched",!0)),n.set_html(n.get_html()))}function r(n,r){var f=r.val(),u;r.data("original-text").trim()!==f.trim()&&(u=t(r.val()),i(n,u))}function e(e,o){var h;if(o.data("initAccessibilityLayer")!==!0){var c=n.Snippet("Sys Js RadEditor To plain text","Switch from rich text editor to plain text editor"),l=n.Snippet("Sys Js RadEditor To rich text","Switch from plain text editor to rich text editor"),a=n.Snippet("Sys Js RadEditor Confirm rich to plain","If you convert rich text to plain text, you'll lose any formatting and links.Do you still want to continue?"),s=$("<textarea>").height(o.height()).hide().on("focusout",function(){r(e,$(this))}),v=$("<button>").text(c).addClass("visuallyhidden").on("focusin",function(){$(this).removeClass("visuallyhidden")}).on("focusout",function(){var n=$(this);n.data("clicked")!==!0&&$(this).addClass("visuallyhidden")}).on("click",function(n){var i,h,o;n.preventDefault();i=$(this);i.data("clicked",!0);i.hasClass("textMode")?(i.removeClass("textMode"),i.text(c),r(e,s),s.hide(),e.set_visible(!0)):(h=e.get_html().trim(),o=f(h),(o===""||t(o)===h||window.confirm(a))&&(i.addClass("textMode"),i.text(l),u(s,o),s.show(),e.set_visible(!1)))});o.before(v).after(s).data("initAccessibilityLayer",!0);h=document.activeElement;i(e,e.get_html());h!=null&&h.focus()}}return{init:function(){Sys.Application.add_load(function(){$(".RadEditor").each(function(){var n=$(this),i=n.attr("id"),t=$telerik.findEditor(i);t!==null&&e(t,n)})})}}});$oc.Ext("Plugins.RadTreeA11yLayer",function(){return{init:function(){Telerik.Web.UI.RadTreeView!==undefined&&Telerik.Web.UI.RadTreeView!==null&&(Telerik.Web.UI.RadTreeView.prototype._applyWaiAria_old=Telerik.Web.UI.RadTreeView.prototype._applyWaiAria,Telerik.Web.UI.RadTreeView.prototype._ocApplyWaiAria=function(){var n=$telerik.$;if(this.get_enableAriaSupport()){var t=this.get_childListElement(),r=this.get_allNodes(),i=this;n(i.get_element()).removeAttr("role");n(".rtLI, .rtTop, .rtMid, .rtBot, .rtSp",i.get_element()).removeAttr("role","presentation");n(t).removeAttr("role","presentation");n.each(r,function(){var t=this.get_textElement(),i=this.get_childListElement();i&&i.removeAttribute("role");t&&(t.removeAttribute("role"),this.get_checkable()&&t.setAttribute("aria-checked",this.get_checked()?"true":"false"),t.removeAttribute("aria-disabled"),this._hasChildren()&&t.removeAttribute("aria-expanded"),t.removeAttribute("aria-selected"),t.removeAttribute("aria-grabbed"),t.setAttribute("tabindex","0"),t.setAttribute("role","checkbox"),this.get_selected()&&n(t).focus())});n(t).removeAttr("aria-multiselectable");n(t).removeAttr("aria-disabled")}},Telerik.Web.UI.RadTreeView.prototype._applyWaiAria=Telerik.Web.UI.RadTreeView.prototype._ocApplyWaiAria,Telerik.Web.UI.RadTreeView.prototype._getCustomKeyCode=function(n){var t=Sys.UI.Key;return n.shiftKey&&n.keyCode==t.tab?t.up:n.keyCode==t.tab?t.down:n.keyCode},Telerik.Web.UI.RadTreeView.prototype._onKeyDownModifiedCopy=function(n){var i=Sys.UI.Key,f=this._getCustomKeyCode(n),e=n.ctrlKey||n.rawEvent&&n.rawEvent.metaKey,s=!this.get_multipleSelect()||!e&&!n.shiftKey,u=this._highlightedNode,r,h=this._findItemByHierarchicalIndex(this._lastSelectedIndex),o=this._getFirstSelectableNode(),t,c,l;if(this._editing){this._onEditKeyDown(n);return}if((!n.target||n.target.tagName.toUpperCase()!="INPUT"||!(a(n.target).closest(".rtTemplate").length>0))&&(t=this.get_selectedNode(),t||((f==i.up||f==i.down||f==i.enter||f==i.space)&&(o&&o.set_selected(!0),n.preventDefault()),f==i.home||f==i.end||f==this._numpadAsteriskKeyCode))&&(!e&&u&&(u.unhighlight(),this._highlightedNode=null),!this._raiseCancelEvent("keyPressing",t,n)))switch(f){case i.down:n.preventDefault();r=e&&this.get_multipleSelect()&&u?this._getNextSelectableNode(u):n.shiftKey&&this.get_multipleSelect()&&h===t?this._getNextSelectableNode(this._getFirstSelectedNode()):this._getNextSelectableNode(t);this._handleKeySelection(r,u,n);break;case i.up:this.get_enableAriaSupport()||n.preventDefault();r=e&&this.get_multipleSelect()&&u?this._getPrevSelectableNode(u):n.shiftKey&&this.get_multipleSelect()&&h===t?this._getPrevSelectableNode(this._getFirstSelectedNode()):this._getPrevSelectableNode(t);this._handleKeySelection(r,u,n);break;case i.home:n.preventDefault();r=o;this._handleKeySelection(r,u,n);break;case i.end:n.preventDefault();r=this._getLastSelectableNode();this._handleKeySelection(r,u,n);break;case i.right:n.preventDefault();t.get_expanded()?(r=this._getNodeFirstSelectableChild(t),r&&this._selectNode(r,s)):this._expandNode(n,t);break;case i.left:n.preventDefault();t.get_expanded()?this._collapseNode(n,t):(r=t.get_parent(),r!=t.get_treeView()&&this._selectNode(r,s));break;case this._numpadPlusKeyCode:this._expandNode(n,t);break;case this._numpadMinusKeyCode:this._collapseNode(n,t);break;case this._numpadAsteriskKeyCode:this._expandNodes(this.get_allNodes());break;case i.space:n.preventDefault();e&&this.get_multipleSelect()?u&&u.set_selected(!u.get_selected()):this._checkBoxes&&this._checkNode(n,t);break;case i.enter:return this._raiseCancelEvent("nodeClicking",t,n)?!0:(this._raiseEvent("nodeClicked",t,n),c=t.get_navigateUrl(),c&&(l=t.get_linkElement(),l.focus()),this._postClickCommand(t),!0);case this._f2KeyCode:this.get_allowNodeEditing()&&t.get_selected()&&t.get_allowEdit()&&this._startEdit(t,n)}},Telerik.Web.UI.RadTreeView.prototype._onKeyDownHybrid=function(n){var t=Sys.UI.Key;return n.shiftKey&&n.keyCode===t.tab&&this.get_selectedNode()!==this._getFirstSelectableNode()?(n.preventDefault(),this._onKeyDownModifiedCopy(n)):n.keyCode===t.tab&&this.get_selectedNode()!==this._getLastSelectableNode()?this._onKeyDownModifiedCopy(n):n.keyCode===t.up||n.keyCode===t.down?(n.preventDefault(),this._onKeyDownOld(n)):this._onKeyDownOld(n)},Telerik.Web.UI.RadTreeView.prototype._onKeyDownOld=Telerik.Web.UI.RadTreeView.prototype._onKeyDown,Telerik.Web.UI.RadTreeView.prototype._onKeyDown=Telerik.Web.UI.RadTreeView.prototype._onKeyDownHybrid,$(".RadTreeView").each(function(){var n=$find(this.id);n&&(n._eventMap._eventMap.keydown.RadTreeView=Telerik.Web.UI.RadTreeView.prototype._onKeyDownHybrid,n._ocApplyWaiAria())}))}}});$oc.Ext("Plugins.UnsupportedBrowserWarning",function(){return{_cookiename:"_browserWarningDimissed",init:function(){var u=$oc.Settings.Application.UnsupportedBrowserSettings,n=$(".unsupported-browser-warning"),f,t,e,i;if(u.ShowWarning){for(f=document.cookie.split("; "),t=0;t<f.length;t++)if(e=f[t],e.startsWith($oc.Plugins.UnsupportedBrowserWarning._cookiename)){n.remove();return}i="";for(key in u.BrowserList)if(navigator.userAgent.indexOf(key)>-1){i=u.BrowserList[key];break}if(i===""){n.remove();return}if(n!==undefined){var c=$oc.Snippet("Sys Js Unsupported browser warning","{0} is no longer supported. We recommend you change your browser to improve your experience."),o=$("<div class='system-announcement-container'>"),r=$("<div class='system-announcement-content'>");r.appendTo(o);var l=$("<h3 class='system-announcement-message-title'>").html($oc.String.format(c,i)),a=$oc.Snippet("Sys Js Dismiss button text","Dismiss."),s=$("<input type='button' class='system-announcement-dismiss-button' value='"+a+"'>"),h=$("<a href='#' class='system-announcement-dismiss-cross'>Dismiss this announcement<\/a>");l.appendTo(r);s.appendTo(r);h.appendTo(r);o.appendTo(n);n.attr("role","region");n.attr("aria-label","Browser unsupported warning");$oc.Plugins.UnsupportedBrowserWarning.initClose(s);$oc.Plugins.UnsupportedBrowserWarning.initClose(h)}}else n.remove()},initClose:function(n){n.on("click",function(n){var r=$(this),u=r.closest(".unsupported-browser-warning"),t=new Date,i;t.setMonth(t.getMonth()+3);i="expires="+t.toUTCString();document.cookie=$oc.Plugins.UnsupportedBrowserWarning._cookiename+"=dimissed; "+i;u.remove();n.preventDefault()})}}});$oc.__setReady();
// Place any jQuery/helper plugins in here.
// Document Central Functions
function init(e){e.apiBase,e.FolderId;rootFolder(e.FolderId,e.apiBase,e.auth).then((function(n){buildRoot("rootFolder",n[0].FolderId,n[0].Name),buildList(n[0].FolderId,e.apiBase,e.auth,e.subFolders,e.collapsed),$("#dcContainer").removeClass("loading"),toggleFolder()}))}function buildRoot(e,n,t){addRootFolder(e,n,t),addRootContentsContainer(n)}function buildList(e,n,t,o,a){o?requestAsync(n+"/api/v1/folder/GetChildFolders?FolderId="+e,t).then((function(i){if(buildFiles(e,n,t,a),i.length>0){i.length>1&&i.sort((function(e,n){return e.Name<n.Name?-1:e.Name>n.Name?1:0})),$("#"+e+"Contents").length<1&&addContentsContainer(e,a);for(var s=0;s<i.length;s++)addFolder(e,i[s].FolderId,i[s].Name,a),buildList(i[s].FolderId,n,t,o,a)}})):buildFiles(e,n,t,a)}function buildFiles(e,n,t,o){requestAsync(n+"/api/v1/folder/GetFiles?FolderId="+e,t).then((function(n){if(n.length>0){n.length>1&&n.sort((function(e,n){return e.Name<n.Name?1:e.Name>n.Name?-1:0}));for(var t=0;t<n.length;t++)addFile(e,n[t].FileId,n[t].Name,n[t].Link,o)}}))}function getFolderFiles(e,n,t){var o=n+"/api/v1/folder/GetFiles?FolderId="+e;requestAsync(media?o:o+"&Type=Document",t).then((function(e){}))}function requestAsync(e,n){return $.ajaxSetup({headers:{"Content-Type":"application/json",Authorization:n}}),$.ajax({url:e,method:"GET",dataType:"json",contentType:"application/json"}).then((function(e){return e}))}function rootFolder(e,n,t){return requestAsync(n+"/api/v1/folder/Get?FolderId="+e,t)}function addRootFolder(e,n,t){addFolder(e,n,t,!1)}function addFolder(e,n,t,o){var a='<li class="dc-folder ';a=o?a+'closed"></li>':a+'open"></li>';var i='<button class="folder-toggle" data-folder="true" type="button"></button>',s='<span class="material-symbols-rounded">',d=(s=o?s+"folder</span>":s+"folder_open</span>")+rename(t,!1),r="#"+e+"Contents";i=$(i).append(d),a=$(a).attr("id",n).append(i),$(r).append(a)}function addFile(e,n,t,o,a){var i=rename(t,!0),s=o.split("."),d='<li class="dc-file"></li>',r='<a target="_blank"></a>',l='<i class="file ext-'+(s=s[s.length-1])+'"></i>',c='<span class="file-info">('+s+")</span>",u="#"+e+"Contents";r=$(r).attr("href","/"+o).append(l).append(i).append(c),d=$(d).append(r),$(u).length>0||addContentsContainer(e,a),$(u).prepend(d)}function addRootContentsContainer(e){addContentsContainer(e,!1)}function addContentsContainer(e,n){var t='<ul class="dc-folder-contents-container"';t=n?t+' style="height: 0px;"></ul>':t+"></ul>",t=$(t).attr("id",e+"Contents"),$("#"+e).append(t)}function rename(e,n){var t=e.replace(/-/g," ");if(n){var o=t.split(".");t=o.slice(0,o.length-1).join("")}return t}function collapseSection(e,n,t){var o=t.prop("scrollHeight"),a=t.css("transition");t.css({transition:""}),requestAnimationFrame((function(){t.css({height:o+"px"}),t.css({transition:a}),requestAnimationFrame((function(){t.css({height:"0px"})}))})),n.removeClass("open").addClass("closed")}function expandSection(e,n,t){var o=t.prop("scrollHeight");t.css({height:o+"px"}),t.on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",(function(e){t.css({height:"auto"}),t.off("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd")}))}function toggleFolder(e){$("#dcContainer").on("click",".folder-toggle",(function(e){e.preventDefault();var n=$(this).parent().attr("id"),t=$("#"+n),o=$("#"+n+"Contents");t.hasClass("open")?collapseSection($(this),t,o):t.hasClass("closed")&&(expandSection($(this),t,o),t.removeClass("closed").addClass("open")),$(this).parent().hasClass("closed")?$(this).children().text("folder"):$(this).children().text("folder_open")}))}function sortDocs(e,n){return e.Name<n.Name?-1:e.Name>n.Name?1:0}
// End Document Central Functions

$(document).ready(function() {

});
(function(){for(var n,u=function(){},t=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],i=t.length,r=window.console=window.console||{};i--;)n=t[i],r[n]||(r[n]=u)})();$(document).ready(function(){OpenCities.Plugins.Pagination.init(".seamless-pagination");OpenCities.Plugins.Accordion.init(".accordion-trigger");OpenCities.Plugins.Menu.init("#sc-main-menu");OpenCities.Plugins.BackToTop.init("#back-to-top");OpenCities.Plugins.HighlightText.init();OpenCities.Plugins.Tabs.init();OpenCities.Plugins.StickySideBar.init("#sub-navigation-container",{headerThreshold:133,footerThreshold:275});OpenCities.Plugins.ResponsiveTables.init();OpenCities.Plugins.Gallery.init();OpenCities.Plugins.GoogleMaps.init(".gmap");OpenCities.Plugins.AddToCalendar.init("#addToCalendarBody");OpenCities.Plugins.ZipAll.init(".zip-all");OpenCities.MapsFeature.lazy_init();OpenCities.AddressPicker.init();OpenCities.Search.init();OpenCities.Plugins.NavigatorDetector.init()});
